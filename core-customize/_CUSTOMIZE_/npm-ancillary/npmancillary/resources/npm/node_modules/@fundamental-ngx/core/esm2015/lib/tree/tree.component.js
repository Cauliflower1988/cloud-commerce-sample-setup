/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output, QueryList, ViewChildren, ViewEncapsulation } from '@angular/core';
import { TreeChildComponent } from './tree-child.component';
export class TreeComponent {
    constructor() {
        this.editRowClicked = new EventEmitter();
        this.deleteRowClicked = new EventEmitter();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.hideAll = false;
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        if (this.treeData && this.treeData.length) {
            this.treeData.forEach((/**
             * @param {?} row
             * @return {?}
             */
            row => {
                this.getChildDepth(row, 0);
                this.handleEmptyTrailingCells(row); // handle empty cells for parents
            }));
        }
    }
    /**
     * @return {?}
     */
    toggleDisplayAll() {
        this.hideAll = !this.hideAll;
        this.treeChildren.forEach((/**
         * @param {?} child
         * @return {?}
         */
        child => {
            child.toggleDisplayChildren(this.hideAll);
        }));
    }
    /**
     * @param {?} row
     * @param {?} depth
     * @return {?}
     */
    getChildDepth(row, depth) {
        if (depth > 0) {
            row.sublevelClass = 'fd-tree__group--sublevel-' + depth;
        }
        if (row.children) {
            row.children.forEach((/**
             * @param {?} child
             * @return {?}
             */
            child => {
                this.getChildDepth(child, depth + 1);
                this.handleEmptyTrailingCells(child); // handle empty cells for children
            }));
        }
    }
    /**
     * @param {?} row
     * @return {?}
     */
    handleEmptyTrailingCells(row) {
        if (row &&
            row.rowData &&
            row.rowData.length &&
            typeof row.rowData[0] !== 'object' &&
            this.headers &&
            this.headers.length) {
            while (row.rowData.length < this.headers.length) {
                row.rowData.push('');
            }
        }
        else if (row &&
            row.rowData &&
            row.rowData.length &&
            typeof row.rowData[0] === 'object' &&
            this.headers &&
            this.headers.length) {
            while (row.rowData.length < this.headers.length) {
                row.rowData.push({
                    displayText: ''
                });
            }
        }
    }
    /**
     * @param {?} row
     * @return {?}
     */
    editClicked(row) {
        this.editRowClicked.emit(row);
    }
    /**
     * @param {?} row
     * @return {?}
     */
    deleteClicked(row) {
        this.deleteRowClicked.emit(row);
    }
}
TreeComponent.decorators = [
    { type: Component, args: [{
                selector: 'fd-tree',
                template: "<div class=\"fd-tree fd-tree--header\"\n     *ngIf=\"headers.length > 0\">\n  <div class=\"fd-tree__row fd-tree__row--header\">\n    <div class=\"fd-tree__col fd-tree__col--control\">\n      <button (click)=\"toggleDisplayAll()\"\n              class=\"fd-tree__control\"\n              aria-label=\"Expand all\"\n              [ngClass]=\"{'is-pressed' : !hideAll}\"\n              [attr.aria-pressed]=\"!hideAll\"></button>\n      {{headers[0]}}\n    </div>\n    <div class=\"fd-tree__col\"\n         *ngFor=\"let header of headers | slice:1\">\n      {{header}}\n    </div>\n    <div class=\"fd-tree__col fd-tree__col--actions\"></div>\n  </div>\n</div>\n<ul class=\"fd-tree\"\n    id=\"ENusD653\"\n    role=\"tree\">\n  <fd-tree-child (editClicked)=\"editClicked($event)\"\n                 (deleteClicked)=\"deleteClicked($event)\"\n                 [displayTreeActions]=\"displayTreeActions\"\n                 *ngFor=\"let row of treeData\"\n                 [row]=\"row\"></fd-tree-child>\n</ul>\n",
                encapsulation: ViewEncapsulation.None,
                styles: ["@charset \"UTF-8\";/*!\n * Fundamental Styles v0.3.0\n * Copyright (c) 2019 SAP SE or an SAP affiliate company.\n * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/master/LICENSE)\n *//*!\n.fd-tree+(--header)\n    .fd-tree__group+(--sublevel-1...-6, ([aria-hidden] | .is-hidden))\n    .fd-tree__item\n        .fd-tree__row+(--header, ([aria-selected] | .is-selected))\n            .fd-tree__col+(--control, --actions)\n                .fd-tree__control+([aria-pressed] | .is-pressed)\n*/.fd-tree{--fd-tree-cell-spacing:var(--fd-width-gutter);--fd-tree-border-color:var(--fd-color-neutral-2);--fd-tree-background-color:var(--fd-color-background-2);--fd-tree-link-color:var(--fd-color-action-1);--fd-tree-header-color:var(--fd-color-text-3);--fd-tree-header-background-color:var(--fd-color-neutral-2);font-size:14px;line-height:1.42857;color:#32363a;color:var(--fd-color-text-1,#32363a);font-family:\"72\",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0 0 12px;border:0;position:relative;width:100%;max-width:100%;background-color:#fff;background-color:var(--fd-tree-background-color,#fff);border-bottom-color:var(--fd-tree-border-color,#eeeeef);border-bottom:0 solid #eeeeef}.fd-tree:after,.fd-tree:before{box-sizing:inherit;font-size:inherit}.fd-tree:last-child{margin-right:0;margin-bottom:0}.fd-tree--header{border-bottom:0;border-top-color:var(--fd-tree-border-color,#eeeeef);margin-bottom:0;background-color:#eeeeef;background-color:var(--fd-tree-header-background-color,#eeeeef);border-top:0 solid #eeeeef}.fd-tree__group{font-size:14px;line-height:1.42857;color:#32363a;color:var(--fd-color-text-1,#32363a);font-family:\"72\",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;transition:opacity 125ms linear;max-height:auto;opacity:1}.fd-tree__group:after,.fd-tree__group:before{box-sizing:inherit;font-size:inherit}.fd-tree__group.is-hidden{max-height:0;opacity:0;overflow:hidden}.fd-tree__item{font-size:14px;line-height:1.42857;color:#32363a;color:var(--fd-color-text-1,#32363a);font-family:\"72\",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;border-top-color:var(--fd-tree-border-color,#eeeeef);list-style:none;border-top:0 solid #eeeeef}.fd-tree__item:after,.fd-tree__item:before{box-sizing:inherit;font-size:inherit}.fd-tree__row{font-size:14px;line-height:1.42857;color:#32363a;color:var(--fd-color-text-1,#32363a);font-family:\"72\",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0 16px;margin:0;border:0;padding-left:var(--fd-tree-cell-spacing,16px);padding-right:var(--fd-tree-cell-spacing,16px);display:flex;align-items:center;position:relative;transition:background-color 125ms ease-in}.fd-tree__row:after,.fd-tree__row:before{box-sizing:inherit;font-size:inherit}.fd-tree__row .is-hover,.fd-tree__row:hover{background-color:#fafafa;background-color:var(--fd-color-background-hover,#fafafa)}.fd-tree__row--header{color:#6a6d70;color:var(--fd-tree-header-color,#6a6d70);background-color:#eeeeef;background-color:var(--fd-tree-header-background-color,#eeeeef);text-transform:uppercase}.fd-tree__row--header .is-hover,.fd-tree__row--header:hover{background-color:initial}.fd-tree__row.is-selected,.fd-tree__row[aria-selected=true]{background-color:rgba(10,110,209,.07);background-color:var(--fd-color-background-selected,rgba(10,110,209,.07))}.fd-tree__col{font-size:14px;line-height:1.42857;color:#32363a;color:var(--fd-color-text-1,#32363a);font-family:\"72\",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:12px 0;margin:0;border:0;flex:1;padding-left:30px}.fd-tree__col:after,.fd-tree__col:before{box-sizing:inherit;font-size:inherit}.fd-tree__col[dir=rtl],[dir=rtl] .fd-tree__col{padding-left:0;padding-right:30px}.fd-tree__col--control{flex:auto;width:20%}.fd-tree__group--sublevel-1 .fd-tree__col--control{padding-left:60px}.fd-tree__group--sublevel-1 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-1 .fd-tree__col--control{padding-left:0;padding-right:60px}.fd-tree__group--sublevel-2 .fd-tree__col--control{padding-left:90px}.fd-tree__group--sublevel-2 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-2 .fd-tree__col--control{padding-left:0;padding-right:90px}.fd-tree__group--sublevel-3 .fd-tree__col--control{padding-left:120px}.fd-tree__group--sublevel-3 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-3 .fd-tree__col--control{padding-left:0;padding-right:120px}.fd-tree__group--sublevel-4 .fd-tree__col--control{padding-left:150px}.fd-tree__group--sublevel-4 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-4 .fd-tree__col--control{padding-left:0;padding-right:150px}.fd-tree__group--sublevel-5 .fd-tree__col--control{padding-left:180px}.fd-tree__group--sublevel-5 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-5 .fd-tree__col--control{padding-left:0;padding-right:180px}.fd-tree__group--sublevel-6 .fd-tree__col--control{padding-left:210px}.fd-tree__group--sublevel-6 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-6 .fd-tree__col--control{padding-left:0;padding-right:210px}.fd-tree__group--sublevel-7 .fd-tree__col--control{padding-left:240px}.fd-tree__group--sublevel-7 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-7 .fd-tree__col--control{padding-left:0;padding-right:240px}.fd-tree__group--sublevel-8 .fd-tree__col--control{padding-left:270px}.fd-tree__group--sublevel-8 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-8 .fd-tree__col--control{padding-left:0;padding-right:270px}.fd-tree__col--actions{font-size:14px;line-height:1.42857;color:#32363a;color:var(--fd-color-text-1,#32363a);font-family:\"72\",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;text-align:right}.fd-tree__col--actions:after,.fd-tree__col--actions:before{box-sizing:inherit;font-size:inherit}.fd-tree__col--actions[dir=rtl],[dir=rtl] .fd-tree__col--actions{text-align:left}.fd-tree__control{font-size:14px;line-height:1.42857;color:var(--fd-color-text-1,#32363a);font-family:\"72\",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;display:inline-block;margin:-8px 12px 0 -36px;padding:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:0;border:0;text-decoration:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;background-color:transparent;border-radius:4px;position:absolute;top:calc(50% - 9px);width:34px;height:34px;transform:rotate(180deg);vertical-align:middle;transition:transform 125ms linear;color:#0a6ed1;color:var(--fd-color-action-1,#0a6ed1)}.fd-tree__control:after,.fd-tree__control:before{box-sizing:inherit;font-size:inherit}.fd-tree__control:before{font-family:SAP-icons;font-style:normal;font-weight:400;text-align:center;display:inline-block;text-decoration:inherit;text-transform:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;speak:none;content:\"\uE1EB\";font-size:14px;line-height:1.42857}.fd-tree__control.is-focus,.fd-tree__control:focus{box-shadow:0 0 0 1px #085caf;box-shadow:0 0 0 1px var(--fd-color-action-focus,#085caf);z-index:5}.fd-tree__control[dir=rtl],[dir=rtl] .fd-tree__control{margin-right:-40px;transform:rotate(0)}.fd-tree__control.is-pressed{transform:rotate(270deg)}"]
            }] }
];
TreeComponent.propDecorators = {
    headers: [{ type: Input }],
    treeData: [{ type: Input }],
    hideAll: [{ type: Input }],
    displayTreeActions: [{ type: Input }],
    editRowClicked: [{ type: Output }],
    deleteRowClicked: [{ type: Output }],
    treeChildren: [{ type: ViewChildren, args: [TreeChildComponent,] }]
};
if (false) {
    /** @type {?} */
    TreeComponent.prototype.headers;
    /** @type {?} */
    TreeComponent.prototype.treeData;
    /** @type {?} */
    TreeComponent.prototype.hideAll;
    /** @type {?} */
    TreeComponent.prototype.displayTreeActions;
    /** @type {?} */
    TreeComponent.prototype.editRowClicked;
    /** @type {?} */
    TreeComponent.prototype.deleteRowClicked;
    /** @type {?} */
    TreeComponent.prototype.treeChildren;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZnVuZGFtZW50YWwtbmd4L2NvcmUvIiwic291cmNlcyI6WyJsaWIvdHJlZS90cmVlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUVILFNBQVMsRUFDVCxZQUFZLEVBQ1osS0FBSyxFQUVMLE1BQU0sRUFDTixTQUFTLEVBQ1QsWUFBWSxFQUNaLGlCQUFpQixFQUNwQixNQUFNLGVBQWUsQ0FBQztBQUd2QixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQVE1RCxNQUFNLE9BQU8sYUFBYTtJQU4xQjtRQWVjLG1CQUFjLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFFNUQscUJBQWdCLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7SUF1RTVFLENBQUM7Ozs7SUFuRUcsUUFBUTtRQUNKLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO0lBQ3pCLENBQUM7Ozs7SUFFRCxrQkFBa0I7UUFDZCxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUU7WUFDdkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPOzs7O1lBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ3hCLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUMzQixJQUFJLENBQUMsd0JBQXdCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxpQ0FBaUM7WUFDekUsQ0FBQyxFQUFDLENBQUM7U0FDTjtJQUNMLENBQUM7Ozs7SUFFRCxnQkFBZ0I7UUFDWixJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUM3QixJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU87Ozs7UUFBQyxLQUFLLENBQUMsRUFBRTtZQUM5QixLQUFLLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzlDLENBQUMsRUFBQyxDQUFDO0lBQ1AsQ0FBQzs7Ozs7O0lBRUQsYUFBYSxDQUFDLEdBQUcsRUFBRSxLQUFLO1FBQ3BCLElBQUksS0FBSyxHQUFHLENBQUMsRUFBRTtZQUNYLEdBQUcsQ0FBQyxhQUFhLEdBQUcsMkJBQTJCLEdBQUcsS0FBSyxDQUFDO1NBQzNEO1FBQ0QsSUFBSSxHQUFHLENBQUMsUUFBUSxFQUFFO1lBQ2QsR0FBRyxDQUFDLFFBQVEsQ0FBQyxPQUFPOzs7O1lBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ3pCLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDckMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsa0NBQWtDO1lBQzVFLENBQUMsRUFBQyxDQUFDO1NBQ047SUFDTCxDQUFDOzs7OztJQUVELHdCQUF3QixDQUFDLEdBQUc7UUFDeEIsSUFDSSxHQUFHO1lBQ0gsR0FBRyxDQUFDLE9BQU87WUFDWCxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU07WUFDbEIsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLFFBQVE7WUFDbEMsSUFBSSxDQUFDLE9BQU87WUFDWixJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFDckI7WUFDRSxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFO2dCQUM3QyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQzthQUN4QjtTQUNKO2FBQU0sSUFDSCxHQUFHO1lBQ0gsR0FBRyxDQUFDLE9BQU87WUFDWCxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU07WUFDbEIsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLFFBQVE7WUFDbEMsSUFBSSxDQUFDLE9BQU87WUFDWixJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFDckI7WUFDRSxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFO2dCQUM3QyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztvQkFDYixXQUFXLEVBQUUsRUFBRTtpQkFDbEIsQ0FBQyxDQUFDO2FBQ047U0FDSjtJQUNMLENBQUM7Ozs7O0lBRUQsV0FBVyxDQUFDLEdBQUc7UUFDWCxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNsQyxDQUFDOzs7OztJQUVELGFBQWEsQ0FBQyxHQUFHO1FBQ2IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNwQyxDQUFDOzs7WUF2RkosU0FBUyxTQUFDO2dCQUNQLFFBQVEsRUFBRSxTQUFTO2dCQUNuQix5L0JBQW9DO2dCQUNwQyxhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTs7YUFFeEM7OztzQkFFSSxLQUFLO3VCQUVMLEtBQUs7c0JBRUwsS0FBSztpQ0FFTCxLQUFLOzZCQUVMLE1BQU07K0JBRU4sTUFBTTsyQkFFTixZQUFZLFNBQUMsa0JBQWtCOzs7O0lBWmhDLGdDQUEyQjs7SUFFM0IsaUNBQW1DOztJQUVuQyxnQ0FBMEI7O0lBRTFCLDJDQUFxQzs7SUFFckMsdUNBQXNFOztJQUV0RSx5Q0FBd0U7O0lBRXhFLHFDQUE4RSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQWZ0ZXJDb250ZW50SW5pdCxcbiAgICBDb21wb25lbnQsXG4gICAgRXZlbnRFbWl0dGVyLFxuICAgIElucHV0LFxuICAgIE9uSW5pdCxcbiAgICBPdXRwdXQsXG4gICAgUXVlcnlMaXN0LFxuICAgIFZpZXdDaGlsZHJlbixcbiAgICBWaWV3RW5jYXBzdWxhdGlvblxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgVHJlZVJvd09iamVjdCB9IGZyb20gJy4vdHJlZS1yb3ctb2JqZWN0Lm1vZGVsJztcbmltcG9ydCB7IFRyZWVDaGlsZENvbXBvbmVudCB9IGZyb20gJy4vdHJlZS1jaGlsZC5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2ZkLXRyZWUnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi90cmVlLmNvbXBvbmVudC5odG1sJyxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIHN0eWxlVXJsczogWycuL3RyZWUuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBUcmVlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlckNvbnRlbnRJbml0IHtcbiAgICBASW5wdXQoKSBoZWFkZXJzOiBzdHJpbmdbXTtcblxuICAgIEBJbnB1dCgpIHRyZWVEYXRhOiBUcmVlUm93T2JqZWN0W107XG5cbiAgICBASW5wdXQoKSBoaWRlQWxsOiBib29sZWFuO1xuXG4gICAgQElucHV0KCkgZGlzcGxheVRyZWVBY3Rpb25zOiBib29sZWFuO1xuXG4gICAgQE91dHB1dCgpIGVkaXRSb3dDbGlja2VkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gICAgQE91dHB1dCgpIGRlbGV0ZVJvd0NsaWNrZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgICBAVmlld0NoaWxkcmVuKFRyZWVDaGlsZENvbXBvbmVudCkgdHJlZUNoaWxkcmVuOiBRdWVyeUxpc3Q8VHJlZUNoaWxkQ29tcG9uZW50PjtcblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmhpZGVBbGwgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnRyZWVEYXRhICYmIHRoaXMudHJlZURhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnRyZWVEYXRhLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldENoaWxkRGVwdGgocm93LCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVtcHR5VHJhaWxpbmdDZWxscyhyb3cpOyAvLyBoYW5kbGUgZW1wdHkgY2VsbHMgZm9yIHBhcmVudHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9nZ2xlRGlzcGxheUFsbCgpIHtcbiAgICAgICAgdGhpcy5oaWRlQWxsID0gIXRoaXMuaGlkZUFsbDtcbiAgICAgICAgdGhpcy50cmVlQ2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICBjaGlsZC50b2dnbGVEaXNwbGF5Q2hpbGRyZW4odGhpcy5oaWRlQWxsKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0Q2hpbGREZXB0aChyb3csIGRlcHRoKSB7XG4gICAgICAgIGlmIChkZXB0aCA+IDApIHtcbiAgICAgICAgICAgIHJvdy5zdWJsZXZlbENsYXNzID0gJ2ZkLXRyZWVfX2dyb3VwLS1zdWJsZXZlbC0nICsgZGVwdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvdy5jaGlsZHJlbikge1xuICAgICAgICAgICAgcm93LmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2hpbGREZXB0aChjaGlsZCwgZGVwdGggKyAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVtcHR5VHJhaWxpbmdDZWxscyhjaGlsZCk7IC8vIGhhbmRsZSBlbXB0eSBjZWxscyBmb3IgY2hpbGRyZW5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlRW1wdHlUcmFpbGluZ0NlbGxzKHJvdykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICByb3cgJiZcbiAgICAgICAgICAgIHJvdy5yb3dEYXRhICYmXG4gICAgICAgICAgICByb3cucm93RGF0YS5sZW5ndGggJiZcbiAgICAgICAgICAgIHR5cGVvZiByb3cucm93RGF0YVswXSAhPT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHRoaXMuaGVhZGVycyAmJlxuICAgICAgICAgICAgdGhpcy5oZWFkZXJzLmxlbmd0aFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHdoaWxlIChyb3cucm93RGF0YS5sZW5ndGggPCB0aGlzLmhlYWRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcm93LnJvd0RhdGEucHVzaCgnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICByb3cgJiZcbiAgICAgICAgICAgIHJvdy5yb3dEYXRhICYmXG4gICAgICAgICAgICByb3cucm93RGF0YS5sZW5ndGggJiZcbiAgICAgICAgICAgIHR5cGVvZiByb3cucm93RGF0YVswXSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHRoaXMuaGVhZGVycyAmJlxuICAgICAgICAgICAgdGhpcy5oZWFkZXJzLmxlbmd0aFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHdoaWxlIChyb3cucm93RGF0YS5sZW5ndGggPCB0aGlzLmhlYWRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcm93LnJvd0RhdGEucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0OiAnJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZWRpdENsaWNrZWQocm93KSB7XG4gICAgICAgIHRoaXMuZWRpdFJvd0NsaWNrZWQuZW1pdChyb3cpO1xuICAgIH1cblxuICAgIGRlbGV0ZUNsaWNrZWQocm93KSB7XG4gICAgICAgIHRoaXMuZGVsZXRlUm93Q2xpY2tlZC5lbWl0KHJvdyk7XG4gICAgfVxufVxuIl19