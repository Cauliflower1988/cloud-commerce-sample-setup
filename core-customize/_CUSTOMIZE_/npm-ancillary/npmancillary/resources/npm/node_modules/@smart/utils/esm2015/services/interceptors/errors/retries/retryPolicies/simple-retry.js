/**
 * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.
 * @module smartutils
 */
/**
 * @ngdoc object
 * @name @smartutils.object:SIMPLE_RETRY_DEFAULT_SETTING
 *
 * @description
 * The setting object to be used as default values for retry.
 */
export const SIMPLE_RETRY_DEFAULT_SETTING = {
    MAX_ATTEMPT: 5,
    MIN_BACKOFF: 0,
    RETRY_INTERVAL: 500
};
/**
 * @ngdoc service
 * @name @smartutils.services:simpleRetry
 * @description
 * When used by a retry strategy, this service could provide a simple fixed delay time to be used by the strategy before the next request is sent. The service also provides functionality to check if it is possible to perform a next retry.
 */
export class SimpleRetry {
    calculateNextDelay(retryInterval, minBackoff) {
        minBackoff = minBackoff || SIMPLE_RETRY_DEFAULT_SETTING.MIN_BACKOFF;
        retryInterval = retryInterval || SIMPLE_RETRY_DEFAULT_SETTING.RETRY_INTERVAL;
        const waveShield = minBackoff + Math.random();
        return retryInterval + waveShield;
    }
    canRetry(attemptCount, _maxAttempt) {
        const maxAttempt = _maxAttempt || SIMPLE_RETRY_DEFAULT_SETTING.MAX_ATTEMPT;
        return attemptCount <= maxAttempt;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2ltcGxlLXJldHJ5LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHNtYXJ0L3V0aWxzLyIsInNvdXJjZXMiOlsic2VydmljZXMvaW50ZXJjZXB0b3JzL2Vycm9ycy9yZXRyaWVzL3JldHJ5UG9saWNpZXMvc2ltcGxlLXJldHJ5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBOzs7Ozs7R0FNRztBQUNILE1BQU0sQ0FBQyxNQUFNLDRCQUE0QixHQUFHO0lBQ3hDLFdBQVcsRUFBRSxDQUFDO0lBQ2QsV0FBVyxFQUFFLENBQUM7SUFDZCxjQUFjLEVBQUUsR0FBRztDQUN0QixDQUFDO0FBRUY7Ozs7O0dBS0c7QUFDSCxNQUFNLE9BQU8sV0FBVztJQUNwQixrQkFBa0IsQ0FBQyxhQUFzQixFQUFFLFVBQW1CO1FBQzFELFVBQVUsR0FBRyxVQUFVLElBQUksNEJBQTRCLENBQUMsV0FBVyxDQUFDO1FBQ3BFLGFBQWEsR0FBRyxhQUFhLElBQUksNEJBQTRCLENBQUMsY0FBYyxDQUFDO1FBRTdFLE1BQU0sVUFBVSxHQUFHLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDOUMsT0FBTyxhQUFhLEdBQUcsVUFBVSxDQUFDO0lBQ3RDLENBQUM7SUFFRCxRQUFRLENBQUMsWUFBb0IsRUFBRSxXQUFvQjtRQUMvQyxNQUFNLFVBQVUsR0FBRyxXQUFXLElBQUksNEJBQTRCLENBQUMsV0FBVyxDQUFDO1FBQzNFLE9BQU8sWUFBWSxJQUFJLFVBQVUsQ0FBQztJQUN0QyxDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQG1vZHVsZSBzbWFydHV0aWxzXG4gKi9cbmltcG9ydCB7IElSZXRyeSB9IGZyb20gJy4vaS1yZXRyeSc7XG4vKipcbiAqIEBuZ2RvYyBvYmplY3RcbiAqIEBuYW1lIEBzbWFydHV0aWxzLm9iamVjdDpTSU1QTEVfUkVUUllfREVGQVVMVF9TRVRUSU5HXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgc2V0dGluZyBvYmplY3QgdG8gYmUgdXNlZCBhcyBkZWZhdWx0IHZhbHVlcyBmb3IgcmV0cnkuXG4gKi9cbmV4cG9ydCBjb25zdCBTSU1QTEVfUkVUUllfREVGQVVMVF9TRVRUSU5HID0ge1xuICAgIE1BWF9BVFRFTVBUOiA1LFxuICAgIE1JTl9CQUNLT0ZGOiAwLFxuICAgIFJFVFJZX0lOVEVSVkFMOiA1MDBcbn07XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lIEBzbWFydHV0aWxzLnNlcnZpY2VzOnNpbXBsZVJldHJ5XG4gKiBAZGVzY3JpcHRpb25cbiAqIFdoZW4gdXNlZCBieSBhIHJldHJ5IHN0cmF0ZWd5LCB0aGlzIHNlcnZpY2UgY291bGQgcHJvdmlkZSBhIHNpbXBsZSBmaXhlZCBkZWxheSB0aW1lIHRvIGJlIHVzZWQgYnkgdGhlIHN0cmF0ZWd5IGJlZm9yZSB0aGUgbmV4dCByZXF1ZXN0IGlzIHNlbnQuIFRoZSBzZXJ2aWNlIGFsc28gcHJvdmlkZXMgZnVuY3Rpb25hbGl0eSB0byBjaGVjayBpZiBpdCBpcyBwb3NzaWJsZSB0byBwZXJmb3JtIGEgbmV4dCByZXRyeS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNpbXBsZVJldHJ5IGltcGxlbWVudHMgSVJldHJ5IHtcbiAgICBjYWxjdWxhdGVOZXh0RGVsYXkocmV0cnlJbnRlcnZhbD86IG51bWJlciwgbWluQmFja29mZj86IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIG1pbkJhY2tvZmYgPSBtaW5CYWNrb2ZmIHx8IFNJTVBMRV9SRVRSWV9ERUZBVUxUX1NFVFRJTkcuTUlOX0JBQ0tPRkY7XG4gICAgICAgIHJldHJ5SW50ZXJ2YWwgPSByZXRyeUludGVydmFsIHx8IFNJTVBMRV9SRVRSWV9ERUZBVUxUX1NFVFRJTkcuUkVUUllfSU5URVJWQUw7XG5cbiAgICAgICAgY29uc3Qgd2F2ZVNoaWVsZCA9IG1pbkJhY2tvZmYgKyBNYXRoLnJhbmRvbSgpO1xuICAgICAgICByZXR1cm4gcmV0cnlJbnRlcnZhbCArIHdhdmVTaGllbGQ7XG4gICAgfVxuXG4gICAgY2FuUmV0cnkoYXR0ZW1wdENvdW50OiBudW1iZXIsIF9tYXhBdHRlbXB0PzogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IG1heEF0dGVtcHQgPSBfbWF4QXR0ZW1wdCB8fCBTSU1QTEVfUkVUUllfREVGQVVMVF9TRVRUSU5HLk1BWF9BVFRFTVBUO1xuICAgICAgICByZXR1cm4gYXR0ZW1wdENvdW50IDw9IG1heEF0dGVtcHQ7XG4gICAgfVxufVxuIl19