/**
 * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.
 * @module smartutils
 */
import { values } from 'lodash';
import { AbstractForm } from './abstract-form';
export class FormList extends AbstractForm {
    constructor(component, control, inputs, parent, persist, forms = []) {
        super(component, control, inputs, persist, parent);
        this.forms = forms;
        forms.forEach((child) => {
            child.parent = this;
        });
    }
    /**
     * @override
     * Implements the abstract getPersistedValue() method.
     */
    getPersistedValue() {
        return this.forms.reduce((acc, child) => {
            if (!child.persist) {
                /**
                 * Look ahead and merge the values of the
                 * nested group, array or field.
                 *
                 * If it's a field, the values of the field
                 * would be an empty array, because it's not an object.
                 */
                return acc.concat(values(child.getPersistedValue()));
            }
            acc.push(child.getPersistedValue());
            return acc;
        }, []);
    }
    /**
     * Adds a form element to the end of the list.
     *
     * @param form
     */
    addFormElement(form) {
        this.forms = [...this.forms, form];
        this.control.push(form.control);
        form.parent = this;
    }
    /**
     * Removes a form element from the list.
     *
     * @param {string} index.
     */
    removeFormElement(index) {
        if (!this._isInBounds(index)) {
            return;
        }
        this.forms = this.forms.filter((f, i) => i !== index);
        this.control.removeAt(index);
    }
    /**
     * Returns an element at an index.
     *
     * @param index An index inbounds of the list.
     */
    formElementAt(index) {
        if (!this._isInBounds(index)) {
            return null;
        }
        return this.forms[index];
    }
    /**
     * The size of the list.
     */
    size() {
        return this.forms.length;
    }
    /**
     * Swaps a form element in the array.
     *
     * @param a The index of form a.
     * @param b The index of form b.
     */
    swapFormElements(a, b) {
        if (!this._isInBounds(a) || !this._isInBounds(b) || a === b) {
            return;
        }
        this.forms = [...this.forms];
        /**
         * Swapping form array.
         */
        const form = this.forms[a];
        this.forms[a] = this.forms[b];
        this.forms[b] = form;
        /**
         * Swapping control's array.
         */
        const control = this.control.at(a);
        this.control.insert(a, this.control.at(b));
        this.control.insert(b, control);
    }
    /**
     * Moves a form element in the array to a new position.
     *
     * @param from The previous index.
     * @param to The targeted index.
     */
    moveFormElement(from, to) {
        if (!this._isInBounds(from) || !this._isInBounds(to) || from === to) {
            return;
        }
        const delta = to < from ? -1 : 1;
        const tempControl = this.control.at(from);
        const tempForm = this.forms[from];
        for (let i = from; i !== to; i += delta) {
            const position = i + delta;
            this.control.setControl(i, this.control.at(position));
            this.forms[i] = this.forms[position];
        }
        this.control.setControl(to, tempControl);
        this.forms[to] = tempForm;
    }
    /**
     * Checks of the index is in bounds.
     *
     * @internal
     * @param index
     */
    _isInBounds(index) {
        return index < this.forms.length && index >= 0;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1saXN0LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHNtYXJ0L3V0aWxzLyIsInNvdXJjZXMiOlsibW9kdWxlcy9mb3JtLWJ1aWxkZXIvbW9kZWxzL2Zvcm0tbGlzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBRWhDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUkvQyxNQUFNLE9BQU8sUUFBUyxTQUFRLFlBQVk7SUFNdEMsWUFDSSxTQUF3QixFQUN4QixPQUFrQixFQUNsQixNQUF1QixFQUN2QixNQUEyQixFQUMzQixPQUFnQixFQUNULFFBQXdCLEVBQUU7UUFFakMsS0FBSyxDQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUY1QyxVQUFLLEdBQUwsS0FBSyxDQUFxQjtRQUlqQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDcEIsS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFDeEIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsaUJBQWlCO1FBQ2IsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQVUsRUFBRSxLQUFtQixFQUFFLEVBQUU7WUFDekQsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUU7Z0JBQ2hCOzs7Ozs7bUJBTUc7Z0JBQ0gsT0FBTyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDeEQ7WUFFRCxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7WUFDcEMsT0FBTyxHQUFHLENBQUM7UUFDZixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDWCxD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Q0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxLQUFLLEVBQUU7WUFDckMsTUFBTSxRQUFRLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztZQUUzQixJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUN0RCxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDeEM7UUFFRCxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUM7SUFDOUIsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ssV0FBVyxDQUFDLEtBQWE7UUFDN0IsT0FBTyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQztJQUNuRCxDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGb3JtQXJyYXkgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyB2YWx1ZXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBBYnN0cmFjdEZvcm0gfSBmcm9tICcuL2Fic3RyYWN0LWZvcm0nO1xuaW1wb3J0IHsgQ29tcG9uZW50VHlwZSB9IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBJbnB1dFByb3BlcnRpZXMgfSBmcm9tICcuL2lucHV0LXByb3BlcnRpZXMnO1xuXG5leHBvcnQgY2xhc3MgRm9ybUxpc3QgZXh0ZW5kcyBBYnN0cmFjdEZvcm0ge1xuICAgIC8qKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHJlYWRvbmx5IGNvbnRyb2whOiBGb3JtQXJyYXk7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgY29tcG9uZW50OiBDb21wb25lbnRUeXBlLFxuICAgICAgICBjb250cm9sOiBGb3JtQXJyYXksXG4gICAgICAgIGlucHV0czogSW5wdXRQcm9wZXJ0aWVzLFxuICAgICAgICBwYXJlbnQ6IEFic3RyYWN0Rm9ybSB8IG51bGwsXG4gICAgICAgIHBlcnNpc3Q6IGJvb2xlYW4sXG4gICAgICAgIHB1YmxpYyBmb3JtczogQWJzdHJhY3RGb3JtW10gPSBbXVxuICAgICkge1xuICAgICAgICBzdXBlcihjb21wb25lbnQsIGNvbnRyb2wsIGlucHV0cywgcGVyc2lzdCwgcGFyZW50KTtcblxuICAgICAgICBmb3Jtcy5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgY2hpbGQucGFyZW50ID0gdGhpcztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogSW1wbGVtZW50cyB0aGUgYWJzdHJhY3QgZ2V0UGVyc2lzdGVkVmFsdWUoKSBtZXRob2QuXG4gICAgICovXG4gICAgZ2V0UGVyc2lzdGVkVmFsdWUoKTogYW55W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3Jtcy5yZWR1Y2UoKGFjYzogYW55W10sIGNoaWxkOiBBYnN0cmFjdEZvcm0pID0+IHtcbiAgICAgICAgICAgIGlmICghY2hpbGQucGVyc2lzdCkge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIExvb2sgYWhlYWQgYW5kIG1lcmdlIHRoZSB2YWx1ZXMgb2YgdGhlXG4gICAgICAgICAgICAgICAgICogbmVzdGVkIGdyb3VwLCBhcnJheSBvciBmaWVsZC5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIElmIGl0J3MgYSBmaWVsZCwgdGhlIHZhbHVlcyBvZiB0aGUgZmllbGRcbiAgICAgICAgICAgICAgICAgKiB3b3VsZCBiZSBhbiBlbXB0eSBhcnJheSwgYmVjYXVzZSBpdCdzIG5vdCBhbiBvYmplY3QuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQodmFsdWVzKGNoaWxkLmdldFBlcnNpc3RlZFZhbHVlKCkpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWNjLnB1c2goY2hpbGQuZ2V0UGVyc2lzdGVkVmFsdWUoKSk7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCBbXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIGZvcm0gZWxlbWVudCB0byB0aGUgZW5kIG9mIHRoZSBsaXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZvcm1cbiAgICAgKi9cbiAgICBhZGRGb3JtRWxlbWVudChmb3JtOiBBYnN0cmFjdEZvcm0pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5mb3JtcyA9IFsuLi50aGlzLmZvcm1zLCBmb3JtXTtcbiAgICAgICAgdGhpcy5jb250cm9sLnB1c2goZm9ybS5jb250cm9sKTtcblxuICAgICAgICBmb3JtLnBhcmVudCA9IHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGZvcm0gZWxlbWVudCBmcm9tIHRoZSBsaXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGluZGV4LlxuICAgICAqL1xuICAgIHJlbW92ZUZvcm1FbGVtZW50KGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0luQm91bmRzKGluZGV4KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5mb3JtcyA9IHRoaXMuZm9ybXMuZmlsdGVyKChmLCBpKSA9PiBpICE9PSBpbmRleCk7XG4gICAgICAgIHRoaXMuY29udHJvbC5yZW1vdmVBdChpbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlbGVtZW50IGF0IGFuIGluZGV4LlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4IEFuIGluZGV4IGluYm91bmRzIG9mIHRoZSBsaXN0LlxuICAgICAqL1xuICAgIGZvcm1FbGVtZW50QXQoaW5kZXg6IG51bWJlcik6IEFic3RyYWN0Rm9ybSB8IG51bGwge1xuICAgICAgICBpZiAoIXRoaXMuX2lzSW5Cb3VuZHMoaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1zW2luZGV4XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2l6ZSBvZiB0aGUgbGlzdC5cbiAgICAgKi9cbiAgICBzaXplKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1zLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTd2FwcyBhIGZvcm0gZWxlbWVudCBpbiB0aGUgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYSBUaGUgaW5kZXggb2YgZm9ybSBhLlxuICAgICAqIEBwYXJhbSBiIFRoZSBpbmRleCBvZiBmb3JtIGIuXG4gICAgICovXG4gICAgc3dhcEZvcm1FbGVtZW50cyhhOiBudW1iZXIsIGI6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuX2lzSW5Cb3VuZHMoYSkgfHwgIXRoaXMuX2lzSW5Cb3VuZHMoYikgfHwgYSA9PT0gYikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5mb3JtcyA9IFsuLi50aGlzLmZvcm1zXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3dhcHBpbmcgZm9ybSBhcnJheS5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLmZvcm1zW2FdO1xuICAgICAgICB0aGlzLmZvcm1zW2FdID0gdGhpcy5mb3Jtc1tiXTtcbiAgICAgICAgdGhpcy5mb3Jtc1tiXSA9IGZvcm07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN3YXBwaW5nIGNvbnRyb2wncyBhcnJheS5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGNvbnRyb2wgPSB0aGlzLmNvbnRyb2wuYXQoYSk7XG4gICAgICAgIHRoaXMuY29udHJvbC5pbnNlcnQoYSwgdGhpcy5jb250cm9sLmF0KGIpKTtcbiAgICAgICAgdGhpcy5jb250cm9sLmluc2VydChiLCBjb250cm9sKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBhIGZvcm0gZWxlbWVudCBpbiB0aGUgYXJyYXkgdG8gYSBuZXcgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZnJvbSBUaGUgcHJldmlvdXMgaW5kZXguXG4gICAgICogQHBhcmFtIHRvIFRoZSB0YXJnZXRlZCBpbmRleC5cbiAgICAgKi9cbiAgICBtb3ZlRm9ybUVsZW1lbnQoZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5faXNJbkJvdW5kcyhmcm9tKSB8fCAhdGhpcy5faXNJbkJvdW5kcyh0bykgfHwgZnJvbSA9PT0gdG8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRlbHRhID0gdG8gPCBmcm9tID8gLTEgOiAxO1xuXG4gICAgICAgIGNvbnN0IHRlbXBDb250cm9sID0gdGhpcy5jb250cm9sLmF0KGZyb20pO1xuICAgICAgICBjb25zdCB0ZW1wRm9ybSA9IHRoaXMuZm9ybXNbZnJvbV07XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IGZyb207IGkgIT09IHRvOyBpICs9IGRlbHRhKSB7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGkgKyBkZWx0YTtcblxuICAgICAgICAgICAgdGhpcy5jb250cm9sLnNldENvbnRyb2woaSwgdGhpcy5jb250cm9sLmF0KHBvc2l0aW9uKSk7XG4gICAgICAgICAgICB0aGlzLmZvcm1zW2ldID0gdGhpcy5mb3Jtc1twb3NpdGlvbl07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbnRyb2wuc2V0Q29udHJvbCh0bywgdGVtcENvbnRyb2wpO1xuICAgICAgICB0aGlzLmZvcm1zW3RvXSA9IHRlbXBGb3JtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBvZiB0aGUgaW5kZXggaXMgaW4gYm91bmRzLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIGluZGV4XG4gICAgICovXG4gICAgcHJpdmF0ZSBfaXNJbkJvdW5kcyhpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiBpbmRleCA8IHRoaXMuZm9ybXMubGVuZ3RoICYmIGluZGV4ID49IDA7XG4gICAgfVxufVxuIl19