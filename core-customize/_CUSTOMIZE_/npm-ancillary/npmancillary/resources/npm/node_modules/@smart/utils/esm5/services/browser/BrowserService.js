/**
 * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.
 * @module smartutils
 */
/**
 * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.
 * @module smartutils
 */
export var SUPPORTED_BROWSERS;
(function (SUPPORTED_BROWSERS) {
    SUPPORTED_BROWSERS[SUPPORTED_BROWSERS["IE"] = 0] = "IE";
    SUPPORTED_BROWSERS[SUPPORTED_BROWSERS["CHROME"] = 1] = "CHROME";
    SUPPORTED_BROWSERS[SUPPORTED_BROWSERS["FIREFOX"] = 2] = "FIREFOX";
    SUPPORTED_BROWSERS[SUPPORTED_BROWSERS["EDGE"] = 3] = "EDGE";
    SUPPORTED_BROWSERS[SUPPORTED_BROWSERS["SAFARI"] = 4] = "SAFARI";
    SUPPORTED_BROWSERS[SUPPORTED_BROWSERS["UNKNOWN"] = 5] = "UNKNOWN";
})(SUPPORTED_BROWSERS || (SUPPORTED_BROWSERS = {}));
var BrowserService = /** @class */ (function () {
    function BrowserService() {
        var _this = this;
        /*
            It is always better to detect a browser via features. Unfortunately, it's becoming really hard to identify
            Safari, since newer versions do not match the previous ones. Thus, we have to rely on User Agent as the last
            option.
        */
        this._isSafari = function () {
            // return this.getCurrentBrowser() === SUPPORTED_BROWSERS.SAFARI;
            var userAgent = window.navigator.userAgent;
            var vendor = window.navigator.vendor;
            var testFeature = /constructor/i.test(function HTMLElementConstructor() {
                //
            }.toString());
            var testUserAgent = vendor && vendor.indexOf('Apple') > -1 && userAgent && !userAgent.match('CriOS');
            return testFeature || testUserAgent;
        };
        this.isIE = function () {
            return _this.getCurrentBrowser() === SUPPORTED_BROWSERS.IE;
        };
        this.isFF = function () {
            return _this.getCurrentBrowser() === SUPPORTED_BROWSERS.FIREFOX;
        };
        this.isSafari = function () {
            return _this.getCurrentBrowser() === SUPPORTED_BROWSERS.SAFARI;
        };
    }
    BrowserService.prototype.getCurrentBrowser = function () {
        /* forbiddenNameSpaces window as any:false */
        var anyWindow = window;
        var browser = SUPPORTED_BROWSERS.UNKNOWN;
        if (typeof anyWindow.InstallTrigger !== 'undefined') {
            browser = SUPPORTED_BROWSERS.FIREFOX;
        }
        else if ( /*@cc_on!@*/false || !!document.documentMode) {
            browser = SUPPORTED_BROWSERS.IE;
        }
        else if (!!anyWindow.StyleMedia) {
            browser = SUPPORTED_BROWSERS.EDGE;
        }
        else if (!!anyWindow.chrome && !!anyWindow.chrome.webstore) {
            browser = SUPPORTED_BROWSERS.CHROME;
        }
        else if (this._isSafari()) {
            browser = SUPPORTED_BROWSERS.SAFARI;
        }
        return browser;
    };
    BrowserService.prototype.getBrowserLocale = function () {
        var locale = window.navigator.language.split('-');
        return locale.length === 1 ? locale[0] : locale[0] + '_' + locale[1].toUpperCase();
    };
    return BrowserService;
}());
export { BrowserService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnJvd3NlclNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac21hcnQvdXRpbHMvIiwic291cmNlcyI6WyJzZXJ2aWNlcy9icm93c2VyL0Jyb3dzZXJTZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7R0FHRztBQUVILE1BQU0sQ0FBTixJQUFZLGtCQU9YO0FBUEQsV0FBWSxrQkFBa0I7SUFDMUIsdURBQUUsQ0FBQTtJQUNGLCtEQUFNLENBQUE7SUFDTixpRUFBTyxDQUFBO0lBQ1AsMkRBQUksQ0FBQTtJQUNKLCtEQUFNLENBQUE7SUFDTixpRUFBTyxDQUFBO0FBQ1gsQ0FBQyxFQVBXLGtCQUFrQixLQUFsQixrQkFBa0IsUUFPN0I7QUFDRDtJQUFBO1FBQUEsaUJBeURDO1FBckNHOzs7O1VBSUQ7UUFDQyxjQUFTLEdBQUc7WUFDUixpRUFBaUU7WUFDakUsSUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7WUFDN0MsSUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUM7WUFFdkMsSUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FDbkMsU0FBUyxzQkFBc0I7Z0JBQzNCLEVBQUU7WUFDTixDQUFDLENBQUMsUUFBUSxFQUFFLENBQ2YsQ0FBQztZQUNGLElBQU0sYUFBYSxHQUNmLE1BQU0sSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLFNBQVMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFckYsT0FBTyxXQUFXLElBQUksYUFBYSxDQUFDO1FBQ3hDLENBQUMsQ0FBQztRQUVGLFNBQUksR0FBRztZQUNILE9BQU8sS0FBSSxDQUFDLGlCQUFpQixFQUFFLEtBQUssa0JBQWtCLENBQUMsRUFBRSxDQUFDO1FBQzlELENBQUMsQ0FBQztRQUVGLFNBQUksR0FBRztZQUNILE9BQU8sS0FBSSxDQUFDLGlCQUFpQixFQUFFLEtBQUssa0JBQWtCLENBQUMsT0FBTyxDQUFDO1FBQ25FLENBQUMsQ0FBQztRQUVGLGFBQVEsR0FBRztZQUNQLE9BQU8sS0FBSSxDQUFDLGlCQUFpQixFQUFFLEtBQUssa0JBQWtCLENBQUMsTUFBTSxDQUFDO1FBQ2xFLENBQUMsQ0FBQztJQU1OLENBQUM7SUF4REcsMENBQWlCLEdBQWpCO1FBQ0ksNkNBQTZDO1FBQzdDLElBQU0sU0FBUyxHQUFHLE1BQWEsQ0FBQztRQUNoQyxJQUFJLE9BQU8sR0FBRyxrQkFBa0IsQ0FBQyxPQUFPLENBQUM7UUFDekMsSUFBSSxPQUFPLFNBQVMsQ0FBQyxjQUFjLEtBQUssV0FBVyxFQUFFO1lBQ2pELE9BQU8sR0FBRyxrQkFBa0IsQ0FBQyxPQUFPLENBQUM7U0FDeEM7YUFBTSxLQUFJLFlBQWEsS0FBSyxJQUFJLENBQUMsQ0FBRSxRQUFnQixDQUFDLFlBQVksRUFBRTtZQUMvRCxPQUFPLEdBQUcsa0JBQWtCLENBQUMsRUFBRSxDQUFDO1NBQ25DO2FBQU0sSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsRUFBRTtZQUMvQixPQUFPLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDO1NBQ3JDO2FBQU0sSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUU7WUFDMUQsT0FBTyxHQUFHLGtCQUFrQixDQUFDLE1BQU0sQ0FBQztTQUN2QzthQUFNLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFO1lBQ3pCLE9BQU8sR0FBRyxrQkFBa0IsQ0FBQyxNQUFNLENBQUM7U0FDdkM7UUFFRCxPQUFPLE9BQU8sQ0FBQztJQUNuQixDQUFDO0lBbUNELHlDQUFnQixHQUFoQjtRQUNJLElBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNwRCxPQUFPLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3ZGLENBQUM7SUFDTCxxQkFBQztBQUFELENBQUMsQUF6REQsSUF5REMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQG1vZHVsZSBzbWFydHV0aWxzXG4gKi9cblxuZXhwb3J0IGVudW0gU1VQUE9SVEVEX0JST1dTRVJTIHtcbiAgICBJRSxcbiAgICBDSFJPTUUsXG4gICAgRklSRUZPWCxcbiAgICBFREdFLFxuICAgIFNBRkFSSSxcbiAgICBVTktOT1dOXG59XG5leHBvcnQgY2xhc3MgQnJvd3NlclNlcnZpY2Uge1xuICAgIGdldEN1cnJlbnRCcm93c2VyKCk6IFNVUFBPUlRFRF9CUk9XU0VSUyB7XG4gICAgICAgIC8qIGZvcmJpZGRlbk5hbWVTcGFjZXMgd2luZG93IGFzIGFueTpmYWxzZSAqL1xuICAgICAgICBjb25zdCBhbnlXaW5kb3cgPSB3aW5kb3cgYXMgYW55O1xuICAgICAgICBsZXQgYnJvd3NlciA9IFNVUFBPUlRFRF9CUk9XU0VSUy5VTktOT1dOO1xuICAgICAgICBpZiAodHlwZW9mIGFueVdpbmRvdy5JbnN0YWxsVHJpZ2dlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGJyb3dzZXIgPSBTVVBQT1JURURfQlJPV1NFUlMuRklSRUZPWDtcbiAgICAgICAgfSBlbHNlIGlmICgvKkBjY19vbiFAKi8gZmFsc2UgfHwgISEoZG9jdW1lbnQgYXMgYW55KS5kb2N1bWVudE1vZGUpIHtcbiAgICAgICAgICAgIGJyb3dzZXIgPSBTVVBQT1JURURfQlJPV1NFUlMuSUU7XG4gICAgICAgIH0gZWxzZSBpZiAoISFhbnlXaW5kb3cuU3R5bGVNZWRpYSkge1xuICAgICAgICAgICAgYnJvd3NlciA9IFNVUFBPUlRFRF9CUk9XU0VSUy5FREdFO1xuICAgICAgICB9IGVsc2UgaWYgKCEhYW55V2luZG93LmNocm9tZSAmJiAhIWFueVdpbmRvdy5jaHJvbWUud2Vic3RvcmUpIHtcbiAgICAgICAgICAgIGJyb3dzZXIgPSBTVVBQT1JURURfQlJPV1NFUlMuQ0hST01FO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2lzU2FmYXJpKCkpIHtcbiAgICAgICAgICAgIGJyb3dzZXIgPSBTVVBQT1JURURfQlJPV1NFUlMuU0FGQVJJO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfVxuXG4gICAgLypcblx0XHRJdCBpcyBhbHdheXMgYmV0dGVyIHRvIGRldGVjdCBhIGJyb3dzZXIgdmlhIGZlYXR1cmVzLiBVbmZvcnR1bmF0ZWx5LCBpdCdzIGJlY29taW5nIHJlYWxseSBoYXJkIHRvIGlkZW50aWZ5IFxuXHRcdFNhZmFyaSwgc2luY2UgbmV3ZXIgdmVyc2lvbnMgZG8gbm90IG1hdGNoIHRoZSBwcmV2aW91cyBvbmVzLiBUaHVzLCB3ZSBoYXZlIHRvIHJlbHkgb24gVXNlciBBZ2VudCBhcyB0aGUgbGFzdFxuXHRcdG9wdGlvbi4gXG5cdCovXG4gICAgX2lzU2FmYXJpID0gKCkgPT4ge1xuICAgICAgICAvLyByZXR1cm4gdGhpcy5nZXRDdXJyZW50QnJvd3NlcigpID09PSBTVVBQT1JURURfQlJPV1NFUlMuU0FGQVJJO1xuICAgICAgICBjb25zdCB1c2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICAgICAgY29uc3QgdmVuZG9yID0gd2luZG93Lm5hdmlnYXRvci52ZW5kb3I7XG5cbiAgICAgICAgY29uc3QgdGVzdEZlYXR1cmUgPSAvY29uc3RydWN0b3IvaS50ZXN0KFxuICAgICAgICAgICAgZnVuY3Rpb24gSFRNTEVsZW1lbnRDb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgfS50b1N0cmluZygpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHRlc3RVc2VyQWdlbnQgPVxuICAgICAgICAgICAgdmVuZG9yICYmIHZlbmRvci5pbmRleE9mKCdBcHBsZScpID4gLTEgJiYgdXNlckFnZW50ICYmICF1c2VyQWdlbnQubWF0Y2goJ0NyaU9TJyk7XG5cbiAgICAgICAgcmV0dXJuIHRlc3RGZWF0dXJlIHx8IHRlc3RVc2VyQWdlbnQ7XG4gICAgfTtcblxuICAgIGlzSUUgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRCcm93c2VyKCkgPT09IFNVUFBPUlRFRF9CUk9XU0VSUy5JRTtcbiAgICB9O1xuXG4gICAgaXNGRiA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudEJyb3dzZXIoKSA9PT0gU1VQUE9SVEVEX0JST1dTRVJTLkZJUkVGT1g7XG4gICAgfTtcblxuICAgIGlzU2FmYXJpID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50QnJvd3NlcigpID09PSBTVVBQT1JURURfQlJPV1NFUlMuU0FGQVJJO1xuICAgIH07XG5cbiAgICBnZXRCcm93c2VyTG9jYWxlKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGxvY2FsZSA9IHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2Uuc3BsaXQoJy0nKTtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS5sZW5ndGggPT09IDEgPyBsb2NhbGVbMF0gOiBsb2NhbGVbMF0gKyAnXycgKyBsb2NhbGVbMV0udG9VcHBlckNhc2UoKTtcbiAgICB9XG59XG4iXX0=