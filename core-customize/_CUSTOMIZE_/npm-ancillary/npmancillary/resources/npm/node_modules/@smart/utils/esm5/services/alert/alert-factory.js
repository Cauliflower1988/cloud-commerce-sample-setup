/**
 * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.
 * @module smartutils
 */
import * as tslib_1 from "tslib";
/**
 * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.
 * @module smartutils
 */
import { Inject, Injectable } from '@angular/core';
import { TranslateService } from '@ngx-translate/core';
import { AlertConfig, AlertService as FundamentalAlertService } from '@fundamental-ngx/core';
import { IAlertServiceType } from '../../interfaces';
import { Alert } from './alert';
import { ALERT_CONFIG_DEFAULTS_TOKEN } from './alert-token';
/**
 * @ngdoc service
 * @name @smartutils.services:AlertFactory
 *
 * @description
 * The alertFactory allows you to create an instances of type Alert.<br />
 * When possible, it is better to use {@link @smartutils.services:AlertService AlertService} to show alerts.<br />
 * This factory is useful when one of the Alert class methods is needed, like
 * hide() or isDisplayed(), or if you want to create a single instance and hide/show when necessary.
 */
var AlertFactory = /** @class */ (function () {
    function AlertFactory(fundamentalAlertService, translateService, ALERT_CONFIG_DEFAULTS) {
        this.fundamentalAlertService = fundamentalAlertService;
        this.translateService = translateService;
        this.ALERT_CONFIG_DEFAULTS = ALERT_CONFIG_DEFAULTS;
    }
    /**
     * @ngdoc method
     * @name @smartutils.services:AlertFactory#createAlert
     * @methodOf @smartutils.services:AlertFactory
     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}
     * @returns {Alert} An {@link Alert Alert} instance
     */
    AlertFactory.prototype.createAlert = function (alertConf) {
        var config = this.getAlertConfig(alertConf);
        return this.createAlertObject(config);
    };
    /**
     * @ngdoc method
     * @name @smartutils.services:AlertFactory#createInfo
     * @methodOf @smartutils.services:AlertFactory
     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}
     * @returns {Alert} An {@link Alert Alert} instance with type set to INFO
     */
    AlertFactory.prototype.createInfo = function (alertConf) {
        var config = this.getAlertConfig(alertConf, IAlertServiceType.INFO);
        return this.createAlertObject(config);
    };
    /**
     * @ngdoc method
     * @name @smartutils.services:AlertFactory#createDanger
     * @methodOf @smartutils.services:AlertFactory
     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}
     * @returns {Alert} An {@link Alert Alert} instance with type set to DANGER
     */
    AlertFactory.prototype.createDanger = function (alertConf) {
        var config = this.getAlertConfig(alertConf, IAlertServiceType.DANGER);
        return this.createAlertObject(config);
    };
    /**
     * @ngdoc method
     * @name @smartutils.services:AlertFactory#createWarning
     * @methodOf @smartutils.services:AlertFactory
     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}
     * @returns {Alert} An {@link Alert Alert} instance with type set to WARNING
     */
    AlertFactory.prototype.createWarning = function (alertConf) {
        var config = this.getAlertConfig(alertConf, IAlertServiceType.WARNING);
        return this.createAlertObject(config);
    };
    /**
     * @ngdoc method
     * @name @smartutils.services:AlertFactory#createSuccess
     * @methodOf @smartutils.services:AlertFactory
     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}
     * @returns {Alert} An {@link Alert Alert} instance with type set to SUCCESS
     */
    AlertFactory.prototype.createSuccess = function (alertConf) {
        var config = this.getAlertConfig(alertConf, IAlertServiceType.SUCCESS);
        return this.createAlertObject(config);
    };
    AlertFactory.prototype.getAlertConfig = function (strOrConf, type) {
        if (typeof strOrConf === 'string') {
            return {
                message: strOrConf,
                type: type || IAlertServiceType.INFO
            };
        }
        if (!strOrConf.type) {
            strOrConf.type = type || IAlertServiceType.INFO;
        }
        return strOrConf;
    };
    AlertFactory.prototype.createAlertObject = function (alertConf) {
        return new Alert(alertConf, this.ALERT_CONFIG_DEFAULTS, this.fundamentalAlertService, this.translateService);
    };
    AlertFactory.ctorParameters = function () { return [
        { type: FundamentalAlertService },
        { type: TranslateService },
        { type: AlertConfig, decorators: [{ type: Inject, args: [ALERT_CONFIG_DEFAULTS_TOKEN,] }] }
    ]; };
    AlertFactory = tslib_1.__decorate([
        Injectable(),
        tslib_1.__param(2, Inject(ALERT_CONFIG_DEFAULTS_TOKEN)),
        tslib_1.__metadata("design:paramtypes", [FundamentalAlertService,
            TranslateService,
            AlertConfig])
    ], AlertFactory);
    return AlertFactory;
}());
export { AlertFactory };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWxlcnQtZmFjdG9yeS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BzbWFydC91dGlscy8iLCJzb3VyY2VzIjpbInNlcnZpY2VzL2FsZXJ0L2FsZXJ0LWZhY3RvcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRztBQUNILE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25ELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxXQUFXLEVBQUUsWUFBWSxJQUFJLHVCQUF1QixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDN0YsT0FBTyxFQUFnQixpQkFBaUIsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ25FLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFDaEMsT0FBTyxFQUFFLDJCQUEyQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTVEOzs7Ozs7Ozs7R0FTRztBQUVIO0lBQ0ksc0JBQ1ksdUJBQWdELEVBQ2hELGdCQUFrQyxFQUNHLHFCQUFrQztRQUZ2RSw0QkFBdUIsR0FBdkIsdUJBQXVCLENBQXlCO1FBQ2hELHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFDRywwQkFBcUIsR0FBckIscUJBQXFCLENBQWE7SUFDaEYsQ0FBQztJQUVKOzs7Ozs7T0FNRztJQUNJLGtDQUFXLEdBQWxCLFVBQW1CLFNBQWdDO1FBQy9DLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDOUMsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNJLGlDQUFVLEdBQWpCLFVBQWtCLFNBQWdDO1FBQzlDLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxFQUFFLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RFLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSSxtQ0FBWSxHQUFuQixVQUFvQixTQUFnQztRQUNoRCxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsRUFBRSxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN4RSxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0ksb0NBQWEsR0FBcEIsVUFBcUIsU0FBZ0M7UUFDakQsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEVBQUUsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDekUsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNJLG9DQUFhLEdBQXBCLFVBQXFCLFNBQWdDO1FBQ2pELElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxFQUFFLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3pFLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFTyxxQ0FBYyxHQUF0QixVQUNJLFNBQWdDLEVBQ2hDLElBQXdCO1FBRXhCLElBQUksT0FBTyxTQUFTLEtBQUssUUFBUSxFQUFFO1lBQy9CLE9BQU87Z0JBQ0gsT0FBTyxFQUFFLFNBQVM7Z0JBQ2xCLElBQUksRUFBRSxJQUFJLElBQUksaUJBQWlCLENBQUMsSUFBSTthQUN2QyxDQUFDO1NBQ0w7UUFFRCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRTtZQUNqQixTQUFTLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7U0FDbkQ7UUFDRCxPQUFPLFNBQVMsQ0FBQztJQUNyQixDQUFDO0lBRU8sd0NBQWlCLEdBQXpCLFVBQTBCLFNBQXVCO1FBQzdDLE9BQU8sSUFBSSxLQUFLLENBQ1osU0FBUyxFQUNULElBQUksQ0FBQyxxQkFBcUIsRUFDMUIsSUFBSSxDQUFDLHVCQUF1QixFQUM1QixJQUFJLENBQUMsZ0JBQWdCLENBQ3hCLENBQUM7SUFDTixDQUFDOztnQkF6Rm9DLHVCQUF1QjtnQkFDOUIsZ0JBQWdCO2dCQUMwQixXQUFXLHVCQUE5RSxNQUFNLFNBQUMsMkJBQTJCOztJQUo5QixZQUFZO1FBRHhCLFVBQVUsRUFBRTtRQUtKLG1CQUFBLE1BQU0sQ0FBQywyQkFBMkIsQ0FBQyxDQUFBO2lEQUZILHVCQUF1QjtZQUM5QixnQkFBZ0I7WUFDMEIsV0FBVztPQUoxRSxZQUFZLENBNEZ4QjtJQUFELG1CQUFDO0NBQUEsQUE1RkQsSUE0RkM7U0E1RlksWUFBWSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbW9kdWxlIHNtYXJ0dXRpbHNcbiAqL1xuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XG5pbXBvcnQgeyBBbGVydENvbmZpZywgQWxlcnRTZXJ2aWNlIGFzIEZ1bmRhbWVudGFsQWxlcnRTZXJ2aWNlIH0gZnJvbSAnQGZ1bmRhbWVudGFsLW5neC9jb3JlJztcbmltcG9ydCB7IElBbGVydENvbmZpZywgSUFsZXJ0U2VydmljZVR5cGUgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IEFsZXJ0IH0gZnJvbSAnLi9hbGVydCc7XG5pbXBvcnQgeyBBTEVSVF9DT05GSUdfREVGQVVMVFNfVE9LRU4gfSBmcm9tICcuL2FsZXJ0LXRva2VuJztcblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgQHNtYXJ0dXRpbHMuc2VydmljZXM6QWxlcnRGYWN0b3J5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYWxlcnRGYWN0b3J5IGFsbG93cyB5b3UgdG8gY3JlYXRlIGFuIGluc3RhbmNlcyBvZiB0eXBlIEFsZXJ0LjxiciAvPlxuICogV2hlbiBwb3NzaWJsZSwgaXQgaXMgYmV0dGVyIHRvIHVzZSB7QGxpbmsgQHNtYXJ0dXRpbHMuc2VydmljZXM6QWxlcnRTZXJ2aWNlIEFsZXJ0U2VydmljZX0gdG8gc2hvdyBhbGVydHMuPGJyIC8+XG4gKiBUaGlzIGZhY3RvcnkgaXMgdXNlZnVsIHdoZW4gb25lIG9mIHRoZSBBbGVydCBjbGFzcyBtZXRob2RzIGlzIG5lZWRlZCwgbGlrZVxuICogaGlkZSgpIG9yIGlzRGlzcGxheWVkKCksIG9yIGlmIHlvdSB3YW50IHRvIGNyZWF0ZSBhIHNpbmdsZSBpbnN0YW5jZSBhbmQgaGlkZS9zaG93IHdoZW4gbmVjZXNzYXJ5LlxuICovXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQWxlcnRGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBmdW5kYW1lbnRhbEFsZXJ0U2VydmljZTogRnVuZGFtZW50YWxBbGVydFNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgdHJhbnNsYXRlU2VydmljZTogVHJhbnNsYXRlU2VydmljZSxcbiAgICAgICAgQEluamVjdChBTEVSVF9DT05GSUdfREVGQVVMVFNfVE9LRU4pIHByaXZhdGUgQUxFUlRfQ09ORklHX0RFRkFVTFRTOiBBbGVydENvbmZpZ1xuICAgICkge31cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSBAc21hcnR1dGlscy5zZXJ2aWNlczpBbGVydEZhY3RvcnkjY3JlYXRlQWxlcnRcbiAgICAgKiBAbWV0aG9kT2YgQHNtYXJ0dXRpbHMuc2VydmljZXM6QWxlcnRGYWN0b3J5XG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCBPYmplY3R9IGFsZXJ0Q29uZiBUaGUgYWxlcnQncyBjb25maWd1cmF0aW9uIHtAbGluayBAc21hcnR1dGlscy5pbnRlcmZhY2VzOklBbGVydENvbmZpZyBJQWxlcnRDb25maWd9XG4gICAgICogQHJldHVybnMge0FsZXJ0fSBBbiB7QGxpbmsgQWxlcnQgQWxlcnR9IGluc3RhbmNlXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZUFsZXJ0KGFsZXJ0Q29uZjogc3RyaW5nIHwgSUFsZXJ0Q29uZmlnKTogQWxlcnQge1xuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldEFsZXJ0Q29uZmlnKGFsZXJ0Q29uZik7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUFsZXJ0T2JqZWN0KGNvbmZpZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lIEBzbWFydHV0aWxzLnNlcnZpY2VzOkFsZXJ0RmFjdG9yeSNjcmVhdGVJbmZvXG4gICAgICogQG1ldGhvZE9mIEBzbWFydHV0aWxzLnNlcnZpY2VzOkFsZXJ0RmFjdG9yeVxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgT2JqZWN0fSBhbGVydENvbmYgVGhlIGFsZXJ0J3MgY29uZmlndXJhdGlvbiB7QGxpbmsgQHNtYXJ0dXRpbHMuaW50ZXJmYWNlczpJQWxlcnRDb25maWcgSUFsZXJ0Q29uZmlnfVxuICAgICAqIEByZXR1cm5zIHtBbGVydH0gQW4ge0BsaW5rIEFsZXJ0IEFsZXJ0fSBpbnN0YW5jZSB3aXRoIHR5cGUgc2V0IHRvIElORk9cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlSW5mbyhhbGVydENvbmY6IHN0cmluZyB8IElBbGVydENvbmZpZyk6IEFsZXJ0IHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRBbGVydENvbmZpZyhhbGVydENvbmYsIElBbGVydFNlcnZpY2VUeXBlLklORk8pO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVBbGVydE9iamVjdChjb25maWcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSBAc21hcnR1dGlscy5zZXJ2aWNlczpBbGVydEZhY3RvcnkjY3JlYXRlRGFuZ2VyXG4gICAgICogQG1ldGhvZE9mIEBzbWFydHV0aWxzLnNlcnZpY2VzOkFsZXJ0RmFjdG9yeVxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgT2JqZWN0fSBhbGVydENvbmYgVGhlIGFsZXJ0J3MgY29uZmlndXJhdGlvbiB7QGxpbmsgQHNtYXJ0dXRpbHMuaW50ZXJmYWNlczpJQWxlcnRDb25maWcgSUFsZXJ0Q29uZmlnfVxuICAgICAqIEByZXR1cm5zIHtBbGVydH0gQW4ge0BsaW5rIEFsZXJ0IEFsZXJ0fSBpbnN0YW5jZSB3aXRoIHR5cGUgc2V0IHRvIERBTkdFUlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVEYW5nZXIoYWxlcnRDb25mOiBzdHJpbmcgfCBJQWxlcnRDb25maWcpOiBBbGVydCB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0QWxlcnRDb25maWcoYWxlcnRDb25mLCBJQWxlcnRTZXJ2aWNlVHlwZS5EQU5HRVIpO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVBbGVydE9iamVjdChjb25maWcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSBAc21hcnR1dGlscy5zZXJ2aWNlczpBbGVydEZhY3RvcnkjY3JlYXRlV2FybmluZ1xuICAgICAqIEBtZXRob2RPZiBAc21hcnR1dGlscy5zZXJ2aWNlczpBbGVydEZhY3RvcnlcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8IE9iamVjdH0gYWxlcnRDb25mIFRoZSBhbGVydCdzIGNvbmZpZ3VyYXRpb24ge0BsaW5rIEBzbWFydHV0aWxzLmludGVyZmFjZXM6SUFsZXJ0Q29uZmlnIElBbGVydENvbmZpZ31cbiAgICAgKiBAcmV0dXJucyB7QWxlcnR9IEFuIHtAbGluayBBbGVydCBBbGVydH0gaW5zdGFuY2Ugd2l0aCB0eXBlIHNldCB0byBXQVJOSU5HXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZVdhcm5pbmcoYWxlcnRDb25mOiBzdHJpbmcgfCBJQWxlcnRDb25maWcpOiBBbGVydCB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0QWxlcnRDb25maWcoYWxlcnRDb25mLCBJQWxlcnRTZXJ2aWNlVHlwZS5XQVJOSU5HKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlQWxlcnRPYmplY3QoY29uZmlnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgQHNtYXJ0dXRpbHMuc2VydmljZXM6QWxlcnRGYWN0b3J5I2NyZWF0ZVN1Y2Nlc3NcbiAgICAgKiBAbWV0aG9kT2YgQHNtYXJ0dXRpbHMuc2VydmljZXM6QWxlcnRGYWN0b3J5XG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCBPYmplY3R9IGFsZXJ0Q29uZiBUaGUgYWxlcnQncyBjb25maWd1cmF0aW9uIHtAbGluayBAc21hcnR1dGlscy5pbnRlcmZhY2VzOklBbGVydENvbmZpZyBJQWxlcnRDb25maWd9XG4gICAgICogQHJldHVybnMge0FsZXJ0fSBBbiB7QGxpbmsgQWxlcnQgQWxlcnR9IGluc3RhbmNlIHdpdGggdHlwZSBzZXQgdG8gU1VDQ0VTU1xuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVTdWNjZXNzKGFsZXJ0Q29uZjogc3RyaW5nIHwgSUFsZXJ0Q29uZmlnKTogQWxlcnQge1xuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldEFsZXJ0Q29uZmlnKGFsZXJ0Q29uZiwgSUFsZXJ0U2VydmljZVR5cGUuU1VDQ0VTUyk7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUFsZXJ0T2JqZWN0KGNvbmZpZyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRBbGVydENvbmZpZyhcbiAgICAgICAgc3RyT3JDb25mOiBzdHJpbmcgfCBJQWxlcnRDb25maWcsXG4gICAgICAgIHR5cGU/OiBJQWxlcnRTZXJ2aWNlVHlwZVxuICAgICk6IElBbGVydENvbmZpZyB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RyT3JDb25mID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBzdHJPckNvbmYsXG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZSB8fCBJQWxlcnRTZXJ2aWNlVHlwZS5JTkZPXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzdHJPckNvbmYudHlwZSkge1xuICAgICAgICAgICAgc3RyT3JDb25mLnR5cGUgPSB0eXBlIHx8IElBbGVydFNlcnZpY2VUeXBlLklORk87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0ck9yQ29uZjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUFsZXJ0T2JqZWN0KGFsZXJ0Q29uZjogSUFsZXJ0Q29uZmlnKTogQWxlcnQge1xuICAgICAgICByZXR1cm4gbmV3IEFsZXJ0KFxuICAgICAgICAgICAgYWxlcnRDb25mLFxuICAgICAgICAgICAgdGhpcy5BTEVSVF9DT05GSUdfREVGQVVMVFMsXG4gICAgICAgICAgICB0aGlzLmZ1bmRhbWVudGFsQWxlcnRTZXJ2aWNlLFxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVTZXJ2aWNlXG4gICAgICAgICk7XG4gICAgfVxufVxuIl19