/**
 * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.
 * @module smartutils
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash"),require("crypto-js"),require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("@ngx-translate/core"),require("@angular/forms"),require("@fundamental-ngx/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@smart/utils",["exports","lodash","crypto-js","@angular/core","@angular/common/http","rxjs","rxjs/operators","@ngx-translate/core","@angular/forms","@fundamental-ngx/core","@angular/common"],e):e(((t=t||self).smart=t.smart||{},t.smart.utils={}),t.lodash,t.cryptoJs,t.ng.core,t.ng.common.http,t.rxjs,t.rxjs.operators,t.core$1,t.ng.forms,t.core$2,t.ng.common)}(this,(function(t,e,n,r,o,i,s,a,u,c,l){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function h(t,e){function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var f=function(){return(f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function d(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function g(t,e){return function(n,r){e(n,r,t)}}function y(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function m(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function v(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function E(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function I(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(E(arguments[e]));return t}var S,A=function(){function t(){}return t.prototype.makeCloneable=function(t){var n=this,r=e.cloneDeepWith(t,(function(t){return null==t||n.isPrimitive(r)?t:t.then?null:"function"==typeof t?null:e.isElement(t)?null:"string"!=typeof t&&t.hasOwnProperty("length")&&!t.forEach?null:t}));return null==r||this.isPrimitive(r)?r:r.hasOwnProperty("length")||r.forEach?r.map((function(t){return n.makeCloneable(t)})):Object.keys(r).reduce((function(t,e){return 0!==e.indexOf("$")&&(t[e]=n.makeCloneable(r[e])),t}),{})},t.prototype.isPrimitive=function(t){return"number"==typeof t||"string"==typeof t||"boolean"==typeof t},t}(),b=new A,C=function(){function t(){var t=this;this.sanitize=function(e){return t.isBlank(e)?e:e.split("").reverse().join("").replace(/(?:(([()])(?!\\)))/g,"$1\\").split("").reverse().join("")},this.encode=function(t){return btoa(encodeURIComponent(JSON.stringify(t)).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})))},this.replaceAll=function(t,e){var n=new RegExp(Object.keys(e).join("|"),"g");return t.replace(n,(function(t){return e[t]}))}}return t.prototype.isBlank=function(t){return null==t||"null"===t||0===t.toString().trim().length},t.prototype.regExpFactory=function(t){var e,n=new RegExp(/^[a-zA-Z\d]+$/i),r=new RegExp(/^[a-zA-Z\d\*]+$/i);return e=n.test(t)?["^","$"].join(t):r.test(t)?["^","$"].join(t.replace(/\*/g,".*")):t,new RegExp(e,"g")},t.prototype.formatHTML=function(t){return t.replace(/^\s*\n/gm,"").replace(/\>[\t\s]+\</g,"><").replace(/[\r\n\t\s]+/g," ")},t}(),T=new C,R=function(){function t(t){this.uri=t,this.wholeWordMatch="[\\w]+"}return t.prototype.build=function(){return this.uri},t.prototype.replaceParams=function(t){var n=this,r=e.cloneDeep(this);return t&&(r.uri=Object.keys(t).sort((function(t,e){return e.length-t.length})).reduce((function(e,r){return n.substituteKeyForValue(e,r,t[r])}),r.uri)),r},t.prototype.sanitize=function(){var t=e.cloneDeep(this),n=/(https?:\/\/[^\/]*)(\/.*)/.exec(t.uri);return t.uri=null==n?t.uri:n[2],t.uri=this.substituteKeyForValue(t.uri,this.wholeWordMatch,"").replace(/\/\//,"/").replace(/\/\?/,"?").replace(/\/$/,""),t.uri=null==n?t.uri:n[1]+t.uri,t},t.prototype.substituteKeyForValue=function(t,e,n){if(t=t.replace(new RegExp(":"+e+"/"),(n||"")+"/").replace(new RegExp(":"+e+"$"),""+(n||"")).replace(new RegExp(":"+e+"\\?"),(n||"")+"?").replace(new RegExp(":"+e+"&"),(n||"")+"&"),e!==this.wholeWordMatch&&e.includes("_")){var r=(t.includes("?")?t.substr(0,t.indexOf("?")):t).replace(new RegExp("\\b"+e+"\\b"),""+(n||""));t=t.includes("?")?r+t.substr(t.indexOf("?")):r}return t},t}(),_=function(){function t(){}return t.prototype.getOrigin=function(t){if(t){var e=document.createElement("a");e.setAttribute("href",t);var n=e.protocol+"//"+e.hostname+(e.port?":"+e.port:"");return e=null,n}return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},t.prototype.getURI=function(t){return t&&t.indexOf("?")>-1?t.split("?")[0]:t},t.prototype.updateUrlParameter=function(t,e,n){var r=t.indexOf("#"),o=-1===r?"":t.substr(r);t=-1===r?t:t.substr(0,r);var i=new RegExp("([?&])"+e+"=.*?(&|$)","i"),s=-1!==t.indexOf("?")?"&":"?";return(t=t.match(i)?t.replace(i,"$1"+e+"="+n+"$2"):t+s+e+"="+n)+o},t.prototype.getQueryString=function(t){var n="";if(t){var r=function(r){t.hasOwnProperty(r)&&(e.isArray(t[r])?t[r]:[t[r]]).forEach((function(t){n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t)}))};for(var o in t)r(o)}return"?"+(T.isBlank(n)?n:n.substring(1))},t.prototype.parseQuery=function(t){var e={};return t.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),(function(t,n,r,o){e[n]=o})),e},t.prototype.getAbsoluteURL=function(t,e){return new RegExp("([a-zA-Z0-9]+://)([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+)|([0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+)(:[0-9]+)?(/.*)?").exec(e)?e:t+e},t}(),w=new _,O=function(){function t(){}return t.prototype.sha1Hash=function(t){return n.SHA1(t).toString()},t.prototype.aesBase64Encrypt=function(t,e){return n.AES.encrypt(n.enc.Base64.parse(t),e).toString()},t.prototype.aesDecrypt=function(t,e){return n.AES.decrypt(t,e).toString(n.enc.Utf8)},t}(),P=function(){function t(){this.signatureArgsRegexp=/function[\s\w]*\(([\w\s\$,]*)\)[\s]*{/}return t.prototype.isEmpty=function(t){var e=t.toString().match(/\{([\s\S]*)\}/m);return!e||""===e[1].trim()||/(proxyFunction)/g.test(t.toString().replace(/\s/g,""))},t.prototype.getArguments=function(t){var e=this.signatureArgsRegexp.exec(t.toString());if(e)return e[1].replace(/\s/g,"").split(",");throw new Error("failed to retrieve arguments list of "+t)},t.prototype.hasArguments=function(t){var n=this.signatureArgsRegexp.exec(t.toString());if(n)return!e.isEmpty(n[1]);throw new Error("failed to retrieve arguments list of "+t)},t.prototype.getConstructorName=function(t){var e=t.name;if(!e){var n=/function (\$?\w+)\s*\(/.exec(t.toString());if(!n)throw new Error("[FunctionsUtils] - Cannot get name from invalid constructor.");e=n[1]}return e},t.prototype.getInstanceConstructorName=function(t){return this.getConstructorName(Object.getPrototypeOf(t).constructor)},t.prototype.extendsConstructor=function(t,e){var n=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,t);if(r)return r};return n.prototype=t.prototype,n},t.prototype.isUnitTestMode=function(){return void 0!==window.__karma__},t.prototype.convertToArray=function(t){return Object.keys(t).reduce((function(e,n){return I(e||[],[{key:n,value:t[n]}])}),[])},t}(),N=new P,U=new r.NgZone({enableLongStackTrace:!1}),L=function(){function t(t){var e=this;this.ngZone=t,this.isIframe=function(){return e.getWindow().top!==e.getWindow()},this.ngZone=this.ngZone||U}return t.prototype.getWindow=function(){return window},t.prototype.runTimeoutOutsideAngular=function(t,e){var n=this.ngZone;if(void 0!==n)return n.runOutsideAngular((function(){return setTimeout((function(){return n.run(t)}),e)}));throw new Error("this instance of WindowUtils has not been instantiated through Angular 7 DI")},t.prototype.runIntervalOutsideAngular=function(t,e){var n=this.ngZone;if(void 0===n)throw new Error("this instance of WindowUtils has not been instantiated through Angular 7 DI");return n.runOutsideAngular((function(){return setInterval((function(){return n.run(t)}),e)}))},t.SMARTEDIT_IFRAME_ID="ySmartEditFrame",t}(),F=new L,D=function(){function t(){}return t.prototype.initialize=function(t,e){return void 0===e&&(e=[]),{provide:r.APP_INITIALIZER,useFactory:function(){return t.apply(void 0,Array.prototype.slice.call(arguments)),function(t){}},deps:e,multi:!0}},t.prototype.bootstrap=function(t,e){return void 0===e&&(e=[]),{provide:r.APP_BOOTSTRAP_LISTENER,useFactory:function(){return t.apply(void 0,Array.prototype.slice.call(arguments)),function(t){}},deps:e,multi:!0}},t.prototype.provideValues=function(t){var e=t||{};return Object.keys(e).map((function(t){return{provide:t,useValue:e[t]}}))},t=d([r.Injectable()],t)}(),M=new D;(S=t.LogLevel||(t.LogLevel={}))[S.log=0]="log",S[S.debug=1]="debug",S[S.info=2]="info",S[S.warn=3]="warn",S[S.error=4]="error";var j,x=function(){function e(){this.logLevel=t.LogLevel.info}return e.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._log(t.LogLevel.log,e)},e.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._log(t.LogLevel.debug,e)},e.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._log(t.LogLevel.info,e)},e.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._log(t.LogLevel.warn,e)},e.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._log(t.LogLevel.error,e)},e.prototype.setLogLevel=function(t){this.logLevel=t},e.prototype._log=function(e,n){var r;if(e>=this.logLevel){var o=t.LogLevel[e];this._console()&&this._console()[o]&&(r=this._console())[o].apply(r,I(n))}},e.prototype._console=function(){return console},e}(),B=function(){function t(){var t=this;this.WAIT_TIMEOUT=4,this.FAILURE_TIMEOUT=2e3,this.handlePromiseRejections=function(e){var n=e.then,r=t.defaultFailureCallback;return e.then=function(t,e){var o=e||r;return n.call(this,t,o)},e},this.defaultFailureCallback=function(r){return null!=r&&"canceled"!==r&&(e.isPlainObject(r)?t.isAjaxError(r)||n.logService.error("exception caught in promise: "+JSON.stringify(r)):e.isBoolean(r)||n.logService.error(r)),n.logService.error("defaultFailureCallback:",r),Promise.reject(r)}}var n;return n=t,t.prototype.toPromise=function(t,e){return function(){try{return Promise.resolve(t.apply(e,Array.prototype.slice.call(arguments)))}catch(t){return n.logService.error("execution of a method that was turned into a promise failed"),n.logService.error(t),Promise.reject(t)}}},t.prototype.promise=function(t){return this.handlePromiseRejections(new Promise(t))},t.prototype.defer=function(){var t,e;return{promise:this.promise((function(n,r){t=n,e=r})),resolve:function(e){t(e)},reject:function(t){e(t)}}},t.prototype.sleep=function(t){return m(this,void 0,void 0,(function(){return v(this,(function(e){return[2,new Promise((function(e){return setTimeout(e,t)}))]}))}))},t.prototype.isAjaxError=function(t){return t.hasOwnProperty("headers")},t.prototype.waitOnCondition=function(t,e,n,r){var o=this;void 0===r&&(r=0),setTimeout((function(){if(t())e();else{if(!(r<o.FAILURE_TIMEOUT))throw new Error("PromiseUtils: "+n);o.waitOnCondition(t,e,n,r+o.WAIT_TIMEOUT)}}),this.WAIT_TIMEOUT)},t.prototype.resolveToCallbackWhenCondition=function(t,e,n){return m(this,void 0,void 0,(function(){var r=this;return v(this,(function(o){return[2,new Promise((function(o){r.waitOnCondition(t,(function(){return o(e())}),n||"condition for promise resolution was never met")}))]}))}))},t.logService=new x,t=n=d([r.Injectable()],t)}(),k=new B,H=function(){function t(){}return t.prototype.areAllTruthy=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){var e=arguments;return t.every((function(t){return t&&t.apply(t,e)}))}},t.prototype.isAnyTruthy=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){var e=arguments;return t.some((function(t){return t&&t.apply(t,e)}))}},t}(),V=new H,G=function(){function t(){}return t.prototype.isGET=function(t){return"GET"===t.method},t.prototype.isRequestOfAccept=function(t,e){return!!t.headers&&!!t.headers.get("Accept")&&(t.headers.get("Accept")||"").includes(e)},t.prototype.isResponseOfContentType=function(t,e){return!!t.headers&&!!t.headers.get("Content-type")&&0===(t.headers.get("Content-type")||"").indexOf(e)},t.prototype.isHTMLRequest=function(t,e){return this.isGET(t)&&(this.isRequestOfAccept(t,"text/html")||/.+\.html$/.test(t.url)||/.+\.html\?/.test(t.url))},t.prototype.isJSONRequest=function(t,e){return this.isGET(t)&&(e&&this.isResponseOfContentType(e,"json")||/.+\.json$/.test(t.url))},t.prototype.isJSRequest=function(t){return this.isGET(t)&&/.+\.js$/.test(t.url)},t.prototype.isCRUDRequest=function(t,e){return!this.isHTMLRequest(t,e)&&!this.isJSONRequest(t,e)&&!this.isJSRequest(t)},t.prototype.transformHttpParams=function(t,e){return new o.HttpParams({fromObject:JSON.parse(T.replaceAll(JSON.stringify(this.copyHttpParamsOrHeaders(t)),e))})},t.prototype.copyHttpParamsOrHeaders=function(t){var e={};return t.keys().forEach((function(n){var r=t.getAll(n);null!==r&&(e[n]=r.length>1?r:r[0])})),e},t.prototype.buildHttpResponse=function(t,n){var r=Promise.resolve(n);return i.from(r).pipe(s.switchMap((function(n){var r=n[0],s=n[1],a=t.clone({body:s});return e.merge(a,{status:r}),200<=r&&r<300?new i.Observable((function(t){t.next(new o.HttpResponse(a))})):i.throwError(new o.HttpErrorResponse(e.merge(a,{error:s})))})))},t}(),W=new G,K=function(){function t(){this.disabled=!1,this.value=null}return t.prototype.onChange=function(t){},t.prototype.onTouched=function(){},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.writeValue=function(t){this.value=t},t}();!function(t){t.Class="ClassAnnotation",t.Method="MethodAnnotation"}(j||(j={}));var q=function(){function t(){this.INJECTABLE_NAME_KEY="getInjectableName",this.ORIGINAL_CONSTRUCTOR_KEY="originalConstructor",this.getClassAnnotations=e.memoize(this.getClassAnnotationsLogic),this.getMethodAnnotations=e.memoize(this.getMethodAnnotationsLogic,(function(t,e){return JSON.stringify(t.prototype)+e})),this.functionsUtils=new P,this.annotationFactoryMap={}}return t.prototype.getClassAnnotation=function(t,e){var n=this.getClassAnnotations(t),r=e.annotationName;return n?r in n?n[r]:void 0:null},t.prototype.getMethodAnnotation=function(t,e,n){var r=this.getMethodAnnotations(t,e),o=n.annotationName;return r?o in r?r[o]:void 0:null},t.prototype.hasClassAnnotation=function(t,e){var n=this.getClassAnnotations(t);return e.annotationName in n},t.prototype.hasMethodAnnotation=function(t,e,n){var r=this.getMethodAnnotations(t,e);return n.annotationName in r},t.prototype.setClassAnnotationFactory=function(t,e){return this.annotationFactoryMap[t]=e,e},t.prototype.getClassAnnotationFactory=function(t){var n=this,r=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return function(o){var i=n.functionsUtils.extendsConstructor(o,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var s=n.annotationFactoryMap[t];if(!s)throw new Error("annotation '"+t+"' is used on '"+o.name+"' but its ClassAnnotationFactory may not have been added to the dependency injection");var a=s(r)(this,o,e);if(a)return a}));e.merge(i,o),i.__annotations__=o.__annotations__,i.__parameters__=o.__parameters__,i.__prop__metadata__=o.__prop__metadata__,Reflect.getMetadataKeys(o).forEach((function(t){Reflect.defineMetadata(t,Reflect.getMetadata(t,o),i)}));var s=n.getOriginalConstructor(o);return Reflect.defineMetadata(n.ORIGINAL_CONSTRUCTOR_KEY,s,i),Reflect.defineMetadata(j.Class+":"+t,r,s),i}};return r.annotationName=t,r},t.prototype.setMethodAnnotationFactory=function(t,e){return this.annotationFactoryMap[t]=e,e},t.prototype.getMethodAnnotationFactory=function(t){var e=this,n=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return function(r,o,i){var s=i.value;i.value=function(){var r=e.annotationFactoryMap[t];if(r)return s?r(n)(this,o,s.bind(this),arguments):void 0;throw new Error("annotation '"+t+"' is used but its MethodAnnotationFactory may not have been added to the dependency injection")},Reflect.defineMetadata(j.Method+":"+t,n,r,o)}};return n.annotationName=t,n},t.prototype.getOriginalConstructor=function(t){return Reflect.getMetadata(this.ORIGINAL_CONSTRUCTOR_KEY,t)||t},t.prototype.getClassAnnotationsLogic=function(t){var e=this.getOriginalConstructor(t),n={};return Reflect.getMetadataKeys(e).filter((function(t){return t.toString().startsWith(j.Class)})).map((function(t){n[t.split(":")[1]]=Reflect.getMetadata(t,e)})),n},t.prototype.getMethodAnnotationsLogic=function(t,e){var n={};return Reflect.getMetadataKeys(t.prototype,e).filter((function(t){return t.toString().startsWith(j.Method)})).map((function(r){n[r.split(":")[1]]=Reflect.getMetadata(r,t.prototype,e)})),n},t}(),z=new q,Y=z.getClassAnnotationFactory("CacheConfig");var $=z.getMethodAnnotationFactory("Cached");var X=function(t){return z.getMethodAnnotationFactory("InvalidateCache")(t)};var Z,J,Q,tt=function(t){this.name=t},et=function(){function t(t,e,n){this.windowUtils=t,this.promiseUtils=e,this.logService=n,this.cachedItemsRegistry=[],this.startBackgroundMonitoringJob()}var e;return e=t,t.prototype.addItem=function(t,e,n){-1===this.getItemIndex(t)?this.cachedItemsRegistry.push({item:t,cacheTiming:e,refresh:n,completed:!1,processing:!1,defer:this.promiseUtils.defer()}):this.logService.warn("CacheEngine - item already exist for id: "+t.id)},t.prototype.getItemById=function(t){var e=this.cachedItemsRegistry.find((function(e){return e.item.id===t}));return e?e.item:null},t.prototype.handle=function(t){var e=this.cachedItemsRegistry[this.getItemIndex(t)];return e.completed&&!this.hasExpired(t)?e.defer.resolve(t.cache):e.processing||(e.processing=!0,this.refreshCache(e)),e.defer.promise},t.prototype.evict=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){t.cachedItemsRegistry.filter((function(t){return t.item.evictionTags.indexOf(e)>-1})).forEach((function(e){return t.cachedItemsRegistry.splice(t.getItemIndex(e.item),1)}))}))},t.prototype.startBackgroundMonitoringJob=function(){var t=this;this.windowUtils.runIntervalOutsideAngular((function(){return Promise.all(t.cachedItemsRegistry.filter((function(e){return t.needRefresh(e.item)})).map((function(e){return t.refreshCache(e)})))}),e.BACKGROUND_REFRESH_INTERVAL)},t.prototype.refreshCache=function(t){var e=this;return t.refresh().then((function(e){t.cacheTiming.setAge(t.item),t.item.cache=e,t.item.timestamp=(new Date).getTime(),t.completed=!0,t.processing=!1,t.defer.resolve(e)}),(function(n){e.logService.debug("CacheEngine - unable to refresh cache for id: "+t.item.id,n),delete t.item.cache,t.defer.resolve(n)}))},t.prototype.hasExpired=function(t){return t.timestamp+t.expirationAge<=(new Date).getTime()},t.prototype.needRefresh=function(t){return t.timestamp+t.refreshAge<=(new Date).getTime()},t.prototype.getItemIndex=function(t){return this.cachedItemsRegistry.findIndex((function(e){return e.item.id===t.id}))},t.BACKGROUND_REFRESH_INTERVAL=1e4,t.ctorParameters=function(){return[{type:L},{type:B},{type:x}]},t=e=d([r.Injectable(),y("design:paramtypes",[L,B,x])],t)}(),nt=function(){function t(t,e){this.expirationAge=t,this.refreshAge=e}return t.prototype.setAge=function(t){return f({},t,{expirationAge:this.expirationAge,refreshAge:this.refreshAge})},t}(),rt="@smart/utils_EVENTSERVICE",ot=((Z={})["^(?!/smarteditwebservices/v1/i18n/.*$).*$"]="/authorizationserver/oauth/token",Z),it=((J={})["/authorizationserver/oauth/token"]={client_id:"smartedit"},J),st={AUTHORIZATION_SUCCESS:"AUTHORIZATION_SUCCESS",USER_HAS_CHANGED:"USER_HAS_CHANGED",LOGOUT:"SE_LOGOUT_EVENT",CLEAR_PERSPECTIVE_FEATURES:"CLEAR_PERSPECTIVE_FEATURES",EXPERIENCE_UPDATE:"experienceUpdate",PERMISSION_CACHE_CLEANED:"PERMISSION_CACHE_CLEANED",PAGE_CHANGE:"PAGE_CHANGE",PAGE_CREATED:"PAGE_CREATED_EVENT",PAGE_UPDATED:"PAGE_UPDATED_EVENT",PAGE_DELETED:"PAGE_DELETED_EVENT",PAGE_SELECTED:"PAGE_SELECTED_EVENT",PAGE_RESTORED:"PAGE_RESTORED_EVENT",REAUTH_STARTED:"REAUTH_STARTED"},at=new r.InjectionToken("LANGUAGE_SERVICE_CONSTANTS"),ut=new r.InjectionToken("LANGUAGE_SERVICE"),ct=function(){function t(t,e,n,r,o){this.logService=t,this.stringUtils=e,this.functionsUtils=n,this.eventService=r,this.cacheEngine=o,this.predicatesRegistry=[],this.eventListeners=[],this.defaultCacheTiming=new nt(864e5,432e5)}return t.prototype.register=function(t,e){return this.predicatesRegistry.unshift({test:t,cacheTiming:e}),this},t.prototype.handle=function(t,e,n,r,o,i){var s,a=this.functionsUtils.getInstanceConstructorName(t),u=window.btoa(a+e)+this.stringUtils.encode(r),c=this.cacheEngine.getItemById(u);if(c)s=c;else{var l=c||{id:u,timestamp:(new Date).getTime(),evictionTags:this.collectEventNamesFromTags(i),cache:null},p=this.findCacheTimingByCacheActions(o);if(!p)throw new Error("CacheService::handle - No predicate match.");s=p.setAge(l),this.cacheEngine.addItem(s,p,n.bind.apply(n,I([void 0],Array.prototype.slice.call(r)))),this.listenForEvictionByTags(i)}return this.cacheEngine.handle(s)},t.prototype.evict=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=this.collectEventNamesFromTags(n);(t=this.cacheEngine).evict.apply(t,I(o)),o.forEach((function(t){return e.eventService.publish(t)}))},t.prototype.listenForEvictionByTags=function(t){var e=this;this.collectEventNamesFromTags(t).filter((function(t){return-1===e.eventListeners.indexOf(t)})).forEach((function(t){e.logService.debug("registering event listener "+t),e.eventListeners.push(t),e.eventService.subscribe(t,(function(n,r){return e.logService.debug("cleaning cache on event "+t),e.cacheEngine.evict(t),Promise.resolve({})}))}))},t.prototype.collectEventNamesFromTags=function(t){var n=this;return t&&t.length?e.union.apply(e,I(t.map((function(t){return n.collectEventNamesFromTag(t)})))):[]},t.prototype.collectEventNamesFromTag=function(t){var n=this;return e.union.apply(e,I([[t.event]],t.relatedTags?t.relatedTags.map((function(t){return n.collectEventNamesFromTag(t)})):[]))},t.prototype.findCacheTimingByCacheActions=function(t){var e=this.predicatesRegistry.find((function(e){return e.test(t)}));return e?e.cacheTiming:this.defaultCacheTiming},t.ctorParameters=function(){return[{type:x},{type:C},{type:P},{type:void 0,decorators:[{type:r.Inject,args:[rt]}]},{type:et}]},t=d([r.Injectable(),g(3,r.Inject(rt)),y("design:paramtypes",[x,C,P,Object,et])],t)}(),lt=function(t){this.event=t.event,this.relatedTags=t.relatedTags},pt=new tt("RarelyChangingContent"),ht=function(){function t(t,e){this.pattern=t,this.matchingPayload=e}return t.prototype.respond=function(t){return this.mock=t,this},t.prototype.passThrough=function(){},t}(),ft=function(){function t(){this.matchLatestDefinition=!1,this.backends={GET:[],POST:[],PUT:[],DELETE:[]}}return t.prototype.whenGET=function(t){return this._whenMethod("GET",t)},t.prototype.whenPOST=function(t,e){return this._whenMethod("POST",t,e)},t.prototype.whenPUT=function(t,e){return this._whenMethod("PUT",t,e)},t.prototype.whenDELETE=function(t){return this._whenMethod("DELETE",t)},t.prototype.when=function(t,e,n){return this._whenMethod(t,e,n)},t.prototype.whenAsync=function(t,e,n){return this._whenMethod(t,e,n)},t.prototype.matchLatestDefinitionEnabled=function(t){this.matchLatestDefinition=t},t.prototype.findMatchingMock=function(t){var e=this,n=(this.matchLatestDefinition?this.backends[t.method].slice().reverse():this.backends[t.method]).find((function(n){if("string"==typeof n.pattern)return t.urlWithParams.endsWith(n.pattern)&&e.matchingPayloadRestriction(n,t);var r=n.pattern.test(t.urlWithParams)&&e.matchingPayloadRestriction(n,t);return n.pattern.lastIndex=0,r}));return n?n.mock:void 0},t.prototype._whenMethod=function(t,e,n){var r=new ht(e,n);return this.backends[t].push(r),r},t.prototype.matchingPayloadRestriction=function(t,n){return!t.matchingPayload||e.isEqual(t.matchingPayload,n.body)},t=d([r.Injectable()],t)}(),dt=function(){function t(t,e,n,r){this.httpBackendService=t,this.httpUtils=e,this.urlUtils=n,this.logService=r}return t.prototype.intercept=function(t,n){var r,o=this.httpBackendService.findMatchingMock(t);if(!o)return n.handle(t);if("object"==typeof o)r=[200,e.cloneDeep(o)];else{var i=null;"GET"===t.method?i=decodeURIComponent(this.urlUtils.getQueryString(this.httpUtils.copyHttpParamsOrHeaders(t.params))):"application/x-www-form-urlencoded"===t.headers.get("Content-Type")?i=t.body:"POST"!==t.method&&"PUT"!==t.method||(i=JSON.stringify(t.body));var a=this.httpUtils.copyHttpParamsOrHeaders(t.headers);r=o(t.method,decodeURIComponent(t.urlWithParams),i,a)}return this.logService.debug("backend "+status+" response for "+t.url+": "),this.httpUtils.buildHttpResponse(t,r).pipe(s.take(1))},t.ctorParameters=function(){return[{type:ft},{type:G},{type:_},{type:x}]},t=d([r.Injectable(),y("design:paramtypes",[ft,G,_,x])],t)}(),gt=function(){function t(t,e){this.httpUtils=t,this.logService=e,this.flawWindow=window,this.flawWindow.allRequests=0,this.flawWindow.flawedRequests=0,this.flawWindow.allResponses=0,this.flawWindow.flawedResponses=0}var e;return e=t,t.registerRequestFlaw=function(t){this.requestMutations.push(t)},t.registerResponseFlaw=function(t){this.responseMutations.push(t)},t.prototype.intercept=function(t,n){var r=this;if(0!==e.PROBABILITY&&this.httpUtils.isCRUDRequest(t)&&!this._isGET(t)){if(this.flawWindow.allRequests++,this._activateWithProbability(e.PROBABILITY)){this.flawWindow.flawedRequests++;var i=e.requestMutations.find((function(e){return e.test(t)}));i&&(this.logService.error('FLAWED REQUEST-"'+t.url),n.handle(i.mutate(t)))}return n.handle(t).pipe(s.map((function(n){if(n instanceof o.HttpResponse&&r._activateWithProbability(e.PROBABILITY)){r.flawWindow.flawedResponses++;var i=e.responseMutations.find((function(e){return e.test(t)}));if(i&&n instanceof o.HttpResponse)return r.logService.error('FLAWED RESPONSE-"'+t.url),i.mutate(n)}return n})))}return n.handle(t)},t.prototype._isGET=function(t){return"GET"===t.method},t.prototype._activateWithProbability=function(t){return Math.random()>=1-t},t.requestMutations=[],t.responseMutations=[],t.PROBABILITY=0,t.ctorParameters=function(){return[{type:G},{type:x}]},t=e=d([r.Injectable(),y("design:paramtypes",[G,x])],t)}(),yt=function(){function t(){}return t=d([r.NgModule({imports:[],providers:[{provide:o.HTTP_INTERCEPTORS,useClass:gt,multi:!0},{provide:r.APP_INITIALIZER,useFactory:function(){return gt.registerRequestFlaw({test:function(t){return/sites\/[\w-]+\//.test(t.url)},mutate:function(t){return t.clone({url:t.url.replace(/sites\/([\w-]+)\//,"sites/"+Math.random()+"/")})}}),function(t){}},multi:!0}]})],t)}();(Q=t.IAlertServiceType||(t.IAlertServiceType={})).INFO="information",Q.SUCCESS="success",Q.WARNING="warning",Q.DANGER="error";var mt,vt,Et,It,St=function(){function t(){}return t.prototype.showAlert=function(t){},t.prototype.showInfo=function(t){},t.prototype.showDanger=function(t){},t.prototype.showWarning=function(t){},t.prototype.showSuccess=function(t){},t}(),At=function(){function t(){this.reauthInProgress={},this.initialized=!1}return t.prototype.authenticate=function(t){return Promise.resolve()},t.prototype.logout=function(){return Promise.resolve()},t.prototype.isReAuthInProgress=function(t){return Promise.resolve(!1)},t.prototype.setReAuthInProgress=function(t){return Promise.resolve()},t.prototype.filterEntryPoints=function(t){return Promise.resolve([])},t.prototype.isAuthEntryPoint=function(t){return Promise.resolve(!1)},t.prototype.isAuthenticated=function(t){return Promise.resolve(!1)},t}(),bt=function(){function t(){}return t.prototype.isInitialized=function(){return Promise.resolve(!1)},t.prototype.storeAuthToken=function(t,e){return Promise.resolve()},t.prototype.getAuthToken=function(t){return Promise.resolve(void 0)},t.prototype.removeAuthToken=function(t){return Promise.resolve()},t.prototype.removeAllAuthTokens=function(){return Promise.resolve()},t.prototype.getValueFromLocalStorage=function(t,e){return Promise.resolve()},t.prototype.setValueInLocalStorage=function(t,e,n){return Promise.resolve()},t.prototype.setItem=function(t,e){return Promise.resolve()},t.prototype.getItem=function(t){return Promise.resolve()},t}();(mt=t.FundamentalModalButtonStyle||(t.FundamentalModalButtonStyle={})).Default="light",mt.Primary="emphasized",(vt=t.FundamentalModalButtonAction||(t.FundamentalModalButtonAction={})).Close="close",vt.Dismiss="dismiss",vt.None="none",(Et=t.ModalButtonActions||(t.ModalButtonActions={})).None="none",Et.Close="close",Et.Dismiss="dismiss",(It=t.ModalButtonStyles||(t.ModalButtonStyles={})).Default="default",It.Primary="primary";var Ct=function(){function t(){}return t.prototype.get=function(t){return Promise.resolve({})},t.prototype.set=function(t,e){return Promise.resolve()},t.prototype.update=function(t,e){return Promise.resolve()},t.prototype.remove=function(t){return Promise.resolve({})},t.prototype.containsKey=function(t){return Promise.resolve(!0)},t}(),Tt=function(){function t(){}return t.prototype.load=function(){return Promise.resolve({key:""})},t.prototype.get=function(t){return Promise.resolve("")},t.prototype.getBoolean=function(t){return Promise.resolve(!0)},t}(),Rt=function(){function t(){}return t.prototype.dismissAll=function(){},t.prototype.open=function(t){return{}},t}(),_t=function(){function t(){}return t.prototype.getCurrentUsername=function(){return Promise.resolve("")},t.prototype.getCurrentUserDisplayName=function(){return Promise.resolve("")},t.prototype.getCurrentUser=function(){return Promise.resolve({})},t.prototype.hasUserChanged=function(){return Promise.resolve(!0)},t.prototype.resetCurrentUserData=function(){return Promise.resolve()},t.prototype.setCurrentUsername=function(){return Promise.resolve()},t}(),wt=function(){},Ot=[500,502,503,504],Pt=[429],Nt=[408];function Ut(t,n){return n&&e.includes(Ot,n.status)}function Lt(t,n){return n&&e.includes(Pt,n.status)}function Ft(t,n){return n&&e.includes(Nt,n.status)}function Dt(t,e){return e&&V.isAnyTruthy(Ut,Lt,Ft)(t,e)}function Mt(t,e){return e&&0===e.status}var jt=["PUT","POST","DELETE","PATCH"],xt=["GET","OPTIONS","HEAD"];function Bt(t,n){return e.includes(xt,t.method)}var kt={MAX_BACKOFF:64e3,MAX_ATTEMPT:5,MIN_BACKOFF:0},Ht=function(){function t(){}return t.prototype.calculateNextDelay=function(t,e,n){e=e||kt.MAX_BACKOFF;var r=(n=n||kt.MIN_BACKOFF)+Math.random();return Math.min(1e3*Math.pow(2,t)+r,e)},t.prototype.canRetry=function(t,e){return t<=(e=e||kt.MAX_ATTEMPT)},t}(),Vt={MAX_ATTEMPT:5,MAX_BACKOFF:32e3,MIN_BACKOFF:0,RETRY_INTERVAL:500},Gt=function(){function t(){}return t.prototype.calculateNextDelay=function(t,e,n,r){n=n||Vt.MAX_BACKOFF,e=e||Vt.RETRY_INTERVAL;var o=(r=r||Vt.MIN_BACKOFF)+Math.random();return Math.min(t*e+o,n)},t.prototype.canRetry=function(t,e){return t<=(e=e||Vt.MAX_ATTEMPT)},t}(),Wt={MAX_ATTEMPT:5,MIN_BACKOFF:0,RETRY_INTERVAL:500},Kt=function(){function t(){}return t.prototype.calculateNextDelay=function(t,e){return(t=t||Wt.RETRY_INTERVAL)+((e=e||Wt.MIN_BACKOFF)+Math.random())},t.prototype.canRetry=function(t,e){return t<=(e||Wt.MAX_ATTEMPT)},t}(),qt=new r.InjectionToken("DefaultRetryStrategy");function zt(t){return function(){function e(){this.firstFastRetry=!0,this.attemptCount=0}return e.prototype.canRetry=function(){return t.canRetry(this.attemptCount)},e.prototype.calculateNextDelay=function(){return t.calculateNextDelay()},e}()}var Yt=new r.InjectionToken("ExponentialRetryStrategy");function $t(t){return function(){function e(){this.firstFastRetry=!0,this.attemptCount=0}return e.prototype.canRetry=function(){return t.canRetry(this.attemptCount)},e.prototype.calculateNextDelay=function(){return t.calculateNextDelay(this.attemptCount)},e}()}var Xt=new r.InjectionToken("LinearRetryStrategy");function Zt(t){return function(){function e(){this.firstFastRetry=!0,this.attemptCount=0}return e.prototype.canRetry=function(){return t.canRetry(this.attemptCount)},e.prototype.calculateNextDelay=function(){return t.calculateNextDelay(this.attemptCount)},e}()}var Jt=function(){function t(){this.store=[]}return t.prototype.register=function(t,n){if("string"!=typeof t||e.isEmpty(t))throw new Error("operationContextService.register error: url is invalid");if("string"!=typeof n||e.isEmpty(n))throw new Error("operationContextService.register error: operationContext is invalid");if(-1!==this.store.findIndex((function(e){return!0===e.urlRegex.test(t)&&e.operationContext===n})))return this;var r=new RegExp(t.replace(/\/:[^\/]*/g,"/.*"));return this.store.push({urlRegex:r,operationContext:n}),this},t.prototype.findOperationContext=function(t){var e=this.store.findIndex((function(e){return!0===e.urlRegex.test(t)}));return~e?this.store[e].operationContext:null},t=d([r.Injectable(),y("design:paramtypes",[])],t)}(),Qt=z.getClassAnnotationFactory("OperationContextRegistered");var te=function(){function t(t,e,n,r,o,i,s,a,u){this.httpClient=t,this.translate=e,this.operationContextService=n,this.alertService=r,this.OPERATION_CONTEXT=u,this.TRANSLATE_NAMESPACE="se.gracefuldegradation.",this.predicatesRegistry=[],this.requestToRetryTegistry={},this.register(Mt,s).register(o.isAnyTruthy(Lt,Ft),i).register(o.areAllTruthy(Bt,Dt),i).register(Ut,s)}return t.prototype.predicate=function(t,e){return null!==this.findMatchingStrategy(t,e)},t.prototype.responseError=function(t,e){var n=this.retrieveRetryStrategy(t);if(!n){var r=this.findMatchingStrategy(t,e);if(!r)return Promise.reject(e);this.alertService.showWarning({message:this.translate.instant(this.TRANSLATE_NAMESPACE+"stillworking")}),(n=new r).attemptCount=0,this.storeRetryStrategy(t,n)}return this.handleRetry(n,t,e)},t.prototype.register=function(t,e){if("function"!=typeof t)throw new Error("retryInterceptor.register error: predicate must be a function");if("function"!=typeof e)throw new Error("retryInterceptor.register error: retryStrategy must be a function");return this.predicatesRegistry.unshift({predicate:t,retryStrategy:e}),this},t.prototype.findMatchingStrategy=function(t,e){var n=this.operationContextService.findOperationContext(t.url)||this.OPERATION_CONTEXT.INTERACTIVE,r=this.predicatesRegistry.find((function(r){return r.predicate(t,e,n)}));return r?r.retryStrategy:null},t.prototype.handleRetry=function(t,e,n){var r=this;if(t.attemptCount++,t.canRetry()){var o=t.firstFastRetry?0:t.calculateNextDelay();return t.firstFastRetry=!1,new Promise((function(t,n){setTimeout((function(){r.httpClient.request(e).toPromise().then((function(n){return r.removeRetryStrategy(e),t(n)}),(function(t){return n(t)}))}),o)}))}return this.alertService.showDanger({message:this.translate.instant(this.TRANSLATE_NAMESPACE+"somethingwrong")}),Promise.reject(n)},t.prototype.storeRetryStrategy=function(t,e){this.requestToRetryTegistry[this.getRequestUUID(t)]=e},t.prototype.removeRetryStrategy=function(t){delete this.requestToRetryTegistry[this.getRequestUUID(t)]},t.prototype.retrieveRetryStrategy=function(t){return this.requestToRetryTegistry[this.getRequestUUID(t)]},t.prototype.getRequestUUID=function(t){return t.clone().toString()},t.ctorParameters=function(){return[{type:o.HttpClient},{type:a.TranslateService},{type:Jt},{type:St},{type:H},{type:void 0,decorators:[{type:r.Inject,args:[qt]}]},{type:void 0,decorators:[{type:r.Inject,args:[Yt]}]},{type:void 0,decorators:[{type:r.Inject,args:[Xt]}]},{type:void 0,decorators:[{type:r.Inject,args:["@smart/utils_OPERATION_CONTEXT"]}]}]},t=d([r.Injectable(),g(5,r.Inject(qt)),g(6,r.Inject(Yt)),g(7,r.Inject(Xt)),g(8,r.Inject("@smart/utils_OPERATION_CONTEXT")),y("design:paramtypes",[o.HttpClient,a.TranslateService,Jt,St,H,Object,Object,Object,Object])],t)}(),ee=function(){function t(t){this.alertService=t}return t.prototype.predicate=function(t,e){return 403===e.status},t.prototype.responseError=function(t,e){var n=this;return e.error&&e.error.errors&&e.error.errors.filter((function(t){return"TypePermissionError"===t.type})).forEach((function(t){n.alertService.showDanger({message:t.message,duration:1e4})})),Promise.reject(e)},t.ctorParameters=function(){return[{type:St}]},t=d([r.Injectable(),y("design:paramtypes",[St])],t)}(),ne={},re=function(){function t(t,e,n,r,o,i){this.httpClient=t,this.authenticationService=e,this.promiseUtils=n,this.httpUtils=r,this.eventService=i,this.promisesToResolve={},this.rejectedUrls=[/authenticate/],this.rejectedUrls.push(o)}return t.prototype.predicate=function(t,e){return 401===e.status&&(!t.url||this.httpUtils.isCRUDRequest(t,e)&&this.isUrlNotRejected(t.url))},t.prototype.responseError=function(t,e){var n=this,r=this.promiseUtils.defer(),o=r.promise.then((function(){return n.httpClient.request(t).toPromise()}));return this.authenticationService.isAuthEntryPoint(t.url).then((function(i){i?r.reject(e):n.authenticationService.filterEntryPoints(t.url).then((function(e){var i=e[0];n.promisesToResolve[i]=n.promisesToResolve[i]||[],n.promisesToResolve[i].push({requestIdentifier:t.url,deferred:r}),n.httpUtils.isGET(t)&&(ne[t.url]=o),n.authenticationService.isReAuthInProgress(i).then((function(e){e||n.authenticationService.setReAuthInProgress(i).then((function(){var e=n.promisesToResolve;n.eventService.publish("REAUTH_STARTED"),n.authenticationService.authenticate(t.url).then(function(){e[this].forEach((function(t){delete ne[t.requestIdentifier],t.deferred.resolve()})),e[this]=[]}.bind(i),function(){e[this].forEach((function(t){delete ne[t.requestIdentifier],t.deferred.reject()})),e[this]=[]}.bind(i))}))}))}))})),o},t.prototype.isUrlNotRejected=function(t){return!this.rejectedUrls.some((function(e){return"string"==typeof e?0===t.indexOf(e):e.test(t)}))},t.ctorParameters=function(){return[{type:o.HttpClient},{type:At},{type:B},{type:G},{type:String,decorators:[{type:r.Inject,args:["@smart/utils_WHO_AM_I_RESOURCE_URI"]}]},{type:void 0,decorators:[{type:r.Inject,args:[rt]}]}]},t=d([r.Injectable(),g(4,r.Inject("@smart/utils_WHO_AM_I_RESOURCE_URI")),g(5,r.Inject(rt)),y("design:paramtypes",[o.HttpClient,At,B,G,String,Object])],t)}(),oe=function(){function t(t,e,n,r){this.authenticationService=t,this.injector=e,this.httpUtils=n,this.I18N_RESOURCE_URI=r}return t.prototype.intercept=function(t,e){var n=this;return!t.url.includes(this.I18N_RESOURCE_URI)&&this.httpUtils.isCRUDRequest(t)?this.httpUtils.isGET(t)&&ne[t.url]?new i.Observable((function(e){ne[t.url].then((function(t){e.next(new o.HttpResponse({status:200,body:t}))}))})):i.from(this.authenticationService.filterEntryPoints(t.url)).pipe(s.switchMap((function(r){return r&&r.length?i.from(n.injector.get(bt).getAuthToken(r[0])).pipe(s.switchMap((function(n){if(n){var r=t.clone({headers:t.headers.set("Authorization",n.token_type+" "+n.access_token)});return e.handle(r)}return e.handle(t)}))):e.handle(t)}))):e.handle(t)},t.ctorParameters=function(){return[{type:At},{type:r.Injector},{type:G},{type:String,decorators:[{type:r.Inject,args:["@smart/utils_I18N_RESOURCE_URI"]}]}]},t=d([r.Injectable(),g(3,r.Inject("@smart/utils_I18N_RESOURCE_URI")),y("design:paramtypes",[At,r.Injector,G,String])],t)}(),ie=function(){function t(t,e){this.injector=t,this.promiseUtils=e,this._errorInterceptors=[]}return t.prototype.addInterceptors=function(t){var e=this;t.forEach((function(t){e.addInterceptor(t)}))},t.prototype.addInterceptor=function(t){var e,n=this;return e=t.predicate||t.responseError?t:this.injector.get(t),this._validateInterceptor(e),this._errorInterceptors.unshift(e),function(){n._errorInterceptors.splice(n._errorInterceptors.indexOf(e),1)}},t.prototype.responseError=function(t,n){var r=this._errorInterceptors.filter((function(e){return!0===e.predicate(t,n)})),o=this.promiseUtils.defer();return r.length?this._iterateErrorInterceptors(t.clone(),e.cloneDeep(n),r,o):o.reject(n),i.from(o.promise)},t.prototype._iterateErrorInterceptors=function(t,e,n,r,o){if(void 0===o&&(o=0),o===n.length)r.reject(e);else{var i=this._iterateErrorInterceptors.bind(this);Promise.resolve(n[o].responseError(t,e)).then((function(t){r.resolve(t)}),(function(e){i(t,e,n,r,++o)}))}},t.prototype._validateInterceptor=function(t){if(!t.predicate||"function"!=typeof t.predicate)throw new Error("httpErrorInterceptorService.addInterceptor.error.interceptor.has.no.predicate");if(!t.responseError||"function"!=typeof t.responseError)throw new Error("httpErrorInterceptorService.addInterceptor.error.interceptor.has.no.responseError")},t.ctorParameters=function(){return[{type:r.Injector},{type:B}]},t=d([r.Injectable(),y("design:paramtypes",[r.Injector,B])],t)}(),se=function(){function t(t,e){this.httpErrorInterceptorService=t,this.httpUtils=e}return t.prototype.intercept=function(t,e){var n=this;return e.handle(t).pipe(s.catchError((function(e,r){return n.httpUtils.isHTMLRequest(t,e)?i.throwError(e):n.httpErrorInterceptorService.responseError(t,e)})))},t.ctorParameters=function(){return[{type:ie},{type:G}]},t=d([r.Injectable(),y("design:paramtypes",[ie,G])],t)}(),ae=zt,ue=$t,ce=Zt,le=function(){function t(){}var e;return e=t,t.forRoot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return{ngModule:e,providers:I(t,[{provide:o.HTTP_INTERCEPTORS,useClass:oe,multi:!0},{provide:o.HTTP_INTERCEPTORS,useClass:se,multi:!0},{provide:o.HTTP_INTERCEPTORS,useClass:dt,multi:!0},{provide:r.APP_BOOTSTRAP_LISTENER,useFactory:function(e){return e.addInterceptors(t),function(t){}},deps:[ie],multi:!0}])}},t=e=d([r.NgModule({imports:[yt],providers:[Kt,Gt,Ht,{provide:qt,useFactory:ae,deps:[Kt]},{provide:Yt,useFactory:ue,deps:[Ht]},{provide:Xt,useFactory:ce,deps:[Kt]},ie,ft]})],t)}();(t.StatusText||(t.StatusText={})).UNKNOW_ERROR="Unknown Error";var pe=function(){function t(){}return t.transform=function(t){var e=t;if(!(e&&e.body&&e.body.pagination))return e;var n=Object.keys(e.body).find((function(t){return"pagination"!==t&&Array.isArray(e.body[t])}));return n?e.clone({body:f({},e.body,{results:e.body[n]})}):e},t}(),he=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t).pipe(s.map(pe.transform))},t=d([r.Injectable()],t)}(),fe=function(){function t(t,e,n){var r=this;this.httpClient=t,this.url=e,this.identifierName=n,this.DEFAULT_HEADERS={"x-requested-with":"Angular"},this.DEFAULT_OPTIONS={headers:{}},this.metadataActivated=!1,this.getMethodForSingleInstance=function(t){switch(t){case"getById":return function(t,e){return void 0===e&&(e=r.DEFAULT_OPTIONS),r.getById(t,e)};case"get":return function(t,e){return void 0===e&&(e=r.DEFAULT_OPTIONS),r.get(t,e)};case"update":return function(t,e){return void 0===e&&(e=r.DEFAULT_OPTIONS),r.update(t,e)};case"save":return function(t,e){return void 0===e&&(e=r.DEFAULT_OPTIONS),r.save(t,e)};case"patch":return function(t,e){return void 0===e&&(e=r.DEFAULT_OPTIONS),r.patch(t,e)};case"remove":return function(t,e){return void 0===e&&(e=r.DEFAULT_OPTIONS),r.remove(t,e)}}},this.getMethodForArray=function(t){switch(t){case"query":return function(t,e){return void 0===e&&(e=r.DEFAULT_OPTIONS),r.query(t,e)}}}}return t.prototype.getById=function(t,e){return void 0===e&&(e=this.DEFAULT_OPTIONS),this.addHeadersToBody(this.httpClient.get(this.url+"/"+t,{headers:this.buildRequestHeaders(e.headers||{}),observe:"response"})).toPromise()},t.prototype.get=function(t,e){void 0===e&&(e=this.DEFAULT_OPTIONS);var n=this.convertToTypeMapOfString(t);return this.addHeadersToBody(this.httpClient.get(this.interpolateParamsInURL(this.url,n),{params:this.formatQueryString(this.determineTrueQueryStringParams(this.url,t)),headers:this.buildRequestHeaders(e.headers||{}),observe:"response"})).toPromise()},t.prototype.query=function(t,e){void 0===e&&(e=this.DEFAULT_OPTIONS);var n=t?this.convertToTypeMapOfString(t):t;return this.addHeadersToBody(this.httpClient.get(this.interpolateParamsInURL(this.url,n),{params:this.formatQueryString(this.determineTrueQueryStringParams(this.url,t)),headers:this.buildRequestHeaders(e.headers||{}),observe:"response"})).pipe(s.map((function(t){return t||[]}))).toPromise()},t.prototype.page=function(t,e){return void 0===e&&(e=this.DEFAULT_OPTIONS),this.addHeadersToBody(this.httpClient.get(this.interpolateParamsInURL(this.url,t),{params:this.formatQueryString(this.determineTrueQueryStringParams(this.url,t)),headers:this.buildRequestHeaders(e.headers||{}),observe:"response"})).pipe(s.map((function(t){return t}))).toPromise()},t.prototype.update=function(t,e){var n=this;return void 0===e&&(e=this.DEFAULT_OPTIONS),this.performIdentifierCheck(t).then((function(){return n.buildUrlWithIdentifier(t)})).then((function(r){return n.httpClient.put(r,t,{headers:n.buildRequestHeaders(e.headers||{})}).toPromise()}))},t.prototype.save=function(t,e){return void 0===e&&(e=this.DEFAULT_OPTIONS),this.httpClient.post(this.interpolateParamsInURL(this.url,t),t,{headers:this.buildRequestHeaders(e.headers||{})}).toPromise()},t.prototype.patch=function(t,e){var n=this;return void 0===e&&(e=this.DEFAULT_OPTIONS),this.performIdentifierCheck(t).then((function(){return n.buildUrlWithIdentifier(t)})).then((function(r){return n.httpClient.patch(r,t,{headers:n.buildRequestHeaders(e.headers||{})}).toPromise()}))},t.prototype.remove=function(t,e){var n=this;return void 0===e&&(e=this.DEFAULT_OPTIONS),this.performIdentifierCheck(t).then((function(){return n.buildUrlWithIdentifier(t)})).then((function(t){return n.httpClient.delete(t,{headers:n.buildRequestHeaders(e.headers||{})}).toPromise()}))},t.prototype.activateMetadata=function(){this.metadataActivated=!0},t.prototype.convertToTypeMapOfString=function(t){return e.mapValues(t,(function(t){return String(t)}))},t.prototype.formatQueryString=function(t){return this.sortByKeys(t)},t.prototype.addHeadersToBody=function(t){var e=this;return t.pipe(s.map((function(t){var n=t.body;return e.metadataActivated&&n&&(n.headers=t.headers),n})))},t.prototype.interpolateParamsInURL=function(t,e){return e&&"string"!=typeof e?new R(t).replaceParams(e).sanitize().build():t},t.prototype.determineTrueQueryStringParams=function(t,n){return"object"==typeof n?Object.keys(n).reduce((function(r,o){return new RegExp(":"+o+"/").test(t)||new RegExp(":"+o+"$").test(t)||new RegExp(":"+o+"&").test(t)||e.isNil(n[o])||(r[o]=n[o]),r}),{}):{}},t.prototype.sortByKeys=function(t){var n=e.sortBy(e.keys(t),(function(t){return t}));return e.zipObject(n,e.map(n,(function(e){return t[e]})))},t.prototype.performIdentifierCheck=function(t){var e="string"==typeof t?t:t[this.identifierName];return e?Promise.resolve():Promise.reject("no data was found under the "+e+" field of object "+JSON.stringify(t)+", it is necessary for update and remove operations")},t.prototype.buildUrlWithIdentifier=function(t){var e="string"==typeof t?t:t[this.identifierName],n=this.interpolateParamsInURL(""+this.url,t);return n=n.includes("?")||this.url.includes(":"+this.identifierName)?n:n+"/"+e,Promise.resolve(n)},t.prototype.buildRequestHeaders=function(t){return new o.HttpHeaders(f({},this.DEFAULT_HEADERS,t))},t}(),de=function(){function t(t){this.httpClient=t,this.map=new Map,this.basePath=null,this.DOMAIN=null,this.IDENTIFIER="identifier"}var n;return n=t,t.setGlobalBasePath=function(t){n.globalBasePath?n.logService.warn("The value of a global base path was already set. Update is not possible, the value remained unchanged!"):n.globalBasePath=t},t.getGlobalBasePath=function(){return n.globalBasePath?n.globalBasePath:""},t.prototype.setDomain=function(t){this.DOMAIN=t},t.prototype.setBasePath=function(t){this.basePath=t},t.prototype.get=function(t,n){if(void 0===n&&(n=this.IDENTIFIER),this.map.has(t+n))return this.map.get(t+n);if(!/^https?\:\/\//.test(t)){var r=this.getNewBasePath(),o=e.isEmpty(r)?t:r+(/^\//.test(t)?t:"/"+t);t=this.shouldAppendDomain(t)?this.DOMAIN+"/"+t:o}var i=new fe(this.httpClient,t,n);return this.map.set(t+n,i),i},t.prototype.shouldAppendDomain=function(t){return!!this.DOMAIN&&!/^\//.test(t)},t.prototype.getNewBasePath=function(){return this.basePath?this.basePath:n.globalBasePath},t.globalBasePath=null,t.logService=new x,t.ctorParameters=function(){return[{type:o.HttpClient}]},t=n=d([r.Injectable(),y("design:paramtypes",[o.HttpClient])],t)}(),ge=function(){function t(t,e,n){this.innerRestService=t.get(e,n),this.innerRestService.activateMetadata&&this.innerRestService.activateMetadata()}return t.prototype.getById=function(t,e){return this.innerRestService.getById(t,e)},t.prototype.get=function(t,e){return this.innerRestService.get(t,e)},t.prototype.query=function(t,e){return this.innerRestService.query(t,e)},t.prototype.page=function(t,e){return this.innerRestService.page(t,e)},t.prototype.update=function(t,e){return this.innerRestService.update(t,e)},t.prototype.patch=function(t,e){return this.innerRestService.patch(t,e)},t.prototype.remove=function(t,e){return this.innerRestService.remove(t,e)},t.prototype.save=function(t,e){return this.innerRestService.save(t,e)},d([ye,$(),y("design:type",Function),y("design:paramtypes",[String,Object]),y("design:returntype",Promise)],t.prototype,"getById",null),d([ye,$(),y("design:type",Function),y("design:paramtypes",[Object,Object]),y("design:returntype",Promise)],t.prototype,"get",null),d([ye,$(),y("design:type",Function),y("design:paramtypes",[Object,Object]),y("design:returntype",Promise)],t.prototype,"query",null),d([ye,$(),y("design:type",Function),y("design:paramtypes",[Object,Object]),y("design:returntype",Promise)],t.prototype,"page",null),d([ye,X(),y("design:type",Function),y("design:paramtypes",[Object,Object]),y("design:returntype",Promise)],t.prototype,"update",null),d([ye,X(),y("design:type",Function),y("design:paramtypes",[Object,Object]),y("design:returntype",Promise)],t.prototype,"patch",null),d([X(),y("design:type",Function),y("design:paramtypes",[Object,Object]),y("design:returntype",Promise)],t.prototype,"remove",null),d([ye,y("design:type",Function),y("design:paramtypes",[Object,Object]),y("design:returntype",Promise)],t.prototype,"save",null),t}();function ye(t,e,n){var r=n.value;r&&(n.value=function(){return r.apply(this,Array.prototype.slice.call(arguments)).then((function(t){return delete t.headers,t}))})}var me;!function(t){t.SSO_CLIENT_ID="SSO_CLIENT_ID",t.SSO_AUTHENTICATION_ENTRY_POINT="SSO_AUTHENTICATION_ENTRY_POINT",t.SSO_LOGOUT_ENTRY_POINT="SSO_LOGOUT_ENTRY_POINT",t.SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT="SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT"}(me||(me={}));var ve,Ee=function(){function t(t,e,n,r){this.windowUtils=t,this.promiseUtils=e,this.httpClient=n,this.injector=r,this.logoutIframeId="logoutIframe",this.deferred=null,this.listenForAuthTokenBeingSentBack()}var e;return e=t,t.prototype.launchSSODialog=function(){this.deferred=this.promiseUtils.defer();var t=this.injector.get(me.SSO_AUTHENTICATION_ENTRY_POINT)+this.getSSOContextPath();return this.window.open(t,"SSODIALOG_WINDOW","toolbar=no,scrollbars=no,resizable=no,top=200,left=200,width=1000,height=800"),this.deferred.promise},t.prototype.completeDialog=function(){var t=this;return new Promise((function(e,n){t.httpClient.post(t.injector.get(me.SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT),{client_id:t.injector.get(me.SSO_CLIENT_ID)}).subscribe((function(n){t.window.opener.postMessage({eventId:"ssoAuthenticate",authToken:n},t.document.location.origin),t.window.close(),e()}),(function(e){var r={error:e.error,status:e.status};t.window.opener.postMessage({eventId:"ssoAuthenticateError",error:r},t.document.location.origin),t.window.close(),n()}))}))},t.prototype.isSSODialog=function(){return"SSODIALOG_WINDOW"===this.window.name&&new RegExp("[?&]sso").test(location.search)},t.prototype.isAutoSSOMain=function(){return e.lastAuthenticatedWithSSO||"SSODIALOG_WINDOW"!==this.window.name&&new RegExp("[?&]sso").test(location.search)},t.prototype.logout=function(){var t=this.logoutIframe;t||((t=this.document.createElement("iframe")).id=this.logoutIframeId,t.style.display="none",this.document.body.appendChild(t)),t.src=this.injector.get(me.SSO_LOGOUT_ENTRY_POINT),e.lastAuthenticatedWithSSO=!1,this.document.location.href=this.document.location.href.replace(this.getSSOContextPath(),this.document.location.pathname)},t.prototype.getSSOContextPath=function(){return this.document.location.pathname+"?sso"},t.prototype.listenForAuthTokenBeingSentBack=function(){var t=this;this.window.addEventListener("message",(function(n){n.origin===document.location.origin&&(t.logoutIframe&&t.logoutIframe.remove(),"ssoAuthenticate"===n.data.eventId?(e.lastAuthenticatedWithSSO=!0,t.deferred&&t.deferred.resolve(n.data.authToken)):"ssoAuthenticateError"===n.data.eventId&&t.deferred&&t.deferred.reject(n.data.error))}),!1)},Object.defineProperty(t.prototype,"window",{get:function(){return this.windowUtils.getWindow()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"document",{get:function(){return this.window.document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logoutIframe",{get:function(){return this.document.querySelector("iframe#"+this.logoutIframeId)},enumerable:!0,configurable:!0}),t.lastAuthenticatedWithSSO=!1,t.ctorParameters=function(){return[{type:L},{type:B},{type:o.HttpClient},{type:r.Injector}]},t=e=d([r.Injectable(),y("design:paramtypes",[L,B,o.HttpClient,r.Injector])],t)}(),Ie=function(){};(ve=t.SUPPORTED_BROWSERS||(t.SUPPORTED_BROWSERS={}))[ve.IE=0]="IE",ve[ve.CHROME=1]="CHROME",ve[ve.FIREFOX=2]="FIREFOX",ve[ve.EDGE=3]="EDGE",ve[ve.SAFARI=4]="SAFARI",ve[ve.UNKNOWN=5]="UNKNOWN";var Se,Ae=function(){function e(){var e=this;this._isSafari=function(){var t=window.navigator.userAgent,e=window.navigator.vendor,n=/constructor/i.test(function(){}.toString()),r=e&&e.indexOf("Apple")>-1&&t&&!t.match("CriOS");return n||r},this.isIE=function(){return e.getCurrentBrowser()===t.SUPPORTED_BROWSERS.IE},this.isFF=function(){return e.getCurrentBrowser()===t.SUPPORTED_BROWSERS.FIREFOX},this.isSafari=function(){return e.getCurrentBrowser()===t.SUPPORTED_BROWSERS.SAFARI}}return e.prototype.getCurrentBrowser=function(){var e=window,n=t.SUPPORTED_BROWSERS.UNKNOWN;return void 0!==e.InstallTrigger?n=t.SUPPORTED_BROWSERS.FIREFOX:document.documentMode?n=t.SUPPORTED_BROWSERS.IE:e.StyleMedia?n=t.SUPPORTED_BROWSERS.EDGE:e.chrome&&e.chrome.webstore?n=t.SUPPORTED_BROWSERS.CHROME:this._isSafari()&&(n=t.SUPPORTED_BROWSERS.SAFARI),n},e.prototype.getBrowserLocale=function(){var t=window.navigator.language.split("-");return 1===t.length?t[0]:t[0]+"_"+t[1].toUpperCase()},e}(),be=function(){function t(){this._fingerprint=T.encode(this.getUserAgent()+this.getPlugins()+this.hasJava()+this.hasFlash()+this.hasLocalStorage()+this.hasSessionStorage()+this.hasCookie()+this.getTimeZone()+this.getLanguage()+this.getSystemLanguage()+this.hasCanvas())}return t.prototype.getFingerprint=function(){return this._fingerprint},t.prototype.getUserAgent=function(){return navigator.userAgent},t.prototype.getPlugins=function(){for(var t=[],e=0,n=navigator.plugins.length;e<n;e++)navigator.plugins[e]&&t.push(navigator.plugins[e].name);return t.join(",")},t.prototype.hasJava=function(){return navigator.javaEnabled()},t.prototype.hasFlash=function(){return!!navigator.plugins.namedItem("Shockwave Flash")},t.prototype.hasLocalStorage=function(){try{var t="test-has-ls";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}},t.prototype.hasSessionStorage=function(){try{var t="test-has-ss";return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch(t){return!1}},t.prototype.hasCookie=function(){return navigator.cookieEnabled},t.prototype.getTimeZone=function(){return String(String(new Date).split("(")[1]).split(")")[0]},t.prototype.getLanguage=function(){return navigator.language},t.prototype.getSystemLanguage=function(){return window.navigator.language},t.prototype.hasCanvas=function(){try{var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}catch(t){return!1}},t}(),Ce=function(){function t(t){this.translationsFetchService=t}return t.prototype.getTranslation=function(t){return i.from(this.translationsFetchService.get(t))},t.ctorParameters=function(){return[{type:Ie}]},t=d([r.Injectable(),y("design:paramtypes",[Ie])],t)}(),Te=function(){function t(){}var e;return e=t,t.forChild=function(){return a.TranslateModule.forChild({isolate:!1,loader:{provide:a.TranslateLoader,useClass:Ce}})},t.forRoot=function(t){return{ngModule:e,providers:[{provide:Ie,useClass:t},{provide:r.APP_INITIALIZER,useFactory:function(t,e,n){return e.getValueFromLocalStorage("SELECTED_LANGUAGE",!1).then((function(t){return t?t.isoCode:n.getBrowserLocale()}),(function(){return n.getBrowserLocale()})).then((function(e){t.setDefaultLang(e),t.use(e)})),function(t){}},deps:[a.TranslateService,bt,Ae],multi:!0}]}},t=e=d([r.NgModule({imports:[a.TranslateModule.forRoot({isolate:!1,loader:{provide:a.TranslateLoader,useClass:Ce}})],exports:[a.TranslateModule]})],t)}(),Re=new r.InjectionToken("LoginDialogResourceProvider"),_e=function(){function t(t,e,n,r,i,s,a,c,l){var p=this;this.modalRef=t,this.logService=e,this.httpClient=n,this.sessionService=r,this.storageService=i,this.stringUtils=s,this.urlUtils=a,this.ssoAuthenticationHelper=c,this.resource=l,this.hostClass=!0,this.data=null,this.authURIKey="",this.authURI="",this.isFullScreen=!1,this.ssoEnabled=!1,this.form=new u.FormGroup({username:new u.FormControl("",u.Validators.required),password:new u.FormControl("",u.Validators.required)}),this.signinWithSSO=function(){return p.form.setErrors(null),p.ssoAuthenticationHelper.launchSSODialog().then((function(t){return p.storeAccessToken(t)}),(function(t){return p.APIAuthenticationFailureReportFactory(t)})).then((function(t){return p.acceptUser(t)}))},this.sendCredentials=function(t){return p.httpClient.request("POST",p.authURI,{headers:(new o.HttpHeaders).set("Content-Type","application/x-www-form-urlencoded"),body:p.urlUtils.getQueryString(t).replace("?",""),observe:"response"}).toPromise()}}return t.prototype.ngOnInit=function(){this.data=this.modalRef.data||{},this.authURI=this.data.authURI,this.isFullScreen=this.data.isFullScreen,this.ssoEnabled=this.data.ssoEnabled&&this.isMainEndPoint(),this.storageService.removeAuthToken(this.authURI),this.authURIKey=btoa(this.authURI).replace(/=/g,""),this.ssoAuthenticationHelper.isAutoSSOMain()&&this.signinWithSSO()},t.prototype.signinWithCredentials=function(){var t=this;if(this.form.setErrors(null),this.hasRequiredCredentialsError())return this.form.setErrors({credentialsRequiredError:"se.logindialogform.username.and.password.required"}),Promise.reject();var e=f({},this.data.clientCredentials||{},{username:this.form.get("username").value,password:this.form.get("password").value,grant_type:"password"});return this.sendCredentials(e).then((function(e){return t.storeAccessToken(e)}),(function(e){return t.APIAuthenticationFailureReportFactory(e)})).then((function(e){return t.acceptUser(e)}))},t.prototype.isMainEndPoint=function(){return"/authorizationserver/oauth/token"===this.authURI},t.prototype.storeAccessToken=function(t){var e=t instanceof o.HttpResponse?t.body:t;return this.storageService.storeAuthToken(this.authURI,e),this.logService.debug("API Authentication Success: "+this.authURI),this.isMainEndPoint()?this.sessionService.hasUserChanged():Promise.resolve(!1)},t.prototype.APIAuthenticationFailureReportFactory=function(t){return this.logService.debug("API Authentication Failure: "+this.authURI+" status: "+t.status),this.form.setErrors({asyncValidationError:t.error&&this.stringUtils.sanitize(t.error.error_description)||"se.logindialogform.oauth.error.default"}),Promise.reject(t)},t.prototype.acceptUser=function(t){return this.modalRef.close({userHasChanged:t}),this.isMainEndPoint()&&this.sessionService.setCurrentUsername(),Promise.resolve({userHasChanged:t})},t.prototype.hasRequiredCredentialsError=function(){var t=this.form.get("username"),e=this.form.get("password");return t.errors&&t.errors.required||e.errors&&e.errors.required},t.ctorParameters=function(){return[{type:c.ModalRef},{type:x},{type:o.HttpClient},{type:_t},{type:bt},{type:C},{type:_},{type:Ee},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[Re]}]}]},d([r.HostBinding("class.su-login-dialog"),y("design:type",Boolean)],t.prototype,"hostClass",void 0),t=d([r.Component({selector:"su-login-dialog",template:'<div class="su-login">\n    <div class="su-login--wrapper">\n        <div\n            class="su-login--logo-wrapper"\n            [ngClass]="{ \'su-login--logo-wrapper_full\': !isFullScreen }"\n        >\n            <img *ngIf="resource?.topLogoURL" [src]="resource?.topLogoURL" class="su-login--logo" />\n            <span class="su-login--logo-text" translate="se.application.name"> </span>\n        </div>\n        <form\n            autocomplete="off"\n            novalidate\n            [formGroup]="form"\n            (submit)="signinWithCredentials()"\n            class="su-login--form"\n        >\n            <div class="su-login--auth-message" *ngIf="isFullScreen">\n                <div translate="se.logindialogform.reauth.message1"></div>\n                <div translate="se.logindialogform.reauth.message2"></div>\n            </div>\n\n            \x3c!--Validation Errors--\x3e\n            <div *ngIf="form.errors" class="su-login--form-group">\n                <fd-alert\n                    type="error"\n                    class="su-login--alert-error"\n                    id="invalidError"\n                    [dismissible]="false"\n                >\n                    <ng-container *ngIf="form.errors?.credentialsRequiredError">\n                        {{ form.errors.credentialsRequiredError | translate }}\n                    </ng-container>\n\n                    <ng-container *ngIf="form.errors?.asyncValidationError">\n                        {{ form.errors.asyncValidationError | translate }}\n                    </ng-container>\n                </fd-alert>\n            </div>\n\n            <div class="su-login--form-group">\n                <input\n                    fd-form-control\n                    type="text"\n                    id="username_{{ authURIKey }}"\n                    name="username"\n                    formControlName="username"\n                    placeholder="{{ \'se.authentication.form.input.username\' | translate }}"\n                    autofocus\n                    autocomplete="username"\n                />\n            </div>\n            <div class="su-login--form-group">\n                <input\n                    fd-form-control\n                    type="password"\n                    id="password_{{ authURIKey }}"\n                    name="password"\n                    placeholder="{{ \'se.authentication.form.input.password\' | translate }}"\n                    formControlName="password"\n                    autocomplete="current-password"\n                    required\n                />\n            </div>\n            <div class="su-login--form-group">\n                <su-language-dropdown class="su-login-language"></su-language-dropdown>\n            </div>\n            <button\n                fd-button\n                options="emphasized"\n                class="su-login--btn"\n                id="submit_{{ authURIKey }}"\n                name="submit"\n                type="submit"\n                translate="se.authentication.form.button.submit"\n            ></button>\n        </form>\n        <form\n            *ngIf="ssoEnabled"\n            class="su-login--form-sso"\n            name="loginDialogFormSSO"\n            novalidate\n            (submit)="signinWithSSO()"\n        >\n            <button\n                fd-button\n                options="emphasized"\n                class="fd-button--emphasized su-login--btn"\n                id="submitSSO_{{ authURIKey }}"\n                name="submitSSO"\n                type="submit"\n                translate="se.authentication.form.button.submit.sso"\n            ></button>\n        </form>\n    </div>\n</div>\n<img\n    *ngIf="resource?.bottomLogoURL"\n    [src]="resource?.bottomLogoURL"\n    class="su-login--logo__best-run"\n/>\n',styles:['.su-login{width:500px;min-height:440px;box-shadow:0 1px 4px 0 rgba(0,0,0,.1);background-color:#fff;border-radius:4px;border:1px solid rgba(0,0,0,.2);padding:20px;margin:0 auto}.su-login--wrapper{padding:40px 100px;width:100%}.su-login--form-group{margin-bottom:20px}.su-login--form-sso{margin-top:20px}.su-login--logo-wrapper{display:-webkit-box;display:flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center}.su-login--logo-wrapper.su-login--logo-wrapper_full{padding-bottom:45px}.su-login--logo{height:44px}.su-login--logo-text{font-family:"72",web,"Open Sans",sans-serif;font-size:1.7142857143rem;line-height:1.3333333333;padding-left:16px;color:#32363a;font-weight:700}.su-login--logo__best-run{position:absolute;bottom:30px;left:30px}.su-login--btn{font-size:1rem;line-height:1.4285714286;font-weight:400;width:100%}.su-login--auth-message{padding-top:20px;padding-bottom:20px;font-size:1rem;line-height:1.4285714286;font-weight:400}.su-login--alert-error{margin-bottom:0;box-shadow:none}']}),g(8,r.Optional()),g(8,r.Inject(Re)),y("design:paramtypes",[c.ModalRef,x,o.HttpClient,_t,bt,C,_,Ee,Object])],t)}(),we=function(){function t(){}return t.transform=function(t,e){return{id:e,label:t.name,value:t}},t}(),Oe=function(){function t(t,e,n,r,o,i,s,a){this.logService=t,this.translateService=e,this.promiseUtils=n,this.eventService=r,this.browserService=o,this.storageService=i,this.injector=s,this.languageServiceConstants=a}return t.prototype.getBrowserLanguageIsoCode=function(){return window.navigator.language.split("-")[0]},t.prototype.getBrowserLocale=function(){return this.browserService.getBrowserLocale()},t.prototype.getResolveLocale=function(){return this._getDefaultLanguage()},t.prototype.getResolveLocaleIsoCode=function(){var t=this;return this.getResolveLocale().then((function(e){return t.convertBCP47TagToJavaTag(e).split("_")[0]}))},t.prototype.getToolingLanguages=function(){var t=this;return this.i18nLanguageRestService.get({}).then((function(t){return t.languages})).catch((function(e){return t.logService.error("LanguageService.getToolingLanguages() - Error loading tooling languages"),Promise.reject(e)}))},t.prototype.setSelectedToolingLanguage=function(t){this.storageService.setValueInLocalStorage("SELECTED_LANGUAGE",t,!1),this.translateService.use(t.isoCode),this.setApplicationTitle(),this.eventService.publish("SWITCH_LANGUAGE_EVENT",{isoCode:t.isoCode})},t.prototype.registerSwitchLanguage=function(){var t=this;this.eventService.subscribe("SWITCH_LANGUAGE_EVENT",(function(e,n){t.translateService.currentLang!==n.isoCode&&t.translateService.use(n.isoCode)}))},t.prototype.convertBCP47TagToJavaTag=function(t){return t?t.replace(/-/g,"_"):t},t.prototype.convertJavaTagToBCP47Tag=function(t){return t?t.replace(/_/g,"-"):t},t.prototype._getDefaultLanguage=function(){var t=this;return this.storageService.getValueFromLocalStorage("SELECTED_LANGUAGE",!1).then((function(e){return e?e.isoCode:t.browserService.getBrowserLocale()}),(function(){return t.browserService.getBrowserLocale()}))},t.prototype.setApplicationTitle=function(){this.translateService.get("se.application.name").subscribe((function(t){document.title=t}))},Object.defineProperty(t.prototype,"i18nLanguageRestService",{get:function(){return this.injector.get(de).get(this.languageServiceConstants.I18N_LANGUAGES_RESOURCE_URI)},enumerable:!0,configurable:!0}),t.ctorParameters=function(){return[{type:x},{type:a.TranslateService},{type:B},{type:void 0,decorators:[{type:r.Inject,args:[rt]}]},{type:Ae},{type:bt},{type:r.Injector},{type:void 0,decorators:[{type:r.Inject,args:[at]}]}]},d([$({actions:[pt]}),y("design:type",Function),y("design:paramtypes",[]),y("design:returntype",Promise)],t.prototype,"getToolingLanguages",null),t=d([r.Injectable(),g(3,r.Inject(rt)),g(7,r.Inject(at)),y("design:paramtypes",[x,a.TranslateService,B,Object,Ae,bt,r.Injector,Object])],t)}();!function(t){t.Default="default",t.None="none"}(Se||(Se={}));var Pe,Ne=function(){function t(){}return t.findSelectLanguageWithIsoCodePredicate=function(t){return function(e){return e.value.isoCode===t}},t.findLanguageWithIsoCode=function(t,e){return e.find((function(e){return e.isoCode===t}))},t.order=function(t,e,n){switch(void 0===n&&(n={strategy:Se.Default}),n.strategy){case Se.Default:var r=e.filter((function(e){return e.isoCode!==t.isoCode})).sort((function(t,e){return t.isoCode.localeCompare(e.isoCode)}));return I([t],r);case Se.None:return e}},t}(),Ue=function(){function t(t,e){this.languageService=t,this.eventService=e,this.languageSortStrategy=Se.Default,this.selectedLanguage=null,this.items=[],this.initialLanguage=null,this.languages=[],this.unRegisterEventService=null}return t.prototype.ngOnInit=function(){var t=this;Promise.all([this.languageService.getResolveLocale(),this.languageService.getToolingLanguages()]).then((function(e){var n=E(e,2),r=n[0],o=n[1];t.items=o.map(we.transform),t.languages=o,t.setSelectedLanguage(r),t.setInitialLanguage(r)})),this.unRegisterEventService=this.eventService.subscribe("SWITCH_LANGUAGE_EVENT",(function(){return t.handleLanguageChange()}))},t.prototype.ngOnDestroy=function(){this.unRegisterEventService()},t.prototype.onSelectedLanguage=function(t){this.languageService.setSelectedToolingLanguage(t.value)},t.prototype.setInitialLanguage=function(t){this.initialLanguage=this.items.find(Ne.findSelectLanguageWithIsoCodePredicate(t))||this.items.find(Ne.findSelectLanguageWithIsoCodePredicate("en"))},t.prototype.setSelectedLanguage=function(t){var e=this;if(this.selectedLanguage=Ne.findLanguageWithIsoCode(t,this.languages),this.selectedLanguage){var n=Ne.order(this.selectedLanguage,this.languages,{strategy:this.languageSortStrategy});this.items=n.map(we.transform)}else this.languageService.getResolveLocaleIsoCode().then((function(t){e.selectedLanguage=Ne.findLanguageWithIsoCode(t,e.languages);var n=Ne.order(e.selectedLanguage,e.languages,{strategy:e.languageSortStrategy});e.items=n.map(we.transform)}))},t.prototype.handleLanguageChange=function(){var t=this;this.languageService.getResolveLocale().then((function(e){t.setSelectedLanguage(e)}))},d([r.Input(),y("design:type",String)],t.prototype,"languageSortStrategy",void 0),t}(),Le=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.eventService=n,r}return h(e,t),e.ctorParameters=function(){return[{type:Oe,decorators:[{type:r.Inject,args:[ut]}]},{type:void 0,decorators:[{type:r.Inject,args:[rt]}]}]},e=d([r.Component({selector:"su-language-dropdown",template:'\n        <su-select\n            class="su-language-selector"\n            [items]="items"\n            [initialValue]="initialLanguage"\n            (onItemSelected)="onSelectedLanguage($event)"\n        >\n        </su-select>\n    '}),g(0,r.Inject(ut)),g(1,r.Inject(rt)),y("design:paramtypes",[Oe,Object])],e)}(Ue),Fe=function(){function t(){}return t.transform=function(t,e){return{}},t}(),De=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e.initialValue=null,e.placeholder="",e.isKeyboardControlEnabled=!0,e.hasCustomTrigger=!1,e.onItemSelected=new r.EventEmitter,e}var n;return h(e,t),n=e,e.prototype.selectItem=function(t){var e=this.items.find((function(e){return e.id===t}));this.setValue(e),this.popover.close(),this.onItemSelected.emit(e)},e.prototype.ngOnChanges=function(t){t.initialValue&&t.initialValue.currentValue&&!this.value&&this.setInitialValue(t.initialValue.currentValue)},e.prototype.setInitialValue=function(t){"number"==typeof t?this.setValueById(t):this.setValue(t)},e.prototype.setValue=function(t){this.writeValue(t),this.onChange(t)},e.prototype.setValueById=function(t){this.setValue(this.items.find((function(e){return e.id===t})))},d([r.Input(),y("design:type",Array)],e.prototype,"items",void 0),d([r.Input(),y("design:type",Object)],e.prototype,"initialValue",void 0),d([r.Input(),y("design:type",String)],e.prototype,"placeholder",void 0),d([r.Input(),y("design:type",Boolean)],e.prototype,"isKeyboardControlEnabled",void 0),d([r.Input(),y("design:type",Boolean)],e.prototype,"hasCustomTrigger",void 0),d([r.Output(),y("design:type",r.EventEmitter)],e.prototype,"onItemSelected",void 0),d([r.ViewChild("popover",{static:!1}),y("design:type",Object)],e.prototype,"popover",void 0),e=n=d([r.Component({selector:"su-select",encapsulation:r.ViewEncapsulation.None,providers:[{provide:u.NG_VALUE_ACCESSOR,useExisting:r.forwardRef((function(){return n})),multi:!0}],template:'\n        <fd-popover #popover fillControlMode="equal" class="su-select">\n            <fd-popover-control class="su-select__popover-control">\n                <button\n                    class="fd-dropdown__control fd-button"\n                    type="button"\n                    *ngIf="!hasCustomTrigger; else customTrigger"\n                >\n                    {{ (value && value.label) || placeholder | translate }}\n                </button>\n\n                <ng-template #customTrigger>\n                    <ng-content select="[su-select-custom-trigger]"></ng-content>\n                </ng-template>\n            </fd-popover-control>\n            <fd-popover-body>\n                <fd-menu class="su-select__menu">\n                    <ul\n                        fd-menu-list\n                        suListKeyboardControl\n                        [suListKeyboardControlEnabled]="isKeyboardControlEnabled && popover.isOpen"\n                        (suListKeyboardControlEnterKeydown)="selectItem($event)"\n                    >\n                        <li\n                            fd-menu-item\n                            suListItemKeyboardControl\n                            [ngClass]="item.listItemClassName"\n                            *ngFor="let item of items"\n                            (click)="selectItem(item.id)"\n                            [attr.tabindex]="-1"\n                            [attr.data-select-id]="item.id"\n                        >\n                            {{ item.label | translate }}\n                        </li>\n                    </ul>\n                </fd-menu>\n            </fd-popover-body>\n        </fd-popover>\n    ',styles:[".su-select,.su-select__popover-control,.su-select__popover-control .fd-dropdown{width:100%}.su-select__popover-control .fd-dropdown__control{overflow:hidden;color:#51555a}.su-select__popover-control .fd-dropdown__control::after{position:absolute;top:0;right:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;padding:0;height:36px;width:36px;margin-top:0;font-size:14px}.su-select__menu .fd-menu__list{max-height:200px;overflow:auto}.su-select__menu .fd-menu__item[select-highlighted]{background:rgba(10,110,209,.07)}.su-select__menu .fd-menu__item[select-highlighted]:focus{outline:0}"]})],e)}(K),Me=function(){function t(t,e){this.hostElement=t,this.renderer=e,this.activeClassName="is-active"}return t.prototype.ngOnInit=function(){this.setTabIndex()},t.prototype.getElement=function(){return this.hostElement.nativeElement},t.prototype.setActive=function(){var t=this.getElement();this.renderer.addClass(t,this.activeClassName),t.scrollIntoView({block:"nearest"})},t.prototype.setInactive=function(){this.renderer.removeClass(this.getElement(),this.activeClassName)},t.prototype.setTabIndex=function(){this.renderer.setAttribute(this.getElement(),"tabindex","-1")},t.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2}]},t=d([r.Directive({selector:"[suListItemKeyboardControl]"}),y("design:paramtypes",[r.ElementRef,r.Renderer2])],t)}();!function(t){t.ArrowDown="ArrowDown",t.ArrowUp="ArrowUp",t.Enter="Enter",t.Esc="Escape"}(Pe||(Pe={}));var je=function(){function t(){this.suListKeyboardControlEnabled=!0,this.suListKeyboardControlEnterKeydown=new r.EventEmitter,this.suListKeyboardControlEscKeydown=new r.EventEmitter,this.didNgAfterContentInit=!1,this.shouldSetActiveAfterContentInit=!1,this.activeItem=null,this.activeItemIndex=null}return t.prototype.ngAfterContentInit=function(){var t=this;this.items.changes.subscribe((function(){0!==t.items.length&&t.suListKeyboardControlEnabled?t.setActiveItemByIndex(0,1):t.clearActiveItem()})),this.shouldSetActiveAfterContentInit&&this.items.length>0&&this.setActiveItemByIndex(0,1),this.didNgAfterContentInit=!0},t.prototype.onKeyDown=function(t){if(this.suListKeyboardControlEnabled&&0!==this.items.length)switch(t.key){case Pe.ArrowDown:return t.preventDefault(),void this.handleArrowDown();case Pe.ArrowUp:return t.preventDefault(),void this.handleArrowUp();case Pe.Enter:return t.preventDefault(),void this.handleEnter();case Pe.Esc:return void this.handleEsc()}},t.prototype.ngOnInit=function(){this.shouldSetActiveAfterContentInit=this.suListKeyboardControlEnabled},t.prototype.ngOnChanges=function(t){if(this.didNgAfterContentInit){var e=t.suListKeyboardControlEnabled,n=t.suListKeyboardControlDisabledPredicate,r=e&&e.currentValue&&!e.previousValue,o=e&&!e.currentValue&&e.previousValue,i=n&&n.currentValue&&!!this.suListKeyboardControlEnabled,s=n&&!n.currentValue&&n.previousValue&&!!this.suListKeyboardControlEnabled;0!==this.items.length&&((r||i)&&this.setFirstItemActive(),(o||s)&&this.unsetActiveItem())}},t.prototype.handleArrowUp=function(){this.setPreviousItemActive()},t.prototype.handleArrowDown=function(){this.setNextItemActive()},t.prototype.handleEnter=function(){this.suListKeyboardControlEnterKeydown.emit(this.activeItemIndex)},t.prototype.handleEsc=function(){this.suListKeyboardControlEscKeydown.emit()},t.prototype.getItemByIndex=function(t){return this.getItemsArray()[t]},t.prototype.getItemsArray=function(){return this.items.toArray()},t.prototype.setActiveItemByIndex=function(t,e){var n=this.getItemsArray();if(this.suListKeyboardControlDisabledPredicate)for(;this.suListKeyboardControlDisabledPredicate(n[t],t);)if(!n[t+=e])return;var r=this.getItemByIndex(t);this.setActiveItem(r)},t.prototype.setActiveItem=function(t){var e=this.getItemsArray(),n=e.indexOf(t);this.activeItem&&this.activeItem.setInactive(),e.length>0&&(this.activeItem=e[n],this.activeItem.setActive(),this.activeItemIndex=n)},t.prototype.unsetActiveItem=function(){this.activeItem&&(this.activeItem.setInactive(),this.activeItemIndex=null)},t.prototype.setFirstItemActive=function(){this.setActiveItemByIndex(0,1)},t.prototype.setNextItemActive=function(){null!==this.activeItemIndex?this.activeItemIndex<this.items.length-1&&this.setActiveItemByIndex(this.activeItemIndex+1,1):this.setFirstItemActive()},t.prototype.setPreviousItemActive=function(){null!==this.activeItemIndex?this.activeItemIndex>0&&this.setActiveItemByIndex(this.activeItemIndex-1,-1):this.setFirstItemActive()},t.prototype.clearActiveItem=function(){this.activeItem=null,this.activeItemIndex=null},d([r.Input(),y("design:type",Object)],t.prototype,"suListKeyboardControlEnabled",void 0),d([r.Input(),y("design:type",Function)],t.prototype,"suListKeyboardControlDisabledPredicate",void 0),d([r.Output(),y("design:type",Object)],t.prototype,"suListKeyboardControlEnterKeydown",void 0),d([r.Output(),y("design:type",Object)],t.prototype,"suListKeyboardControlEscKeydown",void 0),d([r.ContentChildren(Me),y("design:type",r.QueryList)],t.prototype,"items",void 0),d([r.HostListener("document:keydown",["$event"]),y("design:type",Function),y("design:paramtypes",[KeyboardEvent]),y("design:returntype",void 0)],t.prototype,"onKeyDown",null),t=d([r.Directive({selector:"[suListKeyboardControl]"})],t)}(),xe=function(){function t(){}return t=d([r.NgModule({declarations:[je,Me],exports:[je,Me]})],t)}(),Be=function(){function t(){}return t=d([r.NgModule({imports:[c.FundamentalNgxCoreModule,l.CommonModule,xe,Te.forChild()],declarations:[De],entryComponents:[De],exports:[De]})],t)}(),ke=function(){function t(){}return t=d([r.NgModule({imports:[l.CommonModule,Be],declarations:[Le],entryComponents:[Le],exports:[Le]})],t)}(),He=function(){function t(){}return t=d([r.NgModule({imports:[l.CommonModule,ke,u.FormsModule,u.ReactiveFormsModule,c.AlertModule,Te.forChild(),c.ButtonModule,c.FormModule],declarations:[_e],entryComponents:[_e],exports:[ke]})],t)}(),Ve=function(t){function n(e,n,r,o,i,s,a,u){var c=t.call(this)||this;return c.translationsFetchService=e,c.modalService=n,c.sharedDataService=r,c.storageService=o,c.eventService=i,c.ssoAuthenticationHelper=s,c.settingsService=a,c.authenticationManager=u,c}return h(n,t),n.prototype.filterEntryPoints=function(t){return this.sharedDataService.get("authenticationMap").then((function(e){return N.convertToArray(f({},e||{},ot)).filter((function(e){return new RegExp(e.key,"g").test(t)})).map((function(t){return t.value}))}))},n.prototype.isAuthEntryPoint=function(t){return this.sharedDataService.get("authenticationMap").then((function(e){return N.convertToArray(e||{}).map((function(t){return t.value})).indexOf(t)>-1||"/authorizationserver/oauth/token"===t}))},n.prototype.authenticate=function(t){var n=this;return this._findLoginData(t).then((function(t){return n._launchAuth(t).then((function(r){Promise.resolve(n.eventService.publish(st.AUTHORIZATION_SUCCESS,{userHasChanged:r.userHasChanged})).then((function(){r.userHasChanged&&n.eventService.publish(st.USER_HAS_CHANGED);var t=e.values(n.reauthInProgress).some((function(t){return t}));r.userHasChanged&&!t&&n.authenticationManager&&n.authenticationManager.onUserHasChanged&&n.authenticationManager.onUserHasChanged()})),n.reauthInProgress[t.authURI]=!1}))}))},n.prototype.logout=function(){var t=this;return this.eventService.publish(st.LOGOUT).then((function(){t.storageService.removeAllAuthTokens(),t.ssoAuthenticationHelper.isAutoSSOMain()?t.ssoAuthenticationHelper.logout():t.authenticationManager&&t.authenticationManager.onLogout&&t.authenticationManager.onLogout()}))},n.prototype.isReAuthInProgress=function(t){return Promise.resolve(!0===this.reauthInProgress[t])},n.prototype.setReAuthInProgress=function(t){return this.reauthInProgress[t]=!0,Promise.resolve()},n.prototype.isAuthenticated=function(t){var e=this;return this.filterEntryPoints(t).then((function(t){var n=t&&t[0];return Promise.resolve(e.storageService.getAuthToken(n)).then((function(t){return!!t}))}))},n.prototype._findLoginData=function(t){var e=this;return this.filterEntryPoints(t).then((function(t){return Promise.resolve(e.sharedDataService.get("credentialsMap").then((function(e){var n=f({},e||{},it),r=t[0];return{authURI:r,clientCredentials:n[r]}})))}))},n.prototype._launchAuth=function(t){var e=this;return this.translationsFetchService.waitToBeReady().then((function(){return Promise.all([e.storageService.isInitialized(),e.settingsService.getBoolean("smartedit.sso.enabled")])})).then((function(n){var r=E(n,2),o=r[0],i=r[1],s=e.modalService.open({component:_e,data:f({},t,{isFullScreen:o,ssoEnabled:i}),config:{modalPanelClass:"su-login-dialog-container",hasBackdrop:!1}});return new Promise((function(t,e){s.afterClosed.subscribe(t,e)}))}))},n=d([g(4,r.Inject(rt)),g(7,r.Optional()),y("design:paramtypes",[Ie,Rt,Ct,bt,Object,Ee,Tt,wt])],n)}(At),Ge=function(){function n(t){this.modalRef=t,this.title=new i.BehaviorSubject(""),this.titleSuffix=new i.BehaviorSubject(""),this.modalData=new i.BehaviorSubject({}),this.component=new i.BehaviorSubject({}),this.isDismissButtonVisible=new i.BehaviorSubject(!0),this.buttons=new i.BehaviorSubject([])}return n.prototype.init=function(){this.modalData.next(this.modalRef.data.modalData),this.component.next(this.modalRef.data.component),this.buttons.next(this.modalRef.data.templateConfig.buttons||[]),this.title.next(this.modalRef.data.templateConfig.title),this.titleSuffix.next(this.modalRef.data.templateConfig.titleSuffix),this.isDismissButtonVisible.next(this.modalRef.data.templateConfig.isDismissButtonVisible)},n.prototype.getComponent=function(){return this.component.asObservable()},n.prototype.getTitle=function(){return this.title.asObservable()},n.prototype.getTitleSuffix=function(){return this.titleSuffix.asObservable()},n.prototype.getButtons=function(){return this.buttons.asObservable()},n.prototype.getModalData=function(){return this.modalData.asObservable()},n.prototype.getIsDismissButtonVisible=function(){return this.isDismissButtonVisible.asObservable()},n.prototype.setDismissButtonVisibility=function(t){this.isDismissButtonVisible.next(t)},n.prototype.setTitle=function(t){this.title.next(t)},n.prototype.addButton=function(t){this.buttons.next(I(this.buttons.value,[t]))},n.prototype.removeButton=function(t){this.buttons.next(this.buttons.value.filter((function(e){return e.id!==t})))},n.prototype.removeAllButtons=function(){this.buttons.next([])},n.prototype.disableButton=function(t){this.buttons.next(this.buttons.value.map((function(e){return e.id===t?f({},e,{disabled:!0}):e})))},n.prototype.setDismissCallback=function(t){this.dismissCallback=t},n.prototype.enableButton=function(t){this.buttons.next(this.buttons.value.map((function(e){return e.id===t?f({},e,{disabled:!1}):e})))},n.prototype.onButtonClicked=function(e){var n=this,r=e.callback?e.callback():i.of(null);e.action!==t.FundamentalModalButtonAction.None&&r.subscribe((function(r){return e.action===t.FundamentalModalButtonAction.Close?n.close(r):n.dismiss(r)}))},n.prototype.close=function(t){this.modalRef.close(t)},n.prototype.dismiss=function(t){var n=this;this.dismissCallback().then((function(){return n.modalRef.dismiss(t)})).catch(e.noop)},n.prototype.dismissCallback=function(){return Promise.resolve()},n.ctorParameters=function(){return[{type:c.ModalRef}]},n=d([r.Injectable(),y("design:paramtypes",[c.ModalRef])],n)}(),We=function(){function t(t){this.modalManager=t,this.component=this.modalManager.getComponent(),this.title=this.modalManager.getTitle(),this.titleSuffix=this.modalManager.getTitleSuffix(),this.buttons=this.modalManager.getButtons(),this.isDismissButtonVisible=this.modalManager.getIsDismissButtonVisible()}return t.prototype.ngOnInit=function(){this.modalManager.init()},t.prototype.onButtonClicked=function(t){this.modalManager.onButtonClicked(t)},t.prototype.dismiss=function(){this.modalManager.dismiss()},t.prototype.hasButtons=function(){return this.buttons.pipe(s.map((function(t){return t&&!!t.length})))},t.ctorParameters=function(){return[{type:Ge}]},t=d([r.Component({selector:"fundamental-modal-template",encapsulation:r.ViewEncapsulation.None,providers:[Ge],template:'\n        <fd-modal-header>\n            <h1 fd-modal-title id="fd-modal-title-{{ (title | async) || \'\' }}">\n                {{ (title | async) || \'\' | translate }}\n                {{ (titleSuffix | async) || \'\' | translate }}\n            </h1>\n            <button\n                fd-modal-close-btn\n                *ngIf="isDismissButtonVisible | async"\n                (click)="dismiss()"\n            ></button>\n        </fd-modal-header>\n        <fd-modal-body>\n            <ng-container *ngComponentOutlet="component | async"></ng-container>\n        </fd-modal-body>\n        <fd-modal-footer *ngIf="hasButtons() | async">\n            <button\n                *ngFor="let button of buttons | async"\n                [disabled]="button.disabledFn ? button.disabledFn() : button.disabled"\n                [options]="button.style"\n                [attr.id]="button.id"\n                (click)="onButtonClicked(button)"\n                fd-button\n            >\n                {{ button.label | translate }}\n            </button>\n        </fd-modal-footer>\n    ',styles:["\n            .fd-modal__title {\n                min-height: 20px;\n            }\n        "]}),y("design:paramtypes",[Ge])],t)}(),Ke=function(){function t(){}return t=d([r.NgModule({imports:[l.CommonModule,c.ModalModule,c.ButtonModule,Te.forChild()],declarations:[We],entryComponents:[We],exports:[We]})],t)}(),qe=function(){function t(t){this.fundamentalModalService=t}return t.prototype.open=function(t){return t.templateConfig?this.openWithTemplate(t):this.openStandalone(t)},t.prototype.openStandalone=function(t){var e=t.config,n=void 0===e?{}:e,r=t.component,o=t.data;return this.fundamentalModalService.open(r,f({},n,{data:o}))},t.prototype.openWithTemplate=function(t){var e=t.config,n=void 0===e?{}:e,r=t.templateConfig,o=void 0===r?{}:r,i=t.component,s=t.data,a=f({},n,{data:{templateConfig:o,component:i,modalData:s}});return this.fundamentalModalService.open(We,a)},t.ctorParameters=function(){return[{type:c.ModalService}]},t=d([r.Injectable(),y("design:paramtypes",[c.ModalService])],t)}(),ze=function(){function t(t,n,r,o){this._alertConf=t,this.fundamentalAlertService=r,this.translateService=o,this._displayed=!1,e.defaultsDeep(this._alertConf,e.cloneDeep(n))}return Object.defineProperty(t.prototype,"alertConf",{get:function(){return this._alertConf},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this._alertConf.message},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._alertConf.type},enumerable:!0,configurable:!0}),t.prototype.show=function(){return m(this,void 0,void 0,(function(){var t,e,n=this;return v(this,(function(r){switch(r.label){case 0:return this.isDisplayed()?[2]:this._alertConf.message?(t=this._alertConf,[4,this.translateService.get(this._alertConf.message,this._alertConf.messagePlaceholders).toPromise()]):[3,2];case 1:t.message=r.sent(),r.label=2;case 2:return e=void 0!==this._alertConf.message?this._alertConf.message:this._alertConf.component||"",this._alertRef=this.fundamentalAlertService.open(e,this._alertConf),this._alertRef.afterDismissed.subscribe((function(){return n._displayed=!1})),this._displayed=!0,[2]}}))}))},t.prototype.hide=function(){this.isDisplayed()&&this._alertRef.dismiss()},t.prototype.isDisplayed=function(){return this._displayed},t}(),Ye=new r.InjectionToken("alertConfigToken"),$e={data:{},type:t.IAlertServiceType.INFO,dismissible:!0,duration:3e3,width:"500px"},Xe=function(){function e(t,e,n){this.fundamentalAlertService=t,this.translateService=e,this.ALERT_CONFIG_DEFAULTS=n}return e.prototype.createAlert=function(t){var e=this.getAlertConfig(t);return this.createAlertObject(e)},e.prototype.createInfo=function(e){var n=this.getAlertConfig(e,t.IAlertServiceType.INFO);return this.createAlertObject(n)},e.prototype.createDanger=function(e){var n=this.getAlertConfig(e,t.IAlertServiceType.DANGER);return this.createAlertObject(n)},e.prototype.createWarning=function(e){var n=this.getAlertConfig(e,t.IAlertServiceType.WARNING);return this.createAlertObject(n)},e.prototype.createSuccess=function(e){var n=this.getAlertConfig(e,t.IAlertServiceType.SUCCESS);return this.createAlertObject(n)},e.prototype.getAlertConfig=function(e,n){return"string"==typeof e?{message:e,type:n||t.IAlertServiceType.INFO}:(e.type||(e.type=n||t.IAlertServiceType.INFO),e)},e.prototype.createAlertObject=function(t){return new ze(t,this.ALERT_CONFIG_DEFAULTS,this.fundamentalAlertService,this.translateService)},e.ctorParameters=function(){return[{type:c.AlertService},{type:a.TranslateService},{type:c.AlertConfig,decorators:[{type:r.Inject,args:[Ye]}]}]},e=d([r.Injectable(),g(2,r.Inject(Ye)),y("design:paramtypes",[c.AlertService,a.TranslateService,c.AlertConfig])],e)}(),Ze=function(){function t(t){this.alertFactory=t}return t.prototype.showAlert=function(t){this.alertFactory.createAlert(t).show()},t.prototype.showInfo=function(t){this.alertFactory.createInfo(t).show()},t.prototype.showDanger=function(t){this.alertFactory.createDanger(t).show()},t.prototype.showWarning=function(t){this.alertFactory.createWarning(t).show()},t.prototype.showSuccess=function(t){this.alertFactory.createSuccess(t).show()},t.ctorParameters=function(){return[{type:Xe}]},t=d([r.Injectable(),y("design:paramtypes",[Xe])],t)}(),Je=$e,Qe=function(){function t(){}return t=d([r.NgModule({imports:[c.AlertModule,Te],providers:[{provide:Ye,useValue:Je},Ze,Xe]})],t)}(),tn=function(){function t(t,e,n,r,o){void 0===o&&(o=null),this.component=t,this.control=e,this.inputs=n,this.persist=r,this.parent=o,this.inputChanges=this.inputs.changes}return t.prototype.setInput=function(t,e){this.inputs.set(t,e)},t.prototype.getInput=function(t){return this.inputs.get(t)},Object.defineProperty(t.prototype,"root",{get:function(){if(null===this.parent)return this;for(var t=this.parent;t.parent;)t=t.parent;return t},enumerable:!0,configurable:!0}),t}(),en=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.validators={},this.asyncValidators={},this.validators=this._omitUndefinedValues(t),this.asyncValidators=this._omitUndefinedValues(e)}return t.prototype.has=function(t){return this.validators.hasOwnProperty(t)},t.prototype.getParam=function(t){return this.has(t)?this.validators[t]:null},t.prototype.hasAsync=function(t){return this.asyncValidators.hasOwnProperty(t)},t.prototype.getAsyncParam=function(t){return this.hasAsync(t)?this.asyncValidators[t]:null},t.prototype._omitUndefinedValues=function(t){return e.omitBy(t,e.isUndefined)},t}(),nn=function(t){function e(e,n,r,o,i){void 0===i&&(i=new en);var s=t.call(this,e,n,r,o)||this;return s.validators=i,s}return h(e,t),e.prototype.getPersistedValue=function(){if(this.persist)return void 0===this.control.value?null:this.control.value},e}(tn),rn=function(t){function e(e,n,r,o,i,s){void 0===s&&(s={});var a=t.call(this,e,n,r,o,i)||this;return a.forms=s,Object.keys(a.forms).forEach((function(t){a.forms[t].parent=a})),a}return h(e,t),e.prototype.addFormElement=function(t,e){var n;this.forms=f({},this.forms,((n={})[t]=e,n)),this.control.addControl(t,e.control),e.parent=this},e.prototype.removeFormElement=function(t){if(this.forms[t]){var e=this.forms,n=t,r=e[n],o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(e,["symbol"==typeof n?n:n+""]);this.forms=o,r.parent=null,this.control.removeControl(t)}},e.prototype.getFormElement=function(t){return(Array.isArray(t)?t:t.split(".")).reduce((function(t,e){return t&&t.forms?t.forms[e]:null}),this)},e.prototype.setNestedErrors=function(t){var e=this;void 0===t&&(t=[]),t.forEach((function(t){var n=E(t,2),r=n[0],o=n[1],i=e.getFormElement(r);if(!i)throw new Error("FormGrouping - Path not found when setting nested error: "+r);i.control.setErrors(o)}))},e.prototype.getPersistedValue=function(){var t=this;return Object.keys(this.forms).reduce((function(e,n){var r=t.forms[n];return r.persist?(e[n]=r.getPersistedValue(),e):f({},e,r.getPersistedValue())}),{})},e}(tn),on=function(t){function n(e,n,r,o,i,s){void 0===s&&(s=[]);var a=t.call(this,e,n,r,i,o)||this;return a.forms=s,s.forEach((function(t){t.parent=a})),a}return h(n,t),n.prototype.getPersistedValue=function(){return this.forms.reduce((function(t,n){return n.persist?(t.push(n.getPersistedValue()),t):t.concat(e.values(n.getPersistedValue()))}),[])},n.prototype.addFormElement=function(t){this.forms=I(this.forms,[t]),this.control.push(t.control),t.parent=this},n.prototype.removeFormElement=function(t){this._isInBounds(t)&&(this.forms=this.forms.filter((function(e,n){return n!==t})),this.control.removeAt(t))},n.prototype.formElementAt=function(t){return this._isInBounds(t)?this.forms[t]:null},n.prototype.size=function(){return this.forms.length},n.prototype.swapFormElements=function(t,e){if(this._isInBounds(t)&&this._isInBounds(e)&&t!==e){this.forms=I(this.forms);var n=this.forms[t];this.forms[t]=this.forms[e],this.forms[e]=n;var r=this.control.at(t);this.control.insert(t,this.control.at(e)),this.control.insert(e,r)}},n.prototype.moveFormElement=function(t,e){if(this._isInBounds(t)&&this._isInBounds(e)&&t!==e){for(var n=e<t?-1:1,r=this.control.at(t),o=this.forms[t],i=t;i!==e;i+=n){var s=i+n;this.control.setControl(i,this.control.at(s)),this.forms[i]=this.forms[s]}this.control.setControl(e,r),this.forms[e]=o}},n.prototype._isInBounds=function(t){return t<this.forms.length&&t>=0},n}(tn),sn=function(t,e){this.key=t,this.value=e},an=function(){function t(t){void 0===t&&(t={}),this.changes=new i.Subject,this._map=new Map(e.toPairs(t))}return t.prototype.get=function(t){return this._map.get(t)},t.prototype.set=function(t,e,n){void 0===n&&(n=!0),this._map.set(t,e),n&&this.changes.next(new sn(t,e))},t}(),un=function(t){this.property=t},cn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.alias=n||r.property,r}return h(e,t),e}(un),ln=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e}(un),pn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e}(un);function hn(t){return function(e,n){var r=e.constructor;r._form_prop_||(r._form_prop_=[]),r._form_prop_.push(t(n))}}function fn(){return hn((function(t){return new ln(t)}))}var dn=function(){function t(){}return Object.defineProperty(t.prototype,"forms",{get:function(){return e.values(this.form.forms)},enumerable:!0,configurable:!0}),d([fn(),y("design:type",rn)],t.prototype,"form",void 0),t=d([r.Component({selector:"form-lister",template:'<ng-template [formRenderer]="form" *ngFor="let form of forms"></ng-template>\n',styles:["\n            :host {\n                display: block;\n            }\n        "]})],t)}(),gn=function(t){var e=t.changeDetectorRef,n=t.instance;n.onDynamicInputChange&&n.onDynamicInputChange(),e.markForCheck()},yn=function(){function t(t,e){this.componentFactoryResolver=t,this.viewContainerRef=e}return Object.defineProperty(t.prototype,"form",{set:function(t){this._dispose();var e=this.componentFactoryResolver.resolveComponentFactory(t.component),n=this.viewContainerRef.createComponent(e);this._subscription=function(t,e){var n=t.instance,r=n.constructor._form_prop_;if(!Array.isArray(r))return new i.Subscription;var o=new Map;return r.forEach((function(t){var r=t.property;if(t instanceof cn){var i=t.alias;void 0===e.getInput(i)&&void 0!==n[r]&&e.setInput(i,n[r]),n[r]=e.getInput(i),o.set(i,t)}else t instanceof ln?n[r]=e:t instanceof pn&&(n[r]=e.control)})),gn(t),e.inputChanges.subscribe((function(e){var r=e.key,i=e.value,s=o.get(r);s&&(n[s.property]=i,gn(t))}))}(n,t)},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this._dispose()},t.prototype._dispose=function(){this._subscription&&this._subscription.unsubscribe(),this.viewContainerRef.clear()},t.ctorParameters=function(){return[{type:r.ComponentFactoryResolver},{type:r.ViewContainerRef}]},d([r.Input("formRenderer"),y("design:type",tn),y("design:paramtypes",[tn])],t.prototype,"form",null),t=d([r.Directive({selector:"[formRenderer]"}),y("design:paramtypes",[r.ComponentFactoryResolver,r.ViewContainerRef])],t)}(),mn=new r.InjectionToken("COMPONENT_MAP"),vn=new r.InjectionToken("ASYNC_VALIDATOR_MAP"),En=new r.InjectionToken("VALIDATOR_MAP"),In=function(){function t(){}var e;return e=t,t.forRoot=function(t){return{ngModule:e,providers:[{provide:r.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:[t.types],multi:!0},{provide:mn,useValue:t.types},{provide:En,useValue:t.validators},{provide:vn,useValue:t.asyncValidators}]}},t=e=d([r.NgModule({imports:[l.CommonModule,u.ReactiveFormsModule],declarations:[yn,dn],entryComponents:[dn],exports:[yn]})],t)}(),Sn=function(){function t(t){void 0===t&&(t={}),this._map=new Map(e.toPairs(t))}return t.prototype.add=function(t,e){if(this._map.has(t))throw new Error(this._service+": is overriding an element named '"+t+"' in its registry.");this._map.set(t,e)},t.prototype.get=function(t){if(!this._map.has(t))throw new Error(this._service+": does not have '"+t+"' in its registry.");return this._map.get(t)},Object.defineProperty(t.prototype,"_service",{get:function(){return this.constructor.name},enumerable:!0,configurable:!0}),t}(),An=function(t){function e(e){return t.call(this,e)||this}return h(e,t),e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[mn]}]}]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e(r.inject(mn,8))},token:e,providedIn:"root"}),e=d([r.Injectable({providedIn:"root"}),g(0,r.Optional()),g(0,r.Inject(mn)),y("design:paramtypes",[Object])],e)}(Sn),bn=function(t){function e(e){return t.call(this,e)||this}return h(e,t),e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[vn]}]}]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e(r.inject(vn,8))},token:e,providedIn:"root"}),e=d([r.Injectable({providedIn:"root"}),g(0,r.Optional()),g(0,r.Inject(vn)),y("design:paramtypes",[Object])],e)}(Sn),Cn=function(t){function e(e){return t.call(this,e)||this}return h(e,t),e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[En]}]}]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e(r.inject(En,8))},token:e,providedIn:"root"}),e=d([r.Injectable({providedIn:"root"}),g(0,r.Optional()),g(0,r.Inject(En)),y("design:paramtypes",[Object])],e)}(Sn),Tn=function(){function t(t,e,n){this.types=t,this.validators=e,this.asyncValidators=n}return t.prototype.compileGroup=function(t,e,n){var r=this;void 0===n&&(n={});var o=Object.keys(e.schemas).reduce((function(o,i){return o[i]=r._toAbstractForm(t?t[i]:null,e.schemas[i],n),o}),{}),i=new u.FormGroup(Object.keys(o).reduce((function(t,e){return t[e]=o[e].control,t}),{}));return new rn(e.component?this._getComponent(e.component,n.components):dn,i,new an(e.inputs),this._toPersist(e.persist),null,o)},t.prototype.compileList=function(t,e,n){var r=this;void 0===n&&(n={});var o=Array.isArray(e.schema)?e.schema:[e.schema];if(!o.length)throw Error("SchemaCompilerService - One or more schemas must be provided to compile a form list.");var i=(Array.isArray(t)?t:[]).map((function(t,e){var i=o[e]?o[e]:o[o.length-1];return r._toAbstractForm(t,i,n)})),s=new u.FormArray(i.map((function(t){return t.control})));return new on(this._getComponent(e.component,n.components),s,new an(e.inputs),null,this._toPersist(e.persist),i)},t.prototype.compileField=function(t,e,n){void 0===n&&(n={});var r=[],o=[];e.validators&&(r=this._mapValidator(e.validators,this.validators,n.validators)),e.asyncValidators&&(o=this._mapValidator(e.asyncValidators,this.asyncValidators,n.asyncValidators));var i=new u.FormControl({value:t,disabled:e.disabled},r,o);return new nn(this._getComponent(e.component,n.components),i,new an(e.inputs),this._toPersist(e.persist),new en(e.validators,e.asyncValidators))},t.prototype._toAbstractForm=function(t,e,n){return"field"===e.type?this.compileField(t,e,n):"group"===e.type?this.compileGroup(t,e,n):this.compileList(t,e,n)},t.prototype._mapValidator=function(t,e,n){var r=this;return void 0===n&&(n={}),Object.keys(t).reduce((function(o,i){var s=t[i];if(void 0!==s){var a=n[i]?n[i]:e.get(i);if(!a)throw new Error("SchemaCompilerService - Validator not found in "+r.validators.constructor.name+" for: "+i+".");o.push(a(s))}return o}),[])},t.prototype._toPersist=function(t){return void 0===t&&(t=!0),t},t.prototype._getComponent=function(t,e){void 0===e&&(e={});var n=e[t]?e[t]:this.types.get(t);if(!n)throw new Error("SchemaCompilerService - Did not find component for: "+t+".");return n},t.ctorParameters=function(){return[{type:An},{type:Cn},{type:bn}]},t.ngInjectableDef=r.defineInjectable({factory:function(){return new t(r.inject(An),r.inject(Cn),r.inject(bn))},token:t,providedIn:In}),t=d([r.Injectable({providedIn:In}),y("design:paramtypes",[An,Cn,bn])],t)}(),Rn=function(t,e,n,r){return void 0===e&&(e={}),void 0===n&&(n=[]),void 0===r&&(r=[]),t instanceof nn?(t.persist&&(e[n.join(".")]=r),e):((t instanceof on||t instanceof rn)&&(t.persist&&n.length&&(e[n.join(".")]=r),Object.keys(t.forms).forEach((function(o){var i=t.forms[o],s=I(r,[o]);return i.persist?Rn(i,e,I(n,[o]),s):Rn(i,e,n,s)}))),e)};t.ALERT_CONFIG_DEFAULTS=$e,t.ALERT_CONFIG_DEFAULTS_TOKEN=Ye,t.AbstractCachedRestService=ge,t.AbstractForm=tn,t.Alert=ze,t.AlertFactory=Xe,t.AlertModule=Qe,t.AlertService=Ze,t.AnnotationService=q,t.AsyncValidatorRegistryService=bn,t.AuthenticationService=Ve,t.BackendEntry=ht,t.BackendInterceptor=dt,t.BaseValueAccessor=K,t.BooleanUtils=H,t.BrowserService=Ae,t.CacheAction=tt,t.CacheConfig=Y,t.CacheConfigAnnotationFactory=function(t){return z.setClassAnnotationFactory("CacheConfig",(function(e){return function(n,r,o){r.call.apply(r,I([n],o)),n.cacheConfig=e[0],t.debug("adding cache config "+JSON.stringify(n.cacheConfig)+" to class "+N.getInstanceConstructorName(n),n)}}))},t.CacheEngine=et,t.CacheService=ct,t.Cached=$,t.CachedAnnotationFactory=function(t){return z.setMethodAnnotationFactory("Cached",(function(n){return function(r,o,i,s){var a=[],u=[];if(n[0]&&(a=n[0].actions,u=n[0].tags),r.cacheConfig&&(r.cacheConfig.actions&&(a=e.uniq(a.concat(r.cacheConfig.actions))),r.cacheConfig.tags&&(u=e.uniq(u.concat(r.cacheConfig.tags)))),!a.length){var c=N.getInstanceConstructorName(r);throw new Error("method "+o+" of "+c+" is @Cached annotated but no CacheAction is specified either through @Cached or through class level @CacheConfig annotation")}return t.handle(r,o,i,Array.prototype.slice.apply(s),a,u)}}))},t.CloneableUtils=A,t.ComponentRegistryService=An,t.ControlPropDecorator=pn,t.CryptographicUtils=O,t.DEFAULT_AUTHENTICATION_CLIENT_ID="smartedit",t.DEFAULT_AUTHENTICATION_ENTRY_POINT="/authorizationserver/oauth/token",t.DEFAULT_AUTH_MAP=ot,t.DEFAULT_CREDENTIALS_MAP=it,t.DEFAULT_LANGUAGE_ISO="en",t.DefaultCacheTiming=nt,t.DefaultRetryStrategy=qt,t.DynamicForm=fn,t.DynamicFormControl=function(){return hn((function(t){return new pn(t)}))},t.DynamicInput=function(t){return void 0===t&&(t=null),hn((function(e){return new cn(e,t)}))},t.EVENTS=st,t.EVENT_SERVICE=rt,t.EXPONENTIAL_RETRY_DEFAULT_SETTING=kt,t.EvictionTag=lt,t.ExponentialRetry=Ht,t.ExponentialRetryStrategy=Yt,t.FORM_PROP="_form_prop_",t.FingerPrintingService=be,t.FlawInjectionInterceptorModule=yt,t.FormBuilderModule=In,t.FormField=nn,t.FormGrouping=rn,t.FormList=on,t.FormListerComponent=dn,t.FormPropDecorator=ln,t.FormRendererDirective=yn,t.FunctionsUtils=P,t.FundamentalModalManagerService=Ge,t.FundamentalModalTemplateComponent=We,t.FundamentalModalTemplateModule=Ke,t.GET_REQUESTS_ON_HOLD_MAP=ne,t.HTTP_METHODS_READ=xt,t.HTTP_METHODS_UPDATE=jt,t.HttpBackendService=ft,t.HttpErrorInterceptorService=ie,t.HttpInterceptorModule=le,t.HttpUtils=G,t.I18N_RESOURCE_URI_TOKEN="@smart/utils_I18N_RESOURCE_URI",t.I18N_ROOT_RESOURCE_URI="/smarteditwebservices/v1/i18n",t.IAlertService=St,t.IAuthenticationManagerService=wt,t.IAuthenticationService=At,t.IModalService=Rt,t.ISelectAdapter=Fe,t.ISessionService=_t,t.ISettingsService=Tt,t.ISharedDataService=Ct,t.IStorageService=bt,t.ITranslationsFetchService=Ie,t.InputPropDecorator=cn,t.InputProperties=an,t.InputPropertyChange=sn,t.InvalidateCache=X,t.InvalidateCacheAnnotationFactory=function(t){return z.setMethodAnnotationFactory("InvalidateCache",(function(e){return function(n,r,o,i){var s=[],a=e[0];if(a?s=[a]:n.cacheConfig&&n.cacheConfig.tags&&(s=n.cacheConfig.tags),!s.length)throw new Error("method "+r+" of "+n.constructor.name+" is @InvalidateCache annotated but no EvictionTag is specified either through @InvalidateCache or through class level @CacheConfig annotation");var u=o.apply(void 0,Array.prototype.slice.call(i));return u&&u.then?u.then((function(e){return t.evict.apply(t,I(s)),e})):(t.evict.apply(t,I(s)),u)}}))},t.LANDING_PAGE_PATH="/",t.LANGUAGE_SERVICE=ut,t.LANGUAGE_SERVICE_CONSTANTS=at,t.LIBRARY_NAME="@smart/utils",t.LINEAR_RETRY_DEFAULT_SETTING=Vt,t.LanguageDropdown=Ue,t.LanguageDropdownAdapter=we,t.LanguageDropdownComponent=Le,t.LanguageDropdownHelper=Ne,t.LanguageDropdownModule=ke,t.LanguageService=Oe,t.LinearRetry=Gt,t.LinearRetryStrategy=Xt,t.ListItemKeyboardControlDirective=Me,t.ListKeyboardControlDirective=je,t.ListKeyboardControlModule=xe,t.LogService=x,t.LoginDialogComponent=_e,t.LoginDialogModule=He,t.LoginDialogResourceProvider=Re,t.ModalService=qe,t.ModuleUtils=D,t.OPERATION_CONTEXT_TOKEN="@smart/utils_OPERATION_CONTEXT",t.OperationContextAnnotationFactory=function(t,e,n){return z.setClassAnnotationFactory("OperationContextRegistered",(function(r){return function(o,i,s){i.call.apply(i,I([o],s));var a=t.get(r[0],r[0]);if("string"==typeof r[1]){var u=n[r[1]];e.register(a,u)}else Array.isArray(r[1])&&r[1].length>0&&r[1].forEach((function(t){e.register(a,n[t])}))}}))},t.OperationContextRegistered=Qt,t.OperationContextService=Jt,t.PermissionErrorInterceptor=ee,t.PromiseUtils=B,t.PropDecorator=un,t.REAUTH_STARTED="REAUTH_STARTED",t.RarelyChangingContentName="RarelyChangingContent",t.ResponseAdapterInterceptor=he,t.RestClient=fe,t.RestServiceFactory=de,t.RetryInterceptor=te,t.SELECTED_LANGUAGE="SELECTED_LANGUAGE",t.SIMPLE_RETRY_DEFAULT_SETTING=Wt,t.SSOAuthenticationHelper=Ee,t.SWITCH_LANGUAGE_EVENT="SWITCH_LANGUAGE_EVENT",t.SchemaCompilerService=Tn,t.SelectComponent=De,t.SelectModule=Be,t.SimpleRetry=Kt,t.StringUtils=C,t.StripResponseHeaders=ye,t.TESTMODESERVICE="@smart/utils_TESTMODESERVICE",t.TranslationModule=Te,t.URIBuilder=R,t.UnauthorizedErrorInterceptor=re,t.UrlUtils=_,t.ValidatorParameters=en,t.ValidatorRegistryService=Cn,t.WHO_AM_I_RESOURCE_URI_TOKEN="@smart/utils_WHO_AM_I_RESOURCE_URI",t.WindowUtils=L,t.annotationService=z,t.booleanUtils=V,t.clientErrorPredicate=Lt,t.cloneableUtils=b,t.commonNgZone=U,t.defaultRetryStrategyFactory=zt,t.exponentialRetryStrategyFactory=$t,t.functionsUtils=N,t.getPersistenceMap=Rn,t.httpUtils=W,t.linearRetryStrategyFactory=Zt,t.moduleUtils=M,t.noInternetConnectionErrorPredicate=Mt,t.promiseUtils=k,t.rarelyChangingContent=pt,t.readPredicate=Bt,t.retriableErrorPredicate=Dt,t.serverErrorPredicate=Ut,t.stringUtils=T,t.timeoutErrorPredicate=Ft,t.updatePredicate=function(t,n){return e.includes(jt,t.method)},t.urlUtils=w,t.windowUtils=F,t.0=ae,t.1=ue,t.2=ce,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=smart-utils.umd.min.js.map