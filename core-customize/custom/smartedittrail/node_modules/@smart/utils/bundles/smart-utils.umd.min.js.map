{"version":3,"sources":["../../node_modules/tslib/tslib.es6.js","ng://@smart/utils/utils/cloneable-utils.ts","ng://@smart/utils/services/log.service.ts","ng://@smart/utils/utils/string-utils.ts","ng://@smart/utils/utils/url-utils.ts","ng://@smart/utils/utils/cryptographic-utils.ts","ng://@smart/utils/utils/functions-utils.ts","ng://@smart/utils/utils/common-ng-zone.ts","ng://@smart/utils/utils/window-utils.ts","ng://@smart/utils/utils/module-utils.ts","ng://@smart/utils/services/annotation.service.ts","ng://@smart/utils/utils/promise-utils.ts","ng://@smart/utils/utils/boolean-utils.ts","ng://@smart/utils/utils/http-utils.ts","ng://@smart/utils/utils/base-value-accessor.ts","ng://@smart/utils/services/cache/cached-annotation.ts","ng://@smart/utils/services/cache/cache-action.ts","ng://@smart/utils/interfaces/i-alert.service.ts","ng://@smart/utils/services/cache/engine/cache-engine.ts","ng://@smart/utils/services/cache/engine/default-cache-timing.ts","ng://@smart/utils/constants.ts","ng://@smart/utils/services/cache/cache.service.ts","ng://@smart/utils/services/cache/eviction-tag.ts","ng://@smart/utils/services/cache/actions/rarely-changing-content.ts","ng://@smart/utils/services/interceptors/backend/http-backend.service.ts","ng://@smart/utils/services/interceptors/backend/backend.interceptor.ts","ng://@smart/utils/services/interceptors/flaws/flaw-injection.interceptor.ts","ng://@smart/utils/services/interceptors/flaws/flaw-injection-interceptor.Module.ts","ng://@smart/utils/interfaces/i-modal-button-options.ts","ng://@smart/utils/interfaces/i-authentication-service.ts","ng://@smart/utils/interfaces/i-storage.service.ts","ng://@smart/utils/interfaces/i-shared-data.service.ts","ng://@smart/utils/interfaces/i-settings-service.ts","ng://@smart/utils/interfaces/i-modal.service.ts","ng://@smart/utils/interfaces/i-session.service.ts","ng://@smart/utils/interfaces/i-authentication-manager.service.ts","ng://@smart/utils/services/interceptors/errors/retries/predicates/http-error.predicates.ts","ng://@smart/utils/services/interceptors/errors/retries/predicates/http-method.predicates.ts","ng://@smart/utils/services/interceptors/errors/retries/retryPolicies/exponential-retry.ts","ng://@smart/utils/services/interceptors/errors/retries/retryPolicies/linear-retry.ts","ng://@smart/utils/services/interceptors/errors/retries/retryPolicies/simple-retry.ts","ng://@smart/utils/services/interceptors/errors/retries/retryStrategies/default-retry-strategy.factory.ts","ng://@smart/utils/services/interceptors/errors/retries/retryStrategies/exponential-retry-strategy.factory.ts","ng://@smart/utils/services/interceptors/errors/retries/retryStrategies/linear-retry-strategy-factory.ts","ng://@smart/utils/services/interceptors/errors/retries/operation-context.service.ts","ng://@smart/utils/services/interceptors/errors/retries/operation-context.annotation.ts","ng://@smart/utils/services/interceptors/errors/retry.interceptor.ts","ng://@smart/utils/services/interceptors/errors/permission-error.interceptor.ts","ng://@smart/utils/services/interceptors/errors/unauthorized-error.interceptor.ts","ng://@smart/utils/services/interceptors/http-auth.interceptor.ts","ng://@smart/utils/services/interceptors/http-error-interceptor.service.ts","ng://@smart/utils/services/interceptors/http-error.interceptor.ts","ng://@smart/utils/services/interceptors/http-interceptor.module.ts","ng://@smart/utils/services/interceptors/i-http-error.interceptor.ts","ng://@smart/utils/utils/http-pagination-response-adapter.ts","ng://@smart/utils/services/interceptors/response-adapter-interceptor.service.ts","ng://@smart/utils/services/rest/rest-client.ts","ng://@smart/utils/services/rest/rest-service.factory.ts","ng://@smart/utils/services/rest/abstract-cached-rest.service.ts","ng://@smart/utils/services/authentication/sso-authentication.helper.ts","ng://@smart/utils/services/browser/BrowserService.ts","ng://@smart/utils/services/translations/i-translations-fetch.service.ts","ng://@smart/utils/components/language-dropdown/language-dropdown-helper.ts","ng://@smart/utils/services/browser/FingerPrintingService.ts","ng://@smart/utils/services/translations/translate-http.loader.ts","ng://@smart/utils/services/translations/translation.module.ts","ng://@smart/utils/components/login-dialog/login-dialog-resource-provider.ts","ng://@smart/utils/components/login-dialog/login-dialog.component.ts","ng://@smart/utils/components/language-dropdown/language-dropdown-adapter.ts","ng://@smart/utils/services/language.service.ts","ng://@smart/utils/directives/list-keyboard-control/list-keyboard-control.directive.ts","ng://@smart/utils/components/language-dropdown/language-dropdown.ts","ng://@smart/utils/components/language-dropdown/language-dropdown.component.ts","ng://@smart/utils/components/select/i-select-adapter.ts","ng://@smart/utils/components/select/select.component.ts","ng://@smart/utils/directives/list-keyboard-control/list-item-keyboard-control.directive.ts","ng://@smart/utils/directives/list-keyboard-control/list-keyboard-control.module.ts","ng://@smart/utils/components/select/select.module.ts","ng://@smart/utils/components/language-dropdown/language-dropdown.module.ts","ng://@smart/utils/components/login-dialog/login-dialog.module.ts","ng://@smart/utils/services/authentication/authentication.service.ts","ng://@smart/utils/services/modal/modal-manager.service.ts","ng://@smart/utils/components/modal-template/modal-template.component.ts","ng://@smart/utils/components/modal-template/modal-template.module.ts","ng://@smart/utils/services/modal/modal.service.ts","ng://@smart/utils/services/alert/alert.ts","ng://@smart/utils/services/alert/alert-token.ts","ng://@smart/utils/services/alert/alert-factory.ts","ng://@smart/utils/services/alert/alert.service.ts","ng://@smart/utils/services/alert/alert.module.ts","ng://@smart/utils/modules/form-builder/models/abstract-form.ts","ng://@smart/utils/modules/form-builder/models/validator-parameters.ts","ng://@smart/utils/modules/form-builder/models/form-field.ts","ng://@smart/utils/modules/form-builder/models/form-grouping.ts","ng://@smart/utils/modules/form-builder/models/form-list.ts","ng://@smart/utils/modules/form-builder/models/input-properties.ts","ng://@smart/utils/modules/form-builder/decorators.ts","ng://@smart/utils/modules/form-builder/components/form-lister/form-lister.component.ts","ng://@smart/utils/modules/form-builder/directives/form-renderer/decorate.ts","ng://@smart/utils/modules/form-builder/directives/form-renderer/form-renderer.directive.ts","ng://@smart/utils/modules/form-builder/services/injection-tokens.ts","ng://@smart/utils/modules/form-builder/form-builder.module.ts","ng://@smart/utils/modules/form-builder/services/registry.ts","ng://@smart/utils/modules/form-builder/services/component-registry.service.ts","ng://@smart/utils/modules/form-builder/services/async-validator-registry.service.ts","ng://@smart/utils/modules/form-builder/services/validator-registry.service.ts","ng://@smart/utils/modules/form-builder/services/schema-compiler.service.ts","ng://@smart/utils/modules/form-builder/helpers/get-persistence-map.helper.ts","ng://@smart/utils/interfaces/i-test-mode.service.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__read","o","m","ar","error","__spread","concat","LogLevel","CloneableUtils","makeCloneable","_json","_this","json","lodash.cloneDeepWith","isPrimitive","lodash.isElement","forEach","map","arrayElement","keys","reduce","clone","directKey","indexOf","cloneableUtils","StringUtils","sanitize","str","isBlank","split","reverse","join","replace","encode","object","btoa","encodeURIComponent","JSON","stringify","match","p1","String","fromCharCode","parseInt","replaceAll","substitutionMap","regex","RegExp","matched","toString","trim","regExpFactory","pattern","regexpKey","onlyAlphanumericsRegex","antRegex","test","formatHTML","rawHTML","stringUtils","URIBuilder","uri","wholeWordMatch","build","replaceParams","params","lodash.cloneDeep","sort","a","tempURL","substituteKeyForValue","uriDomainAndPath","exec","url","includes","substr","UrlUtils","getOrigin","link","document","createElement","setAttribute","origin_1","protocol","hostname","port","window","location","getURI","updateUrlParameter","hash","separator","getQueryString","queryString","param","lodash.isArray","substring","parseQuery","objURL","$0","$1","$2","$3","getAbsoluteURL","domain","urlUtils","CryptographicUtils","sha1Hash","data","CryptoJS.SHA1","aesBase64Encrypt","base64EncodedMessage","secretPassphrase","CryptoJS.AES","encrypt","CryptoJS.enc","Base64","parse","aesDecrypt","encryptedMessage","decrypt","Utf8","FunctionsUtils","signatureArgsRegexp","isEmpty","func","getArguments","Error","hasArguments","lo.isEmpty","getConstructorName","name","getInstanceConstructorName","instance","getPrototypeOf","extendsConstructor","originalConstructor","newConstructorBody","newConstructor","args","_i","isUnitTestMode","__karma__","convertToArray","obj","acc","functionsUtils","commonNgZone","NgZone","enableLongStackTrace","WindowUtils","ngZone","isIframe","getWindow","top","runTimeoutOutsideAngular","callback","timeout","undefined","runOutsideAngular","setTimeout","run","runIntervalOutsideAngular","setInterval","SMARTEDIT_IFRAME_ID","windowUtils","ModuleUtils","initialize","useFactory","deps","provide","APP_INITIALIZER","slice","component","multi","bootstrap","APP_BOOTSTRAP_LISTENER","provideValues","_constants","constants","useValue","Injectable","moduleUtils","annotationType","LogService","logLevel","info","log","msg","_log","debug","warn","setLogLevel","requestLevel","method","_console","_a","console","PromiseUtils","WAIT_TIMEOUT","FAILURE_TIMEOUT","handlePromiseRejections","promise","oldThen","defaultFailureCallback","successCallback","_failureCallback","failureCallback","lodash.isPlainObject","isAjaxError","PromiseUtils_1","logService","lodash.isBoolean","toPromise","context","executor","defer","pResolve","pReject","_resolve","_reject","reason","sleep","ms","waitOnCondition","condition","errorMessage","elapsedTime","resolveToCallbackWhenCondition","promiseUtils","BooleanUtils","areAllTruthy","functions","every","isAnyTruthy","some","booleanUtils","HttpUtils","isGET","request","isRequestOfAccept","accept","headers","get","isResponseOfContentType","response","contentType","isHTMLRequest","isJSONRequest","isJSRequest","isCRUDRequest","transformHttpParams","HttpParams","fromObject","copyHttpParamsOrHeaders","copy","values","getAll","buildHttpResponse","originalRequest","_statusAndPayload","statusAndPayloadPromise","from","pipe","switchMap","statusAndPayload","status","requestClone","lodash.merge","Observable","ob","HttpResponse","throwError","HttpErrorResponse","httpUtils","BaseValueAccessor","disabled","onChange","item","onTouched","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","writeValue","AnnotationService","INJECTABLE_NAME_KEY","ORIGINAL_CONSTRUCTOR_KEY","getClassAnnotations","lodash.memoize","getClassAnnotationsLogic","getMethodAnnotations","getMethodAnnotationsLogic","propertyName","annotationFactoryMap","getClassAnnotation","annotation","annotationMap","annotationName","getMethodAnnotation","hasClassAnnotation","hasMethodAnnotation","setClassAnnotationFactory","annotationFactory","getClassAnnotationFactory","classAnnotationFactory","factoryArgument","__annotations__","__parameters__","__prop__metadata__","getMetadataKeys","defineMetadata","getMetadata","rootOriginalConstructor","getOriginalConstructor","Class","setMethodAnnotationFactory","getMethodAnnotationFactory","methodAnnotationFactory","descriptor","originalMethod","bind","Method","filter","startsWith","annotationService","CacheConfig","Cached","InvalidateCache","tag","IAlertServiceType","CacheAction","CacheEngine","cachedItemsRegistry","startBackgroundMonitoringJob","addItem","cacheTiming","refresh","getItemIndex","completed","processing","id","getItemById","find","handle","hasExpired","cache","refreshCache","evict","tags","evictionTags","splice","all","needRefresh","CacheEngine_1","BACKGROUND_REFRESH_INTERVAL","setAge","timestamp","Date","getTime","expirationAge","refreshAge","findIndex","DefaultCacheTiming","_item","EVENT_SERVICE","LIBRARY_NAME","DEFAULT_AUTH_MAP","DEFAULT_CREDENTIALS_MAP","_b","client_id","EVENTS","AUTHORIZATION_SUCCESS","USER_HAS_CHANGED","LOGOUT","CLEAR_PERSPECTIVE_FEATURES","EXPERIENCE_UPDATE","PERMISSION_CACHE_CLEANED","PAGE_CHANGE","PAGE_CREATED","PAGE_UPDATED","PAGE_DELETED","PAGE_SELECTED","PAGE_RESTORED","REAUTH_STARTED","LANGUAGE_SERVICE_CONSTANTS","InjectionToken","LANGUAGE_SERVICE","CacheService","eventService","cacheEngine","predicatesRegistry","eventListeners","defaultCacheTiming","register","unshift","service","methodName","preboundMethod","invocationArguments","cacheActions","constructorName","cachedItemId","partialItem","collectEventNamesFromTags","findCacheTimingByCacheActions","listenForEvictionByTags","publish","eventId","subscribe","evt","lodash.union","lodash","collectEventNamesFromTag","event","relatedTags","predicate","cacheTimingPredicate","Inject","tslib_1.__param","EvictionTag","rarelyChangingContent","BackendEntry","matchingPayload","respond","mock","passThrough","HttpBackendService","matchLatestDefinition","backends","GET","POST","PUT","DELETE","whenGET","_whenMethod","whenPOST","whenPUT","whenDELETE","when","whenAsync","matchLatestDefinitionEnabled","findMatchingMock","backendEntry","entry","urlWithParams","endsWith","matchingPayloadRestriction","lastIndex","lodash.isEqual","BackendInterceptor","httpBackendService","intercept","backendMockRespond","decodeURIComponent","take","FlawInjectionInterceptor","flawWindow","allRequests","flawedRequests","allResponses","flawedResponses","registerRequestFlaw","mutation","requestMutations","registerResponseFlaw","responseMutations","FlawInjectionInterceptor_1","PROBABILITY","_isGET","_activateWithProbability","requestMutation","mutate","responseMutation","config","probabilityTrue","Math","random","FlawInjectionInterceptorModule","NgModule","imports","providers","HTTP_INTERCEPTORS","useClass","FundamentalModalButtonStyle","FundamentalModalButtonAction","ModalButtonActions","ModalButtonStyles","IAlertService","showAlert","alertConf","showInfo","showDanger","showWarning","showSuccess","IAuthenticationService","reauthInProgress","initialized","authenticate","resource","logout","isReAuthInProgress","entryPoint","setReAuthInProgress","filterEntryPoints","isAuthEntryPoint","isAuthenticated","IStorageService","isInitialized","storeAuthToken","authURI","auth","getAuthToken","removeAuthToken","removeAllAuthTokens","getValueFromLocalStorage","cookieName","isEncoded","setValueInLocalStorage","setItem","getItem","ISharedDataService","set","update","modifyingCallback","remove","containsKey","ISettingsService","load","getBoolean","IModalService","dismissAll","open","conf","ISessionService","getCurrentUsername","getCurrentUserDisplayName","getCurrentUser","hasUserChanged","resetCurrentUserData","setCurrentUsername","IAuthenticationManagerService","SERVER_ERROR_PREDICATE_HTTP_STATUSES","CLIENT_ERROR_PREDICATE_HTTP_STATUSES","TIMEOUT_ERROR_PREDICATE_HTTP_STATUSES","serverErrorPredicate","lodash.includes","clientErrorPredicate","timeoutErrorPredicate","retriableErrorPredicate","noInternetConnectionErrorPredicate","HTTP_METHODS_UPDATE","HTTP_METHODS_READ","readPredicate","EXPONENTIAL_RETRY_DEFAULT_SETTING","MAX_BACKOFF","MAX_ATTEMPT","MIN_BACKOFF","ExponentialRetry","calculateNextDelay","attemptCount","maxBackoff","minBackoff","waveShield","min","pow","canRetry","maxAttempt","LINEAR_RETRY_DEFAULT_SETTING","RETRY_INTERVAL","LinearRetry","retryInterval","SIMPLE_RETRY_DEFAULT_SETTING","SimpleRetry","_maxAttempt","DefaultRetryStrategy","defaultRetryStrategyFactory","simpleRetry","class_1","firstFastRetry","ExponentialRetryStrategy","exponentialRetryStrategyFactory","exponentialRetry","LinearRetryStrategy","linearRetryStrategyFactory","linearRetry","OperationContextService","store","operationContext","lodash.isEmpty","urlRegex","findOperationContext","regexIndex","OperationContextRegistered","RetryInterceptor","httpClient","translate","operationContextService","alertService","defaultRetryStrategy","exponentialRetryStrategy","linearRetryStrategy","OPERATION_CONTEXT","TRANSLATE_NAMESPACE","requestToRetryTegistry","findMatchingStrategy","responseError","retryStrategy","retrieveRetryStrategy","StrategyHolder","message","instant","storeRetryStrategy","handleRetry","INTERACTIVE","matchStrategy","predicateObj","delay_1","removeRetryStrategy","getRequestUUID","HttpClient","TranslateService","PermissionErrorInterceptor","errors","type","duration","GET_REQUESTS_ON_HOLD_MAP","UnauthorizedErrorInterceptor","authenticationService","WHO_AM_I_RESOURCE_URI","promisesToResolve","rejectedUrls","isUrlNotRejected","deferred","deferredPromise","entryPoints","requestIdentifier","record","rejectedUrl","HttpAuthInterceptor","injector","I18N_RESOURCE_URI","authToken","authReq","token_type","access_token","Injector","HttpErrorInterceptorService","_errorInterceptors","addInterceptors","interceptorClasses","InterceptorClass","addInterceptor","_interceptor","interceptor","_validateInterceptor","matchingErrorInterceptors","errorInterceptor","_interceptorsDeferred","_iterateErrorInterceptors","interceptors","idx","iterateFn_1","interceptedResponse","HttpErrorInterceptor","httpErrorInterceptorService","catchError","caught","ɵ1","ɵ2","HttpInterceptorModule","forRoot","HttpErrorInterceptorClasses","ngModule","HttpInterceptorModule_1","ɵ0","StatusText","HttpPaginationResponseAdapter","transform","ev","pagination","foundKey","isArray","results","ResponseAdapterInterceptor","RestClient","identifierName","DEFAULT_HEADERS","x-requested-with","DEFAULT_OPTIONS","metadataActivated","getMethodForSingleInstance","options","getById","searchParams","payload","save","patch","getMethodForArray","query","identifier","addHeadersToBody","buildRequestHeaders","observe","convertToTypeMapOfString","interpolateParamsInURL","formatQueryString","determineTrueQueryStringParams","arr","page","pageable","performIdentifierCheck","buildUrlWithIdentifier","put","post","delete","activateMetadata","lodash.mapValues","val","_params","sortByKeys","observable","_url","prev","lodash.isNil","lodash.sortBy","lodash.keys","lodash.zipObject","lodash.map","HttpHeaders","RestServiceFactory","Map","basePath","DOMAIN","IDENTIFIER","setGlobalBasePath","globalBasePath","RestServiceFactory_1","getGlobalBasePath","setDomain","setBasePath","has","newBasePath","getNewBasePath","basePathURI","shouldAppendDomain","restClient","AbstractCachedRestService","restServiceFactory","innerRestService","tslib_1.__decorate","StripResponseHeaders","SSO_PROPERTIES","SUPPORTED_BROWSERS","SSOAuthenticationHelper","logoutIframeId","listenForAuthTokenBeingSentBack","launchSSODialog","ssoAuthenticationEntryPoint","SSO_AUTHENTICATION_ENTRY_POINT","getSSOContextPath","completeDialog","SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT","SSO_CLIENT_ID","opener","postMessage","origin","close","httpErrorResponse","clonableHttpErrorResponse","isSSODialog","search","isAutoSSOMain","SSOAuthenticationHelper_1","lastAuthenticatedWithSSO","logoutIframe","style","display","appendChild","src","SSO_LOGOUT_ENTRY_POINT","href","pathname","addEventListener","querySelector","ITranslationsFetchService","LanguageSortStrategy","BrowserService","_isSafari","userAgent","navigator","vendor","testFeature","testUserAgent","isIE","getCurrentBrowser","IE","isFF","FIREFOX","isSafari","SAFARI","anyWindow","browser","UNKNOWN","InstallTrigger","documentMode","StyleMedia","EDGE","chrome","webstore","CHROME","getBrowserLocale","locale","language","toUpperCase","FingerPrintingService","_fingerprint","getUserAgent","getPlugins","hasJava","hasFlash","hasLocalStorage","hasSessionStorage","hasCookie","getTimeZone","getLanguage","getSystemLanguage","hasCanvas","getFingerprint","plugins","l","javaEnabled","namedItem","hasLs","localStorage","removeItem","exception","hasSs","sessionStorage","cookieEnabled","elem","getContext","TranslateHttpLoader","translationsFetchService","getTranslation","lang","TranslationModule","forChild","TranslateModule","isolate","loader","TranslateLoader","TranslationsFetchServiceClass","TranslationModule_1","storageService","browserService","isoCode","setDefaultLang","use","exports","LoginDialogResourceProvider","LoginDialogComponent","modalRef","sessionService","ssoAuthenticationHelper","hostClass","authURIKey","isFullScreen","ssoEnabled","form","FormGroup","username","FormControl","Validators","required","password","signinWithSSO","setErrors","storeAccessToken","APIAuthenticationFailureReportFactory","userHasChanged","acceptUser","sendCredentials","ngOnInit","isMainEndPoint","signinWithCredentials","hasRequiredCredentialsError","credentialsRequiredError","tslib_1.__assign","clientCredentials","grant_type","token","asyncValidationError","error_description","ModalRef","Optional","HostBinding","Component","selector","template","LanguageDropdownAdapter","LanguageService","translateService","languageServiceConstants","getBrowserLanguageIsoCode","getResolveLocale","_getDefaultLanguage","getResolveLocaleIsoCode","resolveLocale","convertBCP47TagToJavaTag","getToolingLanguages","i18nLanguageRestService","languages","catch","setSelectedToolingLanguage","setApplicationTitle","registerSwitchLanguage","currentLang","languageTag","convertJavaTagToBCP47Tag","pageTitle","title","I18N_LANGUAGES_RESOURCE_URI","actions","KeyboardKey","LanguageDropdownHelper","findSelectLanguageWithIsoCodePredicate","findLanguageWithIsoCode","order","selectedLanguage","strategy","Default","orderedLanguages","localeCompare","None","LanguageDropdown","languageService","languageSortStrategy","items","initialLanguage","unRegisterEventService","setSelectedLanguage","setInitialLanguage","handleLanguageChange","ngOnDestroy","onSelectedLanguage","sortedLanguages","code","Input","LanguageDropdownComponent","_super","tslib_1.__extends","ISelectAdapter","SelectComponent","initialValue","placeholder","isKeyboardControlEnabled","hasCustomTrigger","onItemSelected","EventEmitter","selectItem","selected","setValue","popover","emit","ngOnChanges","changes","currentValue","setInitialValue","setValueById","Output","ViewChild","static","SelectComponent_1","encapsulation","ViewEncapsulation","NG_VALUE_ACCESSOR","useExisting","forwardRef","ListItemKeyboardControlDirective","hostElement","renderer","activeClassName","setTabIndex","getElement","nativeElement","setActive","elm","addClass","scrollIntoView","block","setInactive","removeClass","ElementRef","Renderer2","Directive","ListKeyboardControlDirective","suListKeyboardControlEnabled","suListKeyboardControlEnterKeydown","suListKeyboardControlEscKeydown","didNgAfterContentInit","shouldSetActiveAfterContentInit","activeItem","activeItemIndex","ngAfterContentInit","setActiveItemByIndex","clearActiveItem","onKeyDown","ArrowDown","preventDefault","handleArrowDown","ArrowUp","handleArrowUp","Enter","handleEnter","Esc","handleEsc","enabledChange","predicateChange","suListKeyboardControlDisabledPredicate","shouldSetActive","previousValue","shouldUnsetActive","shouldSetActiveForPredicate","shouldUnsetActiveForPredicate","setFirstItemActive","unsetActiveItem","setPreviousItemActive","setNextItemActive","getItemByIndex","index","getItemsArray","toArray","delta","setActiveItem","ContentChildren","QueryList","HostListener","KeyboardEvent","ListKeyboardControlModule","declarations","SelectModule","FundamentalNgxCoreModule","CommonModule","entryComponents","LanguageDropdownModule","LoginDialogModule","FormsModule","ReactiveFormsModule","AlertModule","ButtonModule","FormModule","AuthenticationService","modalService","sharedDataService","settingsService","authenticationManager","authenticationMap","element","_findLoginData","loginData","_launchAuth","modalFeedback","reauthInProcess","lodash\n                        .values","inProcess","onUserHasChanged","onLogout","credentialsMap","waitToBeReady","modalPanelClass","hasBackdrop","afterClosed","FundamentalModalManagerService","BehaviorSubject","titleSuffix","modalData","isDismissButtonVisible","buttons","init","templateConfig","getComponent","asObservable","getTitle","getTitleSuffix","getButtons","getModalData","getIsDismissButtonVisible","setDismissButtonVisibility","isVisible","setTitle","addButton","button","removeButton","removeAllButtons","disableButton","setDismissCallback","dismissCallback","enableButton","onButtonClicked","callbackReturnedObservable","of","action","Close","dismiss","lodash.noop","FundamentalModalTemplateComponent","modalManager","hasButtons","FundamentalModalTemplateModule","ModalModule","ModalService","fundamentalModalService","openWithTemplate","openStandalone","settings","FundamentalModalService","Alert","_alertConf","ALERT_CONFIG_DEFAULTS","fundamentalAlertService","_displayed","lodash.defaultsDeep","show","isDisplayed","messagePlaceholders","content","_alertRef","afterDismissed","hide","ALERT_CONFIG_DEFAULTS_TOKEN","INFO","dismissible","width","AlertFactory","createAlert","getAlertConfig","createAlertObject","createInfo","createDanger","DANGER","createWarning","WARNING","createSuccess","SUCCESS","strOrConf","FundamentalAlertService","AlertConfig","AlertService","alertFactory","FundamentalAlertModule","ɵ0$2","AbstractForm","control","inputs","persist","parent","inputChanges","setInput","getInput","root","ValidatorParameters","validators","asyncValidators","_omitUndefinedValues","getParam","hasAsync","getAsyncParam","omitBy","isUndefined","FormField","getPersistedValue","FormGrouping","forms","addFormElement","addControl","removeFormElement","deleted","getOwnPropertySymbols","propertyIsEnumerable","__rest","removeControl","getFormElement","paths","path","setNestedErrors","validationErrors","child","FormList","_isInBounds","removeAt","formElementAt","size","swapFormElements","at","insert","moveFormElement","to","tempControl","tempForm","position","setControl","InputPropertyChange","InputProperties","Subject","_map","toPairs","PropDecorator","property","InputPropDecorator","alias","FormPropDecorator","ControlPropDecorator","makePropertyDecorator","factory","ctor","DynamicForm","FormListerComponent","changeDetectorRef","onDynamicInputChange","markForCheck","FormRendererDirective","componentFactoryResolver","viewContainerRef","_dispose","componentFactory","resolveComponentFactory","componentRef","createComponent","_subscription","Subscription","props","unsubscribe","clear","ComponentFactoryResolver","ViewContainerRef","COMPONENT_MAP","ASYNC_VALIDATOR_MAP","VALIDATOR_MAP","FormBuilderModule","option","FormBuilderModule_1","ANALYZE_FOR_ENTRY_COMPONENTS","types","Registry","add","_service","ComponentRegistryService","providedIn","AsyncValidatorRegistryService","ValidatorRegistryService","SchemaCompilerService","compileGroup","groupSchema","abstractForms","schemas","_toAbstractForm","formGroup","_getComponent","components","_toPersist","compileList","schema","schemaList","list","childSchema","FormArray","compileField","_mapValidator","formControl","registry","inline","comp","getPersistenceMap","current","toActual","factoryArguments","cacheConfig","cacheService","lo.uniq","returnedObject"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { Cloneable, Payload } from '../dtos';\n\n/**\n * @ngdoc service\n * @name @smartutils.services:CloneableUtils\n *\n * @description\n * utility service around Cloneable objects\n */\nexport class CloneableUtils {\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:CloneableUtils#makeCloneable\n     * @methodOf @smartutils.services:CloneableUtils\n     * @description\n     * returns a \"cloneable\" version of an object.\n     * Something is cloneable when it can be sent through W3C postMessage.\n     * To this purpose, functions must be removed from the cloneable candidate.\n     * @param {Object} json the object to be made cloneable\n     * @returns {Cloneable} the cloneable copy of the object\n     */\n    makeCloneable(_json: any): Cloneable {\n        const json = lodash.cloneDeepWith(_json, (value: any) => {\n            if (value !== undefined && value !== null && !this.isPrimitive(json)) {\n                // is a promise\n                if (value.then) {\n                    return null;\n                } else if (typeof value === 'function') {\n                    return null;\n                } else if (lodash.isElement(value)) {\n                    return null;\n                    // is yjQuery\n                } else if (\n                    typeof value !== 'string' &&\n                    value.hasOwnProperty('length') &&\n                    !value.forEach\n                ) {\n                    return null;\n                } else {\n                    return value;\n                }\n            } else {\n                return value;\n            }\n        });\n        if (json === undefined || json === null || this.isPrimitive(json)) {\n            return json;\n        } else if (json.hasOwnProperty('length') || json.forEach) {\n            // Array, already taken care of by yjQuery\n            return json.map((arrayElement: any) => this.makeCloneable(arrayElement)) as Cloneable;\n        } else {\n            // JSON\n            return Object.keys(json).reduce(\n                (clone, directKey) => {\n                    if (directKey.indexOf('$') !== 0) {\n                        clone[directKey] = this.makeCloneable(json[directKey]);\n                    }\n                    return clone;\n                },\n                {} as Payload\n            );\n        }\n    }\n\n    private isPrimitive(value: any) {\n        return typeof value === 'number' || typeof value === 'string' || typeof value === 'boolean';\n    }\n}\nexport const cloneableUtils = new CloneableUtils();\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nexport enum LogLevel {\n    log,\n    debug,\n    info,\n    warn,\n    error\n}\nexport class LogService {\n    private logLevel = LogLevel.info;\n\n    log(...msg: any[]) {\n        this._log(LogLevel.log, msg);\n    }\n\n    debug(...msg: any[]) {\n        this._log(LogLevel.debug, msg);\n    }\n\n    info(...msg: any[]) {\n        this._log(LogLevel.info, msg);\n    }\n\n    warn(...msg: any[]) {\n        this._log(LogLevel.warn, msg);\n    }\n\n    error(...msg: any[]) {\n        this._log(LogLevel.error, msg);\n    }\n\n    setLogLevel(logLevel: LogLevel) {\n        this.logLevel = logLevel;\n    }\n\n    private _log(requestLevel: LogLevel, msg: any[]) {\n        if (requestLevel >= this.logLevel) {\n            const method = LogLevel[requestLevel] as keyof Console;\n            if (this._console() && this._console()[method]) {\n                this._console()[method](...msg);\n            }\n        }\n    }\n\n    private _console(): Console {\n        return console;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { TypedMap } from '../dtos';\n/**\n * @ngdoc service\n * @name @smartutils.services:StringUtils\n *\n * @description\n * utility service around Strings.\n */\nexport class StringUtils {\n    /**\n     * @ngdoc service\n     * @name @smartutils.services:StringUtils#isBlank\n     * @methodOf @smartutils.services:StringUtils\n     *\n     * @description\n     * <b>isBlank</b> will check if a given string is undefined or null or empty.\n     * - returns TRUE for undefined / null/ empty string\n     * - returns FALSE otherwise\n     *\n     * @param {String} inputString any input string.\n     *\n     * @returns {boolean} true if the string is null else false\n     */\n    isBlank(value: any): boolean {\n        return (\n            typeof value === 'undefined' ||\n            value === null ||\n            value === 'null' ||\n            value.toString().trim().length === 0\n        );\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:StringUtils#regExpFactory\n     * @methodOf @smartutils.services:StringUtils\n     *\n     * @description\n     * <b>regExpFactory</b> will convert a given pattern into a regular expression.\n     * This method will prepend and append a string with ^ and $ respectively replaces\n     * and wildcards (*) by proper regex wildcards.\n     *\n     * @param {String} pattern any string that needs to be converted to a regular expression.\n     *\n     * @returns {RegExp} a regular expression generated from the given string.\n     *\n     */\n\n    regExpFactory(pattern: string): RegExp {\n        const onlyAlphanumericsRegex = new RegExp(/^[a-zA-Z\\d]+$/i);\n        const antRegex = new RegExp(/^[a-zA-Z\\d\\*]+$/i);\n\n        let regexpKey;\n        if (onlyAlphanumericsRegex.test(pattern)) {\n            regexpKey = ['^', '$'].join(pattern);\n        } else if (antRegex.test(pattern)) {\n            regexpKey = ['^', '$'].join(pattern.replace(/\\*/g, '.*'));\n        } else {\n            regexpKey = pattern;\n        }\n\n        return new RegExp(regexpKey, 'g');\n    }\n\n    /*\n     * formats HTML outputs typically from Node.outerHTML to easy string comparison by:\n     * - remove empty lines\n     * - remove spaces between tags\n     * - normalize remainign spaces to a single one\n     *\n     */\n    formatHTML(rawHTML: string): string {\n        return rawHTML\n            .replace(/^\\s*\\n/gm, '')\n            .replace(/\\>[\\t\\s]+\\</g, '><')\n            .replace(/[\\r\\n\\t\\s]+/g, ' ');\n    }\n\n    /**\n     * @ngdoc service\n     * @name @smartutils.services:StringUtils#sanitize\n     * @methodOf @smartutils.services:StringUtils\n     *\n     * @description\n     * <b>escapes any harmful scripting from a string, leaves innocuous HTML untouched/b>\n     * @param {String} a string that needs to be sanitized.\n     *\n     * @returns {String} the sanitized string.\n     *\n     */\n    sanitize = (str: string): string => {\n        /* The correct solution for this is to use Negative Lookbehind Regex expression which is available as part of ES2018. // str.replace(/(?:(?<!\\\\)([()]))/g, '\\\\$1')\n        But in order to support cross browser compatibility, the string is reversed and negative lookahead is used instead. */\n        return !this.isBlank(str)\n            ? str\n                  .split('')\n                  .reverse()\n                  .join('')\n                  .replace(/(?:(([()])(?!\\\\)))/g, '$1\\\\')\n                  .split('')\n                  .reverse()\n                  .join('')\n            : str;\n    };\n\n    /**\n     * @ngdoc service\n     * @name @smartutils.services:StringUtils#encode\n     * @methodOf @smartutils.services:StringUtils\n     *\n     * @description\n     * will return a encoded value for any JSON object passed as argument\n     * @param {object} JSON object to be encoded\n     */\n    encode = (object: any): any => {\n        /* first we use encodeURIComponent to get percent-encoded UTF-8,\n         * then we convert the percent encodings into raw bytes which\n         * can be fed into btoa.\n         * from https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\n         */\n        return btoa(\n            encodeURIComponent(JSON.stringify(object)).replace(\n                /%([0-9A-F]{2})/g,\n                function toSolidBytes(match: any, p1: string) {\n                    return String.fromCharCode(parseInt(p1, 16));\n                }\n            )\n        );\n    };\n\n    /**\n     * @ngdoc service\n     * @name @smartutils.services:StringUtils#replaceAll\n     * @methodOf @smartutils.services:StringUtils\n     *\n     * @description\n     * will return a string where all matches for the string regexps keys passed in the substitutionMap will have been substituted by correspoing values in the substitutionMap\n     * @param {string} string the string to substitute keys in object to be encoded\n     * @param {TypedMap<string>} substitutionMap the map of string regexp to string substitution values\n     * @returns {string} the substituted string\n     */\n    replaceAll = (str: string, substitutionMap: TypedMap<string>) => {\n        const regex = new RegExp(Object.keys(substitutionMap).join('|'), 'g');\n        return str.replace(regex, function(matched) {\n            return substitutionMap[matched];\n        });\n    };\n}\n\nexport const stringUtils = new StringUtils();\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { stringUtils } from './string-utils';\nimport { TypedMap } from '../dtos';\n\n/* tslint:disable:max-classes-per-file */\n\n/**\n * @ngdoc service\n * @name @smartutils.services:UrlUtils#URIBuilder\n *\n * @description\n * builder or URIs, build() method must be invoked to actually retrieve a URI\n *\n * @param {Object} modalStack, the $modalStack service of angular-ui.\n */\n\nexport class URIBuilder {\n    private readonly wholeWordMatch = '[\\\\w]+';\n\n    constructor(private uri: string) {}\n\n    build() {\n        return this.uri;\n    }\n\n    /**\n     * @ngdoc method\n     * @name  @smartutils.services:UrlUtils#URIBuilder#replaceParams\n     * @methodOf  @smartutils.services:UrlUtils#URIBuilder\n     *\n     * @description\n     * Substitute all \":\" prefixed placeholders in the full url with the matching values in the given params\n     * Substitute Non \":\" prefixed placeholders containg \"_\"\n     *\n     * @param {Object} params a map of placeholder names / values\n     */\n    replaceParams(params: TypedMap<string>): URIBuilder {\n        const clone = lodash.cloneDeep(this);\n        if (params) {\n            // order the keys by descending length\n            clone.uri = Object.keys(params)\n                .sort(function(a, b) {\n                    return b.length - a.length;\n                })\n                .reduce((tempURL: string, key: string) => {\n                    return this.substituteKeyForValue(tempURL, key, params[key]);\n                }, clone.uri);\n        }\n        return clone;\n    }\n\n    /**\n     * @ngdoc method\n     * @name  @smartutils.services:UrlUtils#URIBuilder#sanitize\n     * @methodOf  @smartutils.services:UrlUtils#URIBuilder\n     *\n     * @description\n     * removes unresolved \":\" prefixed placeholders from absolute path\n     */\n    sanitize(): URIBuilder {\n        const clone = lodash.cloneDeep(this);\n        const uriDomainAndPath: string[] | null = /(https?:\\/\\/[^\\/]*)(\\/.*)/.exec(clone.uri);\n        clone.uri = uriDomainAndPath == null ? clone.uri : uriDomainAndPath[2];\n        clone.uri = this.substituteKeyForValue(clone.uri, this.wholeWordMatch, '')\n            .replace(/\\/\\//, '/') // to replace double slash (api/:identifier/data?param=true) if :identifier is removed\n            .replace(/\\/\\?/, '?') // to replace slash question mark (api/:identifier?param=true) if :identifier is removed\n            .replace(/\\/$/, ''); // to remove trailing slash\n\n        clone.uri = uriDomainAndPath == null ? clone.uri : uriDomainAndPath[1] + clone.uri;\n        return clone;\n    }\n\n    private substituteKeyForValue(url: string, key: string, value: string): string {\n        url = url\n            .replace(new RegExp(':' + key + '/'), `${value || ''}/`)\n            .replace(new RegExp(':' + key + '$'), `${value || ''}`)\n            .replace(new RegExp(':' + key + '\\\\?'), `${value || ''}?`)\n            .replace(new RegExp(':' + key + '&'), `${value || ''}&`);\n\n        /*\n         * to cater for special case of smartedit\n         * where some non \":\" prefixed placeholders must be resolved too\n         * we limit it though to keys containing \"_\" (case for smartedit)\n         * since it would otherwise breaks most APIs patterns\n         */\n        if (key !== this.wholeWordMatch && key.includes('_')) {\n            const _uri = url.includes('?') ? url.substr(0, url.indexOf('?')) : url;\n            const uri = _uri.replace(new RegExp('\\\\b' + key + '\\\\b'), `${value || ''}`);\n            url = url.includes('?') ? uri + url.substr(url.indexOf('?')) : uri;\n        }\n        return url;\n    }\n}\n/**\n * @ngdoc service\n * @name @smartutils.services:UrlUtils\n *\n * @description\n * A collection of utility methods for manipulating URLs\n */\nexport class UrlUtils {\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:UrlUtils#getOrigin\n     * @methodOf @smartutils.services:UrlUtils\n     * @description\n     * returns document location origin\n     * Some browsers still do not support W3C document.location.origin, this function caters for gap.\n     * @param {String =} url optional any url\n     */\n    getOrigin(url?: string): string {\n        if (url) {\n            let link = document.createElement('a');\n            link.setAttribute('href', url);\n            const origin =\n                link.protocol + '//' + link.hostname + (link.port ? ':' + link.port : '');\n            // @ts-ignore\n            link = null; // GC\n            return origin;\n        } else {\n            return (\n                window.location.protocol +\n                '//' +\n                window.location.hostname +\n                (window.location.port ? ':' + window.location.port : '')\n            );\n        }\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:UrlUtils#getURI\n     * @methodOf @smartutils.services:UrlUtils\n     *\n     * @description\n     * Will return the URI part of a URL\n     * @param {String} url the URL the URI of which is to be returned\n     */\n    getURI(url: string): string {\n        return url && url.indexOf('?') > -1 ? url.split('?')[0] : url;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:UrlUtils#updateUrlParameter\n     * @methodOf @smartutils.services:UrlUtils\n     *\n     * @description\n     * Updates a URL to contain the query param and value provided. If already exists then it is updated,\n     * if it did not previously exist, then it will be added.\n     *\n     * @param {String} url The url to be updated (this param will not be modified)\n     * @param {String} key The query param key\n     * @param {String} value The query param value\n     *\n     * @returns {String} The url with updated key/value\n     */\n    updateUrlParameter(url: string, key: string, value: string): string {\n        const i = url.indexOf('#');\n        const hash = i === -1 ? '' : url.substr(i);\n        url = i === -1 ? url : url.substr(0, i);\n        const regex = new RegExp('([?&])' + key + '=.*?(&|$)', 'i');\n        const separator = url.indexOf('?') !== -1 ? '&' : '?';\n\n        if (url.match(regex)) {\n            url = url.replace(regex, '$1' + key + '=' + value + '$2');\n        } else {\n            url = url + separator + key + '=' + value;\n        }\n        return url + hash;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:UrlUtils#getQueryString\n     * @methodOf @smartutils.services:UrlUtils\n     *\n     * @description\n     * <b>getQueryString</b> will convert a given object into a query string.\n     *\n     * Below is the code snippet for sample input and sample output:\n     *\n     * <pre>\n     * var params = {\n     *  key1 : 'value1',\n     *  key2 : 'value2',\n     *  key3 : 'value3'\n     *  }\n     *\n     *  var output = getQueryString(params);\n     *\n     *  // The output is '?&key1=value1&key2=value2&key3=value3'\n     *\n     * </pre>\n     * @param {Object} params Object containing a list of params.\n     *\n     * @returns {String} a query string\n     */\n    getQueryString(params: any): string {\n        let queryString = '';\n        if (params) {\n            for (const param in params) {\n                if (params.hasOwnProperty(param)) {\n                    (lodash.isArray(params[param]) ? params[param] : [params[param]]).forEach(\n                        (value: any) => {\n                            queryString +=\n                                '&' + encodeURIComponent(param) + '=' + encodeURIComponent(value);\n                        }\n                    );\n                }\n            }\n        }\n        return '?' + (!stringUtils.isBlank(queryString) ? queryString.substring(1) : queryString);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:UrlUtils#parseQuery\n     * @methodOf @smartutils.services:UrlUtils\n     *\n     * @description\n     * <b>parseQuery</b> will convert a given query string to an object.\n     *\n     * Below is the code snippet for sample input and sample output:\n     *\n     * <pre>\n     * var query = '?key1=value1&key2=value2&key3=value3';\n     *\n     * var output = parseQuery(query);\n     *\n     * // The output is { key1 : 'value1', key2 : 'value2', key3 : 'value3' }\n     *\n     * </pre>\n     * @param {String} query String that needs to be parsed.\n     *\n     * @returns {Object} an object containing all params of the given query\n     */\n    parseQuery(str: any): JSON {\n        const objURL = {} as any;\n\n        str.replace(new RegExp('([^?=&]+)(=([^&]*))?', 'g'), function(\n            $0: any,\n            $1: any,\n            $2: any,\n            $3: any\n        ) {\n            objURL[$1] = $3;\n        });\n        return objURL;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:UrlUtils#getAbsoluteURL\n     * @methodOf @smartutils.services:UrlUtils\n     *\n     * @description\n     * Makes url absolute (with provided domain) if not yet\n     *\n     * @param {String} domain the domain with witch to prepend the url if it is not absolute\n     * @param {String} url the url to test\n     *\n     * @returns {String} url\n     */\n    getAbsoluteURL(domain: string, url: string): string {\n        // url regex\n        // scheme:[//[user[:password]@]host[:port]][/path][?query][#fragment]\n        const re = new RegExp(\n            '([a-zA-Z0-9]+://)' + // scheme\n            '([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?' + // user:password\n            '([a-zA-Z0-9.-]+)' + // hostname\n            '|([0-9]+\\\\.[0-9]+\\\\.[0-9]+\\\\.[0-9]+)' + // or ip\n            '(:[0-9]+)?' + // port\n                '(/.*)?' // everything else\n        );\n\n        return re.exec(url) ? url : domain + url;\n    }\n}\n\nexport const urlUtils = new UrlUtils();\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as CryptoJS from 'crypto-js';\n\n/**\n * @ngdoc service\n * @name @smartutils.services:CryptographicUtils\n *\n * @description\n * utility service around Cryptographic operations.\n */\nexport class CryptographicUtils {\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:CryptographicUtils#sha1Hash\n     * @methodOf @smartutils.services:CryptographicUtils\n     *\n     * @description\n     * A utility function that takes an input string and provides a cryptographic SHA1 hash value.\n     *\n     * @param {String} data The input string to be encrypted.\n     * @returns {String} the encrypted hashed result.\n     */\n    sha1Hash(data: string): string {\n        return CryptoJS.SHA1(data).toString();\n    }\n\n    aesBase64Encrypt(base64EncodedMessage: string, secretPassphrase: string): string {\n        return CryptoJS.AES.encrypt(\n            CryptoJS.enc.Base64.parse(base64EncodedMessage),\n            secretPassphrase\n        ).toString();\n    }\n\n    aesDecrypt(encryptedMessage: string, secretPassphrase: string): string {\n        return CryptoJS.AES.decrypt(encryptedMessage, secretPassphrase).toString(CryptoJS.enc.Utf8);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lo from 'lodash';\nimport { TypedMap } from '../dtos';\n\n/**\n * @ngdoc service\n * @name @smartutils.services:FunctionsUtils\n *\n * @description\n * utility service around Functions.\n */\nexport class FunctionsUtils {\n    /*\n     * regexp matching function(a, $b){} and function MyFunction(a, $b){}\n     */\n    private signatureArgsRegexp: RegExp = /function[\\s\\w]*\\(([\\w\\s\\$,]*)\\)[\\s]*{/;\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:FunctionsUtils#isEmpty\n     * @methodOf @smartutils.services:FunctionsUtils\n     *\n     * @description\n     * Will determine whether a function body is empty or should be considered empty for proxying purposes\n     *\n     * @param {Function} func, the function to evaluate\n     * @returns {Boolean} a boolean.\n     */\n    isEmpty(func: (...args: any[]) => any) {\n        const match = func.toString().match(/\\{([\\s\\S]*)\\}/m);\n        return (\n            !match ||\n            match[1].trim() === '' ||\n            /(proxyFunction)/g.test(func.toString().replace(/\\s/g, ''))\n        );\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:FunctionsUtils#getArguments\n     * @methodOf @smartutils.services:FunctionsUtils\n     *\n     * @description\n     * Returns the array of string arguments of the given function signature\n     *\n     * @param {Function} func the function to analyze\n     * @returns {string[]} an array of string arguments\n     */\n    getArguments(func: (...args: any[]) => any) {\n        const exec = this.signatureArgsRegexp.exec(func.toString());\n        if (exec) {\n            return exec[1].replace(/\\s/g, '').split(',');\n        } else {\n            throw new Error(`failed to retrieve arguments list of ${func}`);\n        }\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:FunctionsUtils#hasArguments\n     * @methodOf @smartutils.services:FunctionsUtils\n     *\n     * @description\n     * Determines whether a given function (anonymous or not) has arguments in it signature\n     *\n     * @param {Function} func the function to analyze\n     * @returns {boolean} true if the function has signature arguments\n     */\n    hasArguments(func: (...args: any[]) => any) {\n        const exec = this.signatureArgsRegexp.exec(func.toString());\n        if (exec) {\n            return !lo.isEmpty(exec[1]);\n        } else {\n            throw new Error(`failed to retrieve arguments list of ${func}`);\n        }\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:FunctionsUtils#getConstructorName\n     * @methodOf @smartutils.services:FunctionsUtils\n     *\n     * @description\n     * Returns the constructor name in a cross browser fashion\n     *\n     * @param {Function} func the function to analyze\n     * @returns {string} the constructor name\n     */\n    getConstructorName(func: new (...args: any[]) => any) {\n        let name = func.name;\n        if (!name) {\n            // IE does not support constructor.name\n            const exec = /function (\\$?\\w+)\\s*\\(/.exec(func.toString());\n            if (exec) {\n                name = exec[1];\n            } else {\n                throw new Error('[FunctionsUtils] - Cannot get name from invalid constructor.');\n            }\n        }\n        return name;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:FunctionsUtils#getInstanceConstructorName\n     * @methodOf @smartutils.services:FunctionsUtils\n     *\n     * @description\n     * Returns the constructor name in a cross browser fashion of a class instance\n     *\n     * @param {Object} instance instance class to analyze\n     * @returns {string} the constructor name of the instance\n     */\n    getInstanceConstructorName(instance: object): string {\n        return this.getConstructorName(Object.getPrototypeOf(instance).constructor);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:FunctionsUtils#extendsConstructor\n     * @methodOf @smartutils.services:FunctionsUtils\n     *\n     * @description\n     * Overrides a given constructor with a new constructor body. The resulting constructor will share the same prototype as the original one.\n     *\n     * @param {(...args:any[]) => T} originalConstructor the original constructor to override\n     * @returns {(...args:any[]) => T} newConstructorBody the new constructor body to execute in the override. It may or may not return an instance. Should it return an instance, the latter will be returned by the override.\n     */\n    extendsConstructor<T>(\n        originalConstructor: (...args: any[]) => T,\n        newConstructorBody: (...args: any[]) => T\n    ): any {\n        // the new constructor behaviour\n        const newConstructor: any = function(...args: any[]) {\n            const result = newConstructorBody.apply(this, args);\n            if (result) {\n                return result;\n            }\n        };\n        // copy prototype so intanceof operator still works\n        newConstructor.prototype = originalConstructor.prototype;\n\n        return newConstructor;\n    }\n\n    /** @internal */\n    isUnitTestMode(): boolean {\n        /* forbiddenNameSpaces window._:false */\n        return typeof window.__karma__ !== 'undefined';\n    }\n\n    convertToArray<T = string>(obj: TypedMap<T>): { key: string; value: T }[] {\n        return Object.keys(obj).reduce(\n            (acc: { key: string; value: T }[], key: string) => [\n                ...(acc || []),\n                { key, value: obj[key] }\n            ],\n            []\n        );\n    }\n}\n\nexport const functionsUtils = new FunctionsUtils();\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { NgZone } from '@angular/core';\nexport const commonNgZone = new NgZone({ enableLongStackTrace: false });\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { NgZone } from '@angular/core';\nimport { commonNgZone } from './common-ng-zone';\n\ndeclare global {\n    interface Window {\n        Zone: any;\n        __karma__: any;\n    }\n}\n\n/**\n * @ngdoc service\n * @name @smartutils.services:WindowUtils\n *\n * @description\n * A collection of utility methods for windows.\n */\nexport class WindowUtils {\n    static SMARTEDIT_IFRAME_ID = 'ySmartEditFrame';\n\n    constructor(private ngZone?: NgZone) {\n        this.ngZone = this.ngZone || commonNgZone;\n    }\n\n    getWindow(): Window {\n        return window;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:WindowUtils#isIframe\n     * @methodOf @smartutils.services:WindowUtils\n     * @description\n     * <b>isIframe</b> will check if the current document is in an iFrame.\n     * @returns {boolean} true if the current document is in an iFrame.\n     */\n    isIframe = () => {\n        return this.getWindow().top !== this.getWindow();\n    };\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:WindowUtils#runTimeoutOutsideAngular\n     * @methodOf @smartutils.services:WindowUtils\n     *\n     * @description\n     * Runs a given timeout outside Angular and attaches its callback to Angular\n     * this is usefull in order not to be blocking from an e2e stand point\n     *\n     * @param {string} callback argument less callback to execute when timeout.\n     * @param {number} timeout the delay in milliseconds until timeout\n     */\n    runTimeoutOutsideAngular(callback: () => void, timeout?: number): number {\n        const ngZone = this.ngZone;\n        if (ngZone !== undefined) {\n            return ngZone.runOutsideAngular<number>(() => {\n                return (setTimeout(() => {\n                    return ngZone.run(callback);\n                }, timeout) as unknown) as number;\n            });\n        } else {\n            throw new Error(\n                'this instance of WindowUtils has not been instantiated through Angular 7 DI'\n            );\n        }\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:WindowUtils#runIntervalOutsideAngular\n     * @methodOf @smartutils.services:WindowUtils\n     *\n     * @description\n     * Runs a given interval outside Angular and attaches its callback to Angular\n     * this is usefull in order not to be blocking from an e2e stand point\n     *\n     * @param {string} callback argument less callback to execute when timeout.\n     * @param {number} timeout the delay in milliseconds until timeout\n     */\n    runIntervalOutsideAngular(callback: () => void, timeout?: number): number {\n        const ngZone = this.ngZone;\n        if (ngZone === undefined) {\n            throw new Error(\n                'this instance of WindowUtils has not been instantiated through Angular 7 DI'\n            );\n        }\n        return ngZone.runOutsideAngular<number>(() => {\n            return (setInterval(() => {\n                return ngZone.run(callback);\n            }, timeout) as unknown) as number;\n        });\n    }\n}\n\nexport const windowUtils = new WindowUtils();\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport {\n    APP_BOOTSTRAP_LISTENER,\n    APP_INITIALIZER,\n    ComponentRef,\n    Injectable,\n    Provider,\n    ValueProvider\n} from '@angular/core';\nimport { Cloneable, TypedMap } from '../dtos';\n\n/*\n * internal utility service to handle ES6 modules\n */\n/* forbiddenNameSpaces angular.module:false */\n/** @internal */\n@Injectable()\nexport class ModuleUtils {\n    public initialize(useFactory: (...args: any[]) => void, deps: any[] = []): Provider {\n        return {\n            provide: APP_INITIALIZER,\n            useFactory() {\n                useFactory.apply(undefined, Array.prototype.slice.call(arguments));\n                return (component: ComponentRef<any>) => {\n                    // an initializer useFactory must return a function\n                };\n            },\n            deps,\n            multi: true\n        };\n    }\n\n    public bootstrap(useFactory: (...args: any[]) => void, deps: any[] = []): Provider {\n        return {\n            provide: APP_BOOTSTRAP_LISTENER,\n            useFactory() {\n                useFactory.apply(undefined, Array.prototype.slice.call(arguments));\n                return (component: ComponentRef<any>) => {\n                    // an initializer useFactory must return a function\n                };\n            },\n            deps,\n            multi: true\n        };\n    }\n\n    provideValues(_constants?: TypedMap<Cloneable | RegExp>): ValueProvider[] {\n        const constants = _constants || {};\n        return Object.keys(constants).map((key) => {\n            return {\n                provide: key,\n                useValue: constants[key]\n            };\n        });\n    }\n}\n\nexport const moduleUtils = new ModuleUtils();\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { FunctionsUtils } from '../utils';\nimport { Class } from '../types';\nimport { TypedMap } from '../dtos';\nimport {} from 'reflect-metadata';\n\n/**\n * @ngdoc object\n * @name @smartutils.object:MethodAnnotation\n *\n * @description\n * Shorthand signature of a {@link https://www.typescriptlang.org/docs/handbook/decorators.html Typescript Decorator} function for methods\n * used by {@link @smartutils.services:AnnotationService AnnotationService}.\n * @param {any} target the instance the method of which is annotated\n * @param {any} propertyName the name of the method that is annotated\n * @param {any} originalMethod the original method being annotated, it is prebound to the instance\n * @returns {any} the final return value of the proxied method.\n * It is left to implementers to discard, modify, reuse the original method.\n */\nexport type MethodAnnotation = (\n    target: any,\n    propertyName: string,\n    originalMethod: (...x: any[]) => any,\n    ...invocationArguments: any[]\n) => any;\n/**\n * @ngdoc object\n * @name @smartutils.object:MethodAnnotationFactory\n *\n * @description\n * A {@link @smartutils.object:MethodAnnotation MethodAnnotation} factory\n * used by {@link @smartutils.services:AnnotationService AnnotationService}.\n * @param {...any[]} factoryArguments the factory arguments\n * @returns {MethodAnnotation} {@link @smartutils.object:MethodAnnotation MethodAnnotation}\n */\nexport type MethodAnnotationFactory = (...factoryArguments: any[]) => MethodAnnotation;\n/**\n * @ngdoc object\n * @name @smartutils.object:ClassAnnotation\n *\n * @description\n * Shorthand signature of a {@link https://www.typescriptlang.org/docs/handbook/decorators.html Typescript Decorator} function for classes\n * used by {@link @smartutils.services:AnnotationService AnnotationService}.\n * @param {any} instance an instance of the class which is annotated\n * @param {(...x: any[]) => any} originalConstructor the prebound original constructor of the instance\n * @param {...any[]} invocationArguments the arguments with which the constructor is invoked\n * @returns {any} void or a new instance.\n * It is left to implementers to discard, modify, or reuse the original constructor then not to return or return a new instance.\n */\nexport type ClassAnnotation = (\n    instance: any,\n    originalConstructor: (...x: any[]) => any,\n    ...invocationArguments: any[]\n) => any;\n/**\n * @ngdoc object\n * @name @smartutils.object:ClassAnnotationFactory\n *\n * @description\n * A {@link @smartutils.object:ClassAnnotation ClassAnnotation} factory\n * used by {@link @smartutils.services:AnnotationService AnnotationService}.\n * @param {...any[]} factoryArguments the factory arguments\n * @returns {ClassAnnotation} {@link @smartutils.object:ClassAnnotation ClassAnnotation}\n */\nexport type ClassAnnotationFactory = (...x: any[]) => ClassAnnotation;\n\n/** @internal */\nenum annotationType {\n    Class = 'ClassAnnotation',\n    Method = 'MethodAnnotation'\n}\n\n/**\n * @ngdoc service\n * @name @smartutils.services:AnnotationService\n *\n * @description\n * Utility service to declare and consume method level and class level {@link https://www.typescriptlang.org/docs/handbook/decorators.html Typescript decorator factories}.\n * <br/>Since Decorator is a reserved word in Smartedit, Typescript Decorators are called as Annotations.\n */\nexport class AnnotationService {\n    public readonly INJECTABLE_NAME_KEY = 'getInjectableName';\n    public readonly ORIGINAL_CONSTRUCTOR_KEY = 'originalConstructor';\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AnnotationService#getClassAnnotations\n     * @methodOf @smartutils.services:AnnotationService\n     *\n     * @description\n     * Retrieves an object with all the string-indexed annotations defined on the given class target\n     * @param {any} target The typescript class on which class annotations are defined\n     * @returns {[index: string]: any} an object contains string-indexed annotation name and payload\n     */\n    getClassAnnotations = lodash.memoize(this.getClassAnnotationsLogic);\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AnnotationService#getMethodAnnotations\n     * @methodOf @smartutils.services:AnnotationService\n     *\n     * @description\n     * Retrieves an object with all the string indexed annotations defined on the given class method\n     * @param {any} target The typescript class to the inspected\n     * @param {string} propertyName The name of the method on which annotations are defined\n     * @returns {[index: string]: any} an object contains string-indexed annotation name and payload\n     */\n    getMethodAnnotations = lodash.memoize(this.getMethodAnnotationsLogic, function(\n        target: any,\n        propertyName: string\n    ) {\n        return JSON.stringify(target.prototype) + propertyName;\n    });\n\n    private functionsUtils: FunctionsUtils = new FunctionsUtils();\n\n    private annotationFactoryMap = {} as TypedMap<\n        MethodAnnotationFactory | ClassAnnotationFactory | null\n    >;\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AnnotationService#getClassAnnotation\n     * @methodOf @smartutils.services:AnnotationService\n     *\n     * @description\n     * Retrieves arguments of class annotation under a given annotation name\n     * @param {any} target The typescript class on which class annotation is defined\n     * @param {(args?: any) => ClassDecorator} annotation The type of the class annotation\n     * @returns {any} the payload passed to the annotation\n     */\n    getClassAnnotation(target: any, annotation: (args?: any) => ClassDecorator): any {\n        const annotationMap: TypedMap<any> = this.getClassAnnotations(target);\n        const annotationName: string = (annotation as any).annotationName;\n        if (annotationMap) {\n            if (annotationName in annotationMap) {\n                return annotationMap[annotationName];\n            }\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AnnotationService#getMethodAnnotation\n     * @methodOf @smartutils.services:AnnotationService\n     *\n     * @description\n     * Retrieves arguments of method annotation for a given typescript class\n     * @param {any} target The typescript class\n     * @param {string} propertyName The name of the method on which annotation is defined\n     * @param {(args?: any) => MethodDecorator)} annotation The type of the method annotation\n     * @returns {any} the payload passed to the annotation\n     */\n    getMethodAnnotation(\n        target: any,\n        propertyName: string,\n        annotation: (args?: any) => MethodDecorator\n    ): any {\n        const annotationMap: TypedMap<any> = this.getMethodAnnotations(target, propertyName);\n        const annotationName: string = (annotation as any).annotationName;\n        if (annotationMap) {\n            if (annotationName in annotationMap) {\n                return annotationMap[annotationName];\n            }\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AnnotationService#hasClassAnnotation\n     * @methodOf @smartutils.services:AnnotationService\n     *\n     * @description\n     * Determines whether a given class target has given annotation name defined or not\n     * @param {any} target The typescript class on which class annotation is defined\n     * @param {(args?: any) => ClassDecorator} annotation The type of the class annotation\n     * @returns {boolean} true if a given target has given annotation name. Otherwise false.\n     */\n    hasClassAnnotation(target: any, annotation: (args?: any) => ClassDecorator): boolean {\n        const annotationMap: TypedMap<any> = this.getClassAnnotations(target);\n        return (annotation as any).annotationName in annotationMap ? true : false;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AnnotationService#hasMethodAnnotation\n     * @methodOf @smartutils.services:AnnotationService\n     *\n     * @description\n     * Determines whether a given method name has given annotation name defined or not under a given typescript class\n     * @param {any} target The typescript class object\n     * @param {string} propertyName The name of the method on which annotation is defined\n     * @param {(args?: any) => MethodDecorator} annotation The type of the method annotation\n     * @returns {boolean} true if a given method name has given annotation name. Otherwise false.\n     */\n    hasMethodAnnotation(\n        target: any,\n        propertyName: string,\n        annotation: (args?: any) => MethodDecorator\n    ): boolean {\n        const annotationMap: TypedMap<any> = this.getMethodAnnotations(target, propertyName);\n        return (annotation as any).annotationName in annotationMap ? true : false;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AnnotationService#setClassAnnotationFactory\n     * @methodOf @smartutils.services:AnnotationService\n     *\n     * @description\n     * Registers a {@link @smartutils.object:ClassAnnotationFactory ClassAnnotationFactory} under a given name.\n     * <br/>Typically, in order for the ClassAnnotationFactory to benefit from Angular dependency injection, this method will be called within an Angular factory.\n     * @param {string} name the name of the factory.\n     * @returns {ClassAnnotationFactory} a {@link @smartutils.object:ClassAnnotationFactory ClassAnnotationFactory}\n     */\n    setClassAnnotationFactory(\n        name: string,\n        annotationFactory: ClassAnnotationFactory | null\n    ): ClassAnnotationFactory | null {\n        this.annotationFactoryMap[name] = annotationFactory;\n        return annotationFactory;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AnnotationService#getClassAnnotationFactory\n     * @methodOf @smartutils.services:AnnotationService\n     *\n     * @description\n     * Retrieves a {@link @smartutils.object:ClassAnnotationFactory ClassAnnotationFactory}\n     * previously registered under the given name:\n     *\n     * <pre>\n     *   export const GatewayProxied = annotationService.getClassAnnotationFactory('GatewayProxied');\n     * </pre>\n     *\n     * @param {string} name The name of the factory\n     * @returns {ClassAnnotationFactory} a {@link @smartutils.object:ClassAnnotationFactory ClassAnnotationFactory}\n     */\n\n    getClassAnnotationFactory(name: string): (...args: any[]) => ClassDecorator {\n        const instance = this;\n\n        const classAnnotationFactory = function(...factoryArgument: any[]) {\n            return function(originalConstructor: any) {\n                const newConstructor = instance.functionsUtils.extendsConstructor(\n                    originalConstructor,\n                    function(...args: any[]) {\n                        const annotationFactory = instance.annotationFactoryMap[\n                            name\n                        ] as ClassAnnotationFactory;\n                        if (annotationFactory) {\n                            // Note: Before we used to bind originalConstructor.bind(this). However, it had to be left up to the caller\n                            // since that causes problems in IE; when a function is bound in IE, the browser wraps it in a function with\n                            // native code, making it impossible to retrieve its name.\n                            const result = annotationFactory(factoryArgument)(\n                                this,\n                                originalConstructor,\n                                args\n                            );\n                            if (result) {\n                                return result;\n                            }\n                        } else {\n                            throw new Error(\n                                `annotation '${name}' is used on '${\n                                    originalConstructor.name\n                                }' but its ClassAnnotationFactory may not have been added to the dependency injection`\n                            );\n                        }\n                    }\n                );\n\n                /*\n                 * enable Angular and AngularJS to inject this new constructor even though it has an empty signature\n                 * by copying $inject property and DI related Angular metatdata\n                 * For idempotency purposes we copy all properties anyways\n                 */\n                lodash.merge(newConstructor, originalConstructor);\n                /*\n                 * some properties set by Angular are not enumerable and yet contain\n                 * such information as @Inject \"metadata\" necessary for DI\n                 */\n                newConstructor.__annotations__ = originalConstructor.__annotations__;\n                newConstructor.__parameters__ = originalConstructor.__parameters__;\n                newConstructor.__prop__metadata__ = originalConstructor.__prop__metadata__;\n\n                /*\n                 * copying such metadata as design:paramtypes necessary for DI\n                 */\n                Reflect.getMetadataKeys(originalConstructor).forEach((key) => {\n                    Reflect.defineMetadata(\n                        key,\n                        Reflect.getMetadata(key, originalConstructor),\n                        newConstructor\n                    );\n                });\n\n                const rootOriginalConstructor = instance.getOriginalConstructor(\n                    originalConstructor\n                );\n\n                Reflect.defineMetadata(\n                    instance.ORIGINAL_CONSTRUCTOR_KEY,\n                    rootOriginalConstructor,\n                    newConstructor\n                );\n\n                Reflect.defineMetadata(\n                    annotationType.Class + ':' + name,\n                    factoryArgument,\n                    rootOriginalConstructor\n                );\n\n                // override original constructor\n                return newConstructor;\n            };\n        };\n        (classAnnotationFactory as any).annotationName = name;\n        return classAnnotationFactory;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AnnotationService#setMethodAnnotationFactory\n     * @methodOf @smartutils.services:AnnotationService\n     *\n     * @description\n     * Registers a {@link @smartutils.object:MethodAnnotationFactory MethodAnnotationFactory} under a given name.\n     * <br/>Typically, in order for the MethodAnnotationFactory to benefit from Angular dependency injection, this method will be called within an Angular factory.\n     * @param {string} name The name of the factory.\n     * @returns {MethodAnnotationFactory} a {@link @smartutils.object:MethodAnnotationFactory MethodAnnotationFactory}\n     */\n    setMethodAnnotationFactory(\n        name: string,\n        annotationFactory: MethodAnnotationFactory | null\n    ): MethodAnnotationFactory | null {\n        this.annotationFactoryMap[name] = annotationFactory;\n        return annotationFactory;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AnnotationService#getMethodAnnotationFactory\n     * @methodOf @smartutils.services:AnnotationService\n     *\n     * @description\n     * Retrieves a method level {@link @smartutils.object:MethodAnnotationFactory MethodAnnotationFactory}\n     * previously registered under the given name:\n     *\n     * <pre>\n     *   export const Cached = annotationService.getMethodAnnotationFactory('Cached');\n     * </pre>\n     *\n     * @param {string} name the name of the factory.\n     * @returns {MethodAnnotationFactory} a {@link @smartutils.object:MethodAnnotationFactory MethodAnnotationFactory}.\n     */\n    getMethodAnnotationFactory(name: string) {\n        const instance = this;\n\n        const methodAnnotationFactory = function(...factoryArgument: any[]) {\n            /*\n             * when decorating an abstract class, strangely enough target is an instance of the abstract class\n             * we need pass \"this\" instead to the annotationFactory invocation\n             */\n            return (\n                target: any,\n                propertyName: string,\n                descriptor: TypedPropertyDescriptor<(...x: any[]) => any>\n            ) => {\n                const originalMethod = descriptor.value;\n\n                descriptor.value = function() {\n                    const annotationFactory: MethodAnnotationFactory = instance\n                        .annotationFactoryMap[name] as MethodAnnotationFactory;\n\n                    if (annotationFactory) {\n                        return originalMethod\n                            ? annotationFactory(factoryArgument)(\n                                  this,\n                                  propertyName,\n                                  originalMethod.bind(this),\n                                  arguments\n                              )\n                            : undefined;\n                    } else {\n                        throw new Error(\n                            `annotation '${name}' is used but its MethodAnnotationFactory may not have been added to the dependency injection`\n                        );\n                    }\n                };\n\n                Reflect.defineMetadata(\n                    annotationType.Method + ':' + name,\n                    factoryArgument,\n                    target,\n                    propertyName\n                );\n            };\n        };\n        (methodAnnotationFactory as any).annotationName = name;\n        return methodAnnotationFactory;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AnnotationService#getOriginalConstructor\n     * @methodOf @smartutils.services:AnnotationService\n     *\n     * @description\n     * Given a class constructor, returns the original constructor of it prior to any class level\n     * proxying by annotations declared through {@link @smartutils.services:AnnotationService AnnotationService}\n     *\n     * @param {Class} target the constructor\n     */\n    public getOriginalConstructor(target: any): Class {\n        return Reflect.getMetadata(this.ORIGINAL_CONSTRUCTOR_KEY, target) || target;\n    }\n\n    private getClassAnnotationsLogic(target: any): TypedMap<any> {\n        const originalConstructor = this.getOriginalConstructor(target);\n        const annotationMap: TypedMap<any> = {};\n\n        Reflect.getMetadataKeys(originalConstructor)\n            .filter((key: string) => key.toString().startsWith(annotationType.Class))\n            .map((key: string) => {\n                annotationMap[key.split(':')[1]] = Reflect.getMetadata(key, originalConstructor);\n            });\n        return annotationMap;\n    }\n\n    private getMethodAnnotationsLogic(target: any, propertyName: string): TypedMap<any> {\n        const annotationMap: TypedMap<any> = {};\n\n        Reflect.getMetadataKeys(target.prototype, propertyName)\n            .filter((key: string) => key.toString().startsWith(annotationType.Method))\n            .map((key: string) => {\n                annotationMap[key.split(':')[1]] = Reflect.getMetadata(\n                    key,\n                    target.prototype,\n                    propertyName\n                );\n            });\n\n        return annotationMap;\n    }\n}\n\nexport const annotationService: AnnotationService = new AnnotationService();\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { Injectable } from '@angular/core';\nimport { LogService } from '../services/log.service';\n\nexport interface Deferred<T> {\n    promise: Promise<T>;\n    resolve: (value?: T) => void;\n    reject: (value?: any) => void;\n}\n/**\n * @ngdoc service\n * @name @smartutils.services:PromiseUtils\n *\n * @description\n * utility service around ES6 Promises.\n */\n@Injectable()\nexport class PromiseUtils {\n    static logService = new LogService();\n\n    private WAIT_TIMEOUT = 4;\n    private FAILURE_TIMEOUT = 2000;\n\n    toPromise<T>(\n        method: (...args: any[]) => T,\n        context?: any\n    ): (...innerArgs: any[]) => Promise<T> {\n        return function() {\n            try {\n                return Promise.resolve(\n                    method.apply(context, Array.prototype.slice.call(arguments))\n                );\n            } catch (e) {\n                PromiseUtils.logService.error(\n                    'execution of a method that was turned into a promise failed'\n                );\n                PromiseUtils.logService.error(e);\n                return Promise.reject(e);\n            }\n        };\n    }\n\n    promise<T>(\n        executor: (\n            resolve: (value?: T | PromiseLike<T>) => void,\n            reject: (reason?: any) => void\n        ) => void\n    ): Promise<T> {\n        return this.handlePromiseRejections(new Promise(executor));\n    }\n\n    defer<T>(): Deferred<T> {\n        let pResolve: (value?: T | PromiseLike<T>) => void;\n        let pReject: (reason?: any) => void;\n\n        const deferred: Deferred<T> = {\n            promise: this.promise(\n                (\n                    _resolve: (value?: T | PromiseLike<T>) => void,\n                    _reject: (reason?: any) => void\n                ) => {\n                    pResolve = _resolve;\n                    pReject = _reject;\n                }\n            ),\n\n            resolve(value: T | undefined) {\n                pResolve(value);\n            },\n\n            reject(reason: any) {\n                pReject(reason);\n            }\n        };\n\n        return deferred;\n    }\n\n    async sleep(ms: number) {\n        return new Promise((resolve) => setTimeout(resolve, ms));\n    }\n\n    handlePromiseRejections = <T>(promise: Promise<T>): Promise<T> => {\n        const oldThen = promise.then;\n        const defaultFailureCallback = this.defaultFailureCallback;\n\n        (promise as any).then = function(\n            successCallback: (value: T) => T | PromiseLike<T>,\n            _failureCallback: any\n        ) {\n            const failureCallback = _failureCallback ? _failureCallback : defaultFailureCallback;\n            return oldThen.call(this, successCallback, failureCallback);\n        };\n        return promise;\n    };\n\n    isAjaxError(error: any) {\n        return error.hasOwnProperty('headers');\n    }\n\n    waitOnCondition(\n        condition: () => boolean,\n        callback: () => any,\n        errorMessage: string,\n        elapsedTime: number = 0\n    ) {\n        setTimeout(() => {\n            if (condition()) {\n                callback();\n            } else if (elapsedTime < this.FAILURE_TIMEOUT) {\n                this.waitOnCondition(\n                    condition,\n                    callback,\n                    errorMessage,\n                    elapsedTime + this.WAIT_TIMEOUT\n                );\n            } else {\n                throw new Error(`PromiseUtils: ${errorMessage}`);\n            }\n        }, this.WAIT_TIMEOUT);\n    }\n\n    async resolveToCallbackWhenCondition<T>(\n        condition: () => boolean,\n        callback: () => T,\n        errorMessage?: string\n    ): Promise<T> {\n        return new Promise<T>((resolve) => {\n            this.waitOnCondition(\n                condition,\n                () => resolve(callback()),\n                errorMessage ? errorMessage : 'condition for promise resolution was never met'\n            );\n        });\n    }\n\n    private defaultFailureCallback = (error: any) => {\n        if (undefined !== error && null !== error && 'canceled' !== error) {\n            if (lodash.isPlainObject(error)) {\n                if (!this.isAjaxError(error)) {\n                    PromiseUtils.logService.error(\n                        `exception caught in promise: ${JSON.stringify(error)}`\n                    );\n                }\n            } else if (!lodash.isBoolean(error)) {\n                PromiseUtils.logService.error(error);\n            }\n        }\n        PromiseUtils.logService.error(`defaultFailureCallback:`, error);\n        return Promise.reject(error);\n    };\n}\n\nexport const promiseUtils = new PromiseUtils();\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n\n/**\n * @ngdoc service\n * @name @smartutils.services:BooleanUtils\n *\n * @description\n * utility service around booleans.\n */\nexport class BooleanUtils {\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:BooleanUtils#areAllTruthy\n     * @methodOf @smartutils.services:BooleanUtils\n     * @description\n     * Iterate on the given array of Functions, return true if each function returns true\n     *\n     * @param {Array} arguments the functions\n     *\n     * @return {Boolean} true if every function returns true\n     */\n    areAllTruthy(...functions: ((...args: any[]) => boolean)[]): (...args: any[]) => boolean {\n        return function(): boolean {\n            const args = arguments;\n            return functions.every((f: any) => {\n                return f && f.apply(f, args);\n            });\n        };\n    }\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:BooleanUtils#isAnyTruthy\n     * @methodOf @smartutils.services:BooleanUtils\n     *\n     * @description\n     * Iterate on the given array of Functions, return true if at least one function returns true\n     *\n     * @param {Array} arguments the functions\n     *\n     * @return {Boolean} true if at least one function returns true\n     */\n    isAnyTruthy(...functions: ((...args: any[]) => boolean)[]): (...args: any[]) => boolean {\n        return function(): boolean {\n            const args = arguments;\n            return functions.some((f: any) => {\n                return f && f.apply(f, args);\n            });\n        };\n    }\n}\n\nexport const booleanUtils = new BooleanUtils();\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport {\n    HttpErrorResponse,\n    HttpEvent,\n    HttpHeaders,\n    HttpParams,\n    HttpRequest,\n    HttpResponse,\n    HttpResponseBase\n} from '@angular/common/http';\nimport { from, throwError, Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Payload, TypedMap } from '../dtos';\nimport { stringUtils } from './string-utils';\n\nexport class HttpUtils {\n    isGET(request: HttpRequest<any>): boolean {\n        return request.method === 'GET';\n    }\n\n    isRequestOfAccept(request: HttpRequest<any>, accept: string): boolean {\n        return (\n            !!request.headers &&\n            !!request.headers.get('Accept') &&\n            (request.headers.get('Accept') || '').includes(accept)\n        );\n    }\n\n    isResponseOfContentType(response: HttpResponseBase, contentType: string): boolean {\n        return (\n            !!response.headers &&\n            !!response.headers.get('Content-type') &&\n            (response.headers.get('Content-type') || '').indexOf(contentType) === 0\n        );\n    }\n\n    isHTMLRequest(request: HttpRequest<any>, response?: HttpResponseBase) {\n        return (\n            this.isGET(request) &&\n            (this.isRequestOfAccept(request, 'text/html') ||\n                /.+\\.html$/.test(request.url) ||\n                /.+\\.html\\?/.test(request.url))\n        );\n    }\n\n    isJSONRequest(request: HttpRequest<any>, response?: HttpResponseBase) {\n        return (\n            this.isGET(request) &&\n            ((response && this.isResponseOfContentType(response, 'json')) ||\n                /.+\\.json$/.test(request.url))\n        );\n    }\n\n    isJSRequest(request: HttpRequest<any>) {\n        return this.isGET(request) && /.+\\.js$/.test(request.url);\n    }\n\n    isCRUDRequest(request: HttpRequest<any>, response?: HttpErrorResponse) {\n        return (\n            !this.isHTMLRequest(request, response) &&\n            !this.isJSONRequest(request, response) &&\n            !this.isJSRequest(request)\n        );\n    }\n\n    transformHttpParams(params: HttpParams, substitutionMap: TypedMap<string>): HttpParams {\n        return new HttpParams({\n            fromObject: JSON.parse(\n                stringUtils.replaceAll(\n                    JSON.stringify(this.copyHttpParamsOrHeaders(params)),\n                    substitutionMap\n                )\n            )\n        });\n    }\n\n    copyHttpParamsOrHeaders(params: HttpParams | HttpHeaders): TypedMap<string | string[]> {\n        const copy = {} as TypedMap<string | string[]>;\n        params.keys().forEach((key) => {\n            const values = params.getAll(key);\n            if (values !== null) {\n                copy[key] = values.length > 1 ? values : values[0];\n            }\n        });\n        return copy;\n    }\n\n    buildHttpResponse<T = any>(\n        originalRequest: HttpRequest<T>,\n        _statusAndPayload:\n            | [number, Payload | Payload[]]\n            | PromiseLike<[number, Payload | Payload[]]>\n    ): Observable<HttpEvent<any> | never> {\n        const statusAndPayloadPromise = Promise.resolve(_statusAndPayload);\n\n        return from(statusAndPayloadPromise).pipe(\n            switchMap((statusAndPayload: [number, Payload | Payload[]]) => {\n                const status = statusAndPayload[0];\n                const body = statusAndPayload[1];\n                const requestClone = originalRequest.clone({\n                    body\n                });\n                lodash.merge(requestClone, { status });\n\n                if (200 <= status && status < 300) {\n                    return new Observable<HttpEvent<any>>((ob) => {\n                        ob.next(new HttpResponse(requestClone));\n                    });\n                } else {\n                    return throwError(\n                        new HttpErrorResponse(lodash.merge(requestClone, { error: body }))\n                    );\n                }\n            })\n        );\n    }\n}\n\nexport const httpUtils = new HttpUtils();\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n\nimport { ControlValueAccessor } from '@angular/forms';\n\n/**\n * @ngdoc object\n * @name utils.object:BaseValueAccessor\n * @description\n *\n * Class implementing {@link https://angular.io/api/forms/ControlValueAccessor ControlValueAccessor} interface used to create custom Angular inputs that\n * can be integrated with Angular Forms and.\n */\n\nexport abstract class BaseValueAccessor<T> implements ControlValueAccessor {\n    public disabled: boolean = false;\n    public value: T = (null as unknown) as T;\n\n    public onChange(item: T): void {\n        // Is set by registerOnChange method\n    }\n    public onTouched(): void {\n        // Is set by registerOnTouched method\n    }\n\n    registerOnChange(fn: (item: T) => void): void {\n        this.onChange = fn;\n    }\n\n    registerOnTouched(fn: () => void): void {\n        this.onTouched = fn;\n    }\n\n    setDisabledState(isDisabled: boolean): void {\n        this.disabled = isDisabled;\n    }\n\n    writeValue(item: T): void {\n        this.value = item;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { annotationService } from '../annotation.service';\nimport { CacheAction } from './cache-action';\nimport { EvictionTag } from './eviction-tag';\nimport { CacheService } from './cache.service';\nimport * as lo from 'lodash';\nimport { functionsUtils } from '../../utils';\nimport { LogService } from '../log.service';\n\n///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////// CACHE CONFIG ////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nconst cacheConfigAnnotationName = 'CacheConfig';\n\n/**\n * @ngdoc object\n * @name @smartutils.object:@CacheConfig\n * @description\n * Class level typescript {@link http://www.typescriptlang.org/docs/handbook/decorators.html decorator factory} responsible for setting\n *  class level cache configuration to be merged into method specific {@link @smartutils.object:@Cached @Cached} and\n *  {@link @smartutils.object:@InvalidateCache @InvalidateCache} configurations.\n * @param {object} cacheConfig the configuration fo this cache\n * @param {cacheAction} cacheConfig.actions the list of {@link @smartutils.object:CacheAction CacheAction} characterizing this cache.\n * @param {EvictionTag[]} cacheConfig.tags a list of {@link @smartutils.object:EvictionTag EvictionTag} to control the eviction behaviour of this cache.\n */\n\nexport const CacheConfig = annotationService.getClassAnnotationFactory(\n    cacheConfigAnnotationName\n) as (args: { actions?: CacheAction[]; tags?: EvictionTag[] }) => ClassDecorator;\n\nexport function CacheConfigAnnotationFactory(logService: LogService) {\n    'ngInject';\n    return annotationService.setClassAnnotationFactory(\n        cacheConfigAnnotationName,\n        (factoryArguments: [{ actions: CacheAction[]; tags?: EvictionTag[] }]) => {\n            return function(\n                instance: any,\n                originalConstructor: (...x: any[]) => any,\n                invocationArguments: any[]\n            ) {\n                originalConstructor.call(instance, ...invocationArguments);\n\n                instance.cacheConfig = factoryArguments[0];\n\n                logService.debug(\n                    `adding cache config ${JSON.stringify(\n                        instance.cacheConfig\n                    )} to class ${functionsUtils.getInstanceConstructorName(instance)}`,\n                    instance\n                );\n            };\n        }\n    );\n}\n\n///////////////////////////////////////////////////////////////////////////////\n//////////////////////////////////// CACHE ////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nconst CachedAnnotationName = 'Cached';\n\n/**\n * @ngdoc object\n * @name @smartutils.object:@Cached\n * @description\n * Method level typescript {@link http://www.typescriptlang.org/docs/handbook/decorators.html decorator factory} responsible for performing\n * invocation arguments sensitive method caching.\n * <br/> This annotation must only be used on methods returning promises.\n * @param {object} cacheConfig the configuration fo this cache\n * <br/> This configuration will be merged with a class level {@link @smartutils.object:@CacheConfig @acheConfig} if any.\n * @throws if no {@link @smartutils.object:CacheAction CacheAction} is found in the resulting merge\n * @param {cacheAction} cacheConfig.actions the list of {@link @smartutils.object:CacheAction CacheAction} characterizing this cache.\n * @param {EvictionTag[]} cacheConfig.tags a list of {@link @smartutils.object:EvictionTag EvictionTag} to control the eviction behaviour of this cache.\n */\n\nexport const Cached = annotationService.getMethodAnnotationFactory(\n    CachedAnnotationName\n) as (args?: { actions: CacheAction[]; tags?: EvictionTag[] }) => MethodDecorator;\n\nexport function CachedAnnotationFactory(cacheService: CacheService) {\n    'ngInject';\n    const result = annotationService.setMethodAnnotationFactory(\n        CachedAnnotationName,\n        (factoryArguments: [{ actions: CacheAction[]; tags: EvictionTag[] }]) => {\n            return function(\n                target: any,\n                propertyName: string,\n                originalMethod: (...x: any[]) => any,\n                invocationArguments: IArguments\n            ) {\n                let actions: CacheAction[] = [];\n                let tags: EvictionTag[] = [];\n\n                if (factoryArguments[0]) {\n                    actions = factoryArguments[0].actions;\n                    tags = factoryArguments[0].tags;\n                }\n\n                if (target.cacheConfig) {\n                    if (target.cacheConfig.actions) {\n                        actions = lo.uniq(actions.concat(target.cacheConfig.actions));\n                    }\n                    if (target.cacheConfig.tags) {\n                        tags = lo.uniq(tags.concat(target.cacheConfig.tags));\n                    }\n                }\n\n                if (!actions.length) {\n                    const constructorName = functionsUtils.getInstanceConstructorName(target);\n                    throw new Error(\n                        `method ${propertyName} of ${constructorName} is @Cached annotated but no CacheAction is specified either through @Cached or through class level @CacheConfig annotation`\n                    );\n                }\n                return cacheService.handle(\n                    target,\n                    propertyName,\n                    originalMethod,\n                    Array.prototype.slice.apply(invocationArguments),\n                    actions,\n                    tags\n                );\n            };\n        }\n    );\n\n    return result;\n}\n///////////////////////////////////////////////////////////////////////////////\n////////////////////////////// INVALIDATE CACHE ///////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\n\nconst InvalidateCacheName = 'InvalidateCache';\n/**\n * @ngdoc object\n * @name @smartutils.object:@InvalidateCache\n * @description\n * Method level typescript {@link http://www.typescriptlang.org/docs/handbook/decorators.html decorator factory} responsible for\n * invalidating all caches either directly or indirectly declaring the {@link @smartutils.object:EvictionTag eviction tag} passed as argument.\n * if no eviction tag is passed as argument, defaults to the optional eviction tags passed to the class through {@link @smartutils.object:@CacheConfig @CacheConfig}.\n *\n * @param {EvictionTag} evictionTag the {@link @smartutils.object:EvictionTag eviction tag}.\n */\n\nexport const InvalidateCache = function(tag?: EvictionTag) {\n    return annotationService.getMethodAnnotationFactory(InvalidateCacheName)(tag);\n};\n\nexport function InvalidateCacheAnnotationFactory(cacheService: CacheService) {\n    'ngInject';\n    return annotationService.setMethodAnnotationFactory(\n        InvalidateCacheName,\n        (factoryArguments: [EvictionTag]) => {\n            return function(\n                target: any,\n                propertyName: string,\n                originalMethod: (...x: any[]) => any,\n                invocationArguments: IArguments\n            ) {\n                let tags: EvictionTag[] = [];\n\n                const tag: EvictionTag = factoryArguments[0];\n                if (!tag) {\n                    if (target.cacheConfig && target.cacheConfig.tags) {\n                        tags = target.cacheConfig.tags;\n                    }\n                } else {\n                    tags = [tag];\n                }\n\n                if (!tags.length) {\n                    throw new Error(\n                        `method ${propertyName} of ${\n                            target.constructor.name\n                        } is @InvalidateCache annotated but no EvictionTag is specified either through @InvalidateCache or through class level @CacheConfig annotation`\n                    );\n                }\n\n                const returnedObject = originalMethod.apply(\n                    undefined,\n                    Array.prototype.slice.call(invocationArguments)\n                );\n                if (returnedObject && returnedObject.then) {\n                    return returnedObject.then((value: any) => {\n                        cacheService.evict(...tags);\n                        return value;\n                    });\n                } else {\n                    cacheService.evict(...tags);\n                    return returnedObject;\n                }\n            };\n        }\n    );\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/**\n * @ngdoc object\n * @name @smartutils.object:CacheAction\n * @description\n * A {@link @smartutils.object:@Cached @Cached} annotation is associated to a CacheAction.\n */\nexport class CacheAction {\n    public name: string;\n\n    constructor(name: string) {\n        this.name = name;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { AlertConfig as FundamentalAlertConfig } from '@fundamental-ngx/core';\nimport { TypedMap } from '../dtos';\nimport { Type } from '@angular/core';\n\nexport interface IAlertConfig extends FundamentalAlertConfig {\n    component?: Type<any>;\n    message?: string;\n    messagePlaceholders?: TypedMap<string>;\n}\n\nexport enum IAlertServiceType {\n    INFO = 'information',\n    SUCCESS = 'success',\n    WARNING = 'warning',\n    DANGER = 'error'\n}\n\nexport abstract class IAlertService {\n    showAlert(alertConf: IAlertConfig | string): void {\n        'proxyFunction';\n        return;\n    }\n\n    showInfo(alertConf: IAlertConfig | string): void {\n        'proxyFunction';\n        return;\n    }\n\n    showDanger(alertConf: IAlertConfig | string): void {\n        'proxyFunction';\n        return;\n    }\n\n    showWarning(alertConf: IAlertConfig | string): void {\n        'proxyFunction';\n        return;\n    }\n\n    showSuccess(alertConf: IAlertConfig | string): void {\n        'proxyFunction';\n        return;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Injectable } from '@angular/core';\nimport { Deferred, PromiseUtils, WindowUtils } from '../../../utils';\nimport { LogService } from '../../log.service';\n\nimport { ICacheItem, ICacheTiming, IMetadata } from './interfaces';\n\n/** @internal */\nexport interface ICacheItemRegistry {\n    item: ICacheItem<any>;\n    cacheTiming: ICacheTiming;\n    completed: boolean;\n    processing: boolean;\n    defer: Deferred<any>;\n    refresh<T>(): Promise<T>;\n}\n\n/** @internal */\n@Injectable()\nexport class CacheEngine {\n    public static readonly BACKGROUND_REFRESH_INTERVAL: number = 10000;\n    private cachedItemsRegistry: ICacheItemRegistry[] = [];\n\n    constructor(\n        private windowUtils: WindowUtils,\n        private promiseUtils: PromiseUtils,\n        private logService: LogService\n    ) {\n        this.startBackgroundMonitoringJob();\n    }\n\n    public addItem(\n        item: ICacheItem<any>,\n        cacheTiming: ICacheTiming,\n        refresh: <T>() => Promise<T>\n    ): void {\n        if (this.getItemIndex(item) === -1) {\n            this.cachedItemsRegistry.push({\n                item,\n                cacheTiming,\n                refresh,\n                completed: false,\n                processing: false,\n                defer: this.promiseUtils.defer()\n            });\n        } else {\n            this.logService.warn(`CacheEngine - item already exist for id: ${item.id}`);\n        }\n    }\n\n    public getItemById(id: string): ICacheItem<any> | null {\n        const match = this.cachedItemsRegistry.find((obj) => obj.item.id === id);\n        return match ? match.item : null;\n    }\n\n    public handle<T>(item: ICacheItem<any>): Promise<T> {\n        const obj = this.cachedItemsRegistry[this.getItemIndex(item)];\n        if (obj.completed && !this.hasExpired(item)) {\n            obj.defer.resolve(item.cache);\n        } else if (!obj.processing) {\n            obj.processing = true;\n            this.refreshCache(obj);\n        }\n        return obj.defer.promise;\n    }\n\n    public evict(...tags: string[]): void {\n        tags.forEach((tag) => {\n            this.cachedItemsRegistry\n                .filter((obj) => obj.item.evictionTags.indexOf(tag) > -1)\n                .forEach((obj) => this.cachedItemsRegistry.splice(this.getItemIndex(obj.item), 1));\n        });\n    }\n\n    // regularly go though cache data and call prebound methods to refresh data when needed.\n    protected startBackgroundMonitoringJob(): void {\n        this.windowUtils.runIntervalOutsideAngular(() => {\n            return Promise.all(\n                this.cachedItemsRegistry\n                    .filter((obj) => this.needRefresh(obj.item))\n                    .map((obj) => this.refreshCache(obj))\n            );\n        }, CacheEngine.BACKGROUND_REFRESH_INTERVAL);\n    }\n\n    protected refreshCache<T>(obj: ICacheItemRegistry): Promise<T | void> {\n        return obj.refresh<IMetadata>().then(\n            (value: IMetadata) => {\n                // TODO: read value.metadata to refresh expiry/refresh ages.\n                obj.cacheTiming.setAge(obj.item);\n                obj.item.cache = value;\n                obj.item.timestamp = new Date().getTime();\n                obj.completed = true;\n                obj.processing = false;\n                obj.defer.resolve(value);\n            },\n            (e: any) => {\n                this.logService.debug(\n                    `CacheEngine - unable to refresh cache for id: ${obj.item.id}`,\n                    e\n                );\n                delete obj.item.cache;\n                obj.defer.resolve(e);\n            }\n        );\n    }\n\n    private hasExpired(item: ICacheItem<any>): boolean {\n        return item.timestamp + item.expirationAge <= new Date().getTime();\n    }\n\n    private needRefresh(item: ICacheItem<any>): boolean {\n        return item.timestamp + item.refreshAge <= new Date().getTime();\n    }\n\n    private getItemIndex(item: ICacheItem<any>): number {\n        return this.cachedItemsRegistry.findIndex((o) => o.item.id === item.id);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { ICacheItem, ICacheTiming } from './interfaces';\n\nexport class DefaultCacheTiming implements ICacheTiming {\n    private expirationAge: number;\n    private refreshAge: number;\n\n    constructor(expirationAge: number, refreshAge: number) {\n        // The cached response is discarded if it is older than the expiration age.\n        this.expirationAge = expirationAge;\n\n        // maximum age for the cached response to be considered \"fresh.\"\n        this.refreshAge = refreshAge;\n    }\n\n    setAge(\n        _item: Pick<ICacheItem<any>, 'id' | 'timestamp' | 'evictionTags' | 'cache'>\n    ): ICacheItem<any> {\n        const item = { ..._item, expirationAge: this.expirationAge, refreshAge: this.refreshAge };\n        return item;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { InjectionToken } from '@angular/core';\n\nexport const LIBRARY_NAME = '@smart/utils';\n\n/* TOKENS */\n\nexport const WHO_AM_I_RESOURCE_URI_TOKEN = `${LIBRARY_NAME}_WHO_AM_I_RESOURCE_URI`;\n\nexport const I18N_RESOURCE_URI_TOKEN = `${LIBRARY_NAME}_I18N_RESOURCE_URI`;\n\nexport const EVENT_SERVICE = `${LIBRARY_NAME}_EVENTSERVICE`;\n\n/* EVENTS */\n\nexport const REAUTH_STARTED = 'REAUTH_STARTED';\n\nexport const DEFAULT_AUTHENTICATION_ENTRY_POINT = '/authorizationserver/oauth/token';\n\n/**\n * Root resource URI of i18n API\n */\n\nexport const I18N_ROOT_RESOURCE_URI = '/smarteditwebservices/v1/i18n';\n\nexport const DEFAULT_AUTHENTICATION_CLIENT_ID = 'smartedit';\n\nexport const DEFAULT_AUTH_MAP = {\n    ['^(?!' + I18N_ROOT_RESOURCE_URI + '/.*$).*$']: DEFAULT_AUTHENTICATION_ENTRY_POINT\n};\n\nexport const DEFAULT_CREDENTIALS_MAP = {\n    [DEFAULT_AUTHENTICATION_ENTRY_POINT]: {\n        client_id: DEFAULT_AUTHENTICATION_CLIENT_ID\n    }\n};\n\nexport const LANDING_PAGE_PATH = '/';\n\nexport const SWITCH_LANGUAGE_EVENT = 'SWITCH_LANGUAGE_EVENT';\nexport const SELECTED_LANGUAGE = 'SELECTED_LANGUAGE';\n\nexport const EVENTS = {\n    AUTHORIZATION_SUCCESS: 'AUTHORIZATION_SUCCESS',\n    USER_HAS_CHANGED: 'USER_HAS_CHANGED',\n    LOGOUT: 'SE_LOGOUT_EVENT',\n    CLEAR_PERSPECTIVE_FEATURES: 'CLEAR_PERSPECTIVE_FEATURES',\n    EXPERIENCE_UPDATE: 'experienceUpdate',\n    PERMISSION_CACHE_CLEANED: 'PERMISSION_CACHE_CLEANED',\n    PAGE_CHANGE: 'PAGE_CHANGE',\n    PAGE_CREATED: 'PAGE_CREATED_EVENT',\n    PAGE_UPDATED: 'PAGE_UPDATED_EVENT',\n    PAGE_DELETED: 'PAGE_DELETED_EVENT',\n    PAGE_SELECTED: 'PAGE_SELECTED_EVENT',\n    PAGE_RESTORED: 'PAGE_RESTORED_EVENT',\n    REAUTH_STARTED: 'REAUTH_STARTED'\n};\nexport const DEFAULT_LANGUAGE_ISO = 'en';\n\nexport const LANGUAGE_SERVICE_CONSTANTS = new InjectionToken('LANGUAGE_SERVICE_CONSTANTS');\nexport const LANGUAGE_SERVICE = new InjectionToken('LANGUAGE_SERVICE');\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { Inject, Injectable } from '@angular/core';\nimport { Cloneable } from '../../dtos';\nimport { FunctionsUtils, StringUtils } from '../../utils';\nimport { LogService } from '../log.service';\nimport { CacheAction } from './cache-action';\nimport { EvictionTag } from './eviction-tag';\nimport { CacheEngine, DefaultCacheTiming, ICacheItem, ICacheTiming, IMetadata } from './engine';\nimport { IEventService } from '../../interfaces';\nimport { EVENT_SERVICE } from '../../constants';\n\nexport type ICachePredicate = (cacheActions: CacheAction[]) => boolean;\n\n/** @internal */\ninterface IPredicateRegistry {\n    test: ICachePredicate;\n    cacheTiming: ICacheTiming;\n}\n\n/**\n * @ngdoc service\n * @name @smartutils.services:CacheService\n * @description\n * Service to which the {@link @smartutils.object:@Cached @Cached} and {@link @smartutils.object:@InvalidateCache @InvalidateCache} annotations delegate to perform service method level caching.\n * It is not handled explicitly except for its evict method.\n */\n@Injectable()\nexport class CacheService {\n    private predicatesRegistry: IPredicateRegistry[] = [];\n    private eventListeners: string[] = [];\n\n    private defaultCacheTiming = new DefaultCacheTiming(24 * 60 * 60 * 1000, 12 * 60 * 60 * 1000);\n\n    constructor(\n        private logService: LogService,\n        private stringUtils: StringUtils,\n        private functionsUtils: FunctionsUtils,\n        @Inject(EVENT_SERVICE) private eventService: IEventService,\n        private cacheEngine: CacheEngine\n    ) {}\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:CacheService#register\n     * @methodOf @smartutils.services:CacheService\n     *\n     * @description\n     * Register a new predicate with it's associated cacheTiming.\n     * Each time the @Cache annotation is handled, the CacheService try to find a matching cacheTiming for the given cacheActions.\n     *\n     * @param {ICachePredicate} test This function takes the cacheActions {@link @smartutils.object:CacheAction CacheAction} argument, and must return a Boolean that is true if the given cacheActions match the predicate.\n     * @param {ICacheTiming} cacheTiming This function is used to call setAge(item: ICacheItem<any>) on the cached item.\n     *\n     * @return {CacheService} CacheService The CacheService instance.\n     *\n     * @example\n     * ```ts\n     * export class CustomCacheTiming implements ICacheTiming {\n     * \tprivate expirationAge: number;\n     * \tprivate refreshAge: number;\n     *  constructor(expirationAge: number, refreshAge: number) {\n     * \t\t// The cached response is discarded if it is older than the expiration age.\n     * \t\tthis.expirationAge = expirationAge;\n     * \t\t// maximum age for the cached response to be considered \"fresh.\"\n     * \t\tthis.refreshAge = refreshAge;\n     * \t}\n     * \tsetAge(item: ICacheItem<any>): void {\n     * \t\titem.expirationAge = this.expirationAge;\n     * \t\titem.refreshAge = this.refreshAge;\n     * \t}\n     * \t};\n     * \tconst customCacheTiming = new CustomCacheTiming(30 * 60000, 15 * 60000);\n     * \tconst customContentPredicate: ICachePredicate = (cacheActions: CacheAction[]) => {\n     * \t\treturn cacheActions.find((cacheAction) => cacheAction.name === 'CUSTOM_TAG') !== null;\n     * \t};\n     * this.register(customContentPredicate, customCacheTiming);\n     * ```\n     */\n    public register(test: ICachePredicate, cacheTiming: ICacheTiming): CacheService {\n        this.predicatesRegistry.unshift({\n            test,\n            cacheTiming\n        });\n        return this;\n    }\n\n    /**\n     * public method but only meant to be used by @Cache annotation\n     */\n    public handle<T extends IMetadata>(\n        service: any,\n        methodName: string,\n        preboundMethod: (...args: any[]) => Promise<T>,\n        invocationArguments: any[],\n        cacheActions: CacheAction[],\n        tags: EvictionTag[]\n    ): Promise<T> {\n        const constructorName = this.functionsUtils.getInstanceConstructorName(service);\n        const cachedItemId: string =\n            window.btoa(constructorName + methodName) +\n            this.stringUtils.encode(invocationArguments);\n\n        const _item: ICacheItem<any> | null = this.cacheEngine.getItemById(cachedItemId);\n        let item: ICacheItem<any>;\n\n        if (!_item) {\n            const partialItem: Pick<\n                ICacheItem<any>,\n                'id' | 'timestamp' | 'evictionTags' | 'cache'\n            > = _item || {\n                id: cachedItemId,\n                timestamp: new Date().getTime(),\n                evictionTags: this.collectEventNamesFromTags(tags),\n                cache: null\n            };\n\n            const cacheTiming: ICacheTiming | null = this.findCacheTimingByCacheActions(\n                cacheActions\n            );\n            if (!cacheTiming) {\n                throw new Error('CacheService::handle - No predicate match.');\n            }\n            item = cacheTiming.setAge(partialItem);\n\n            this.cacheEngine.addItem(item, cacheTiming, preboundMethod.bind(\n                undefined,\n                ...Array.prototype.slice.call(invocationArguments)\n            ) as (<G>() => Promise<G>));\n\n            this.listenForEvictionByTags(tags);\n        } else {\n            item = _item;\n        }\n\n        return this.cacheEngine.handle(item);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:CacheService#evict\n     * @methodOf  @smartutils.services:CacheService\n     * @description\n     * Will evict the entire cache of all methods of all services referencing either directly or indirectly the given {@link @smartutils.object:EvictionTag EvictionTags}\n     * @param {...EvictionTag[]} evictionTags the {@link @smartutils.object:EvictionTag EvictionTags}\n     */\n    public evict(...evictionTags: EvictionTag[]): void {\n        const tags: string[] = this.collectEventNamesFromTags(evictionTags);\n        this.cacheEngine.evict(...tags);\n        tags.forEach((tag) => this.eventService.publish(tag));\n    }\n\n    protected listenForEvictionByTags(tags: EvictionTag[]): void {\n        this.collectEventNamesFromTags(tags)\n            .filter((eventId) => {\n                return this.eventListeners.indexOf(eventId) === -1;\n            })\n            .forEach((eventId) => {\n                this.logService.debug(`registering event listener ${eventId}`);\n                this.eventListeners.push(eventId);\n                this.eventService.subscribe(eventId, (evt: string, data?: Cloneable) => {\n                    this.logService.debug(`cleaning cache on event ${eventId}`);\n                    this.cacheEngine.evict(eventId);\n                    return Promise.resolve<Cloneable>({});\n                });\n            });\n    }\n\n    protected collectEventNamesFromTags(tags: EvictionTag[]): string[] {\n        if (tags && tags.length) {\n            return lodash.union(...tags.map((t) => this.collectEventNamesFromTag(t)));\n        } else {\n            return [];\n        }\n    }\n\n    protected collectEventNamesFromTag(tag: EvictionTag): string[] {\n        return lodash.union(\n            [tag.event],\n            ...(tag.relatedTags ? tag.relatedTags.map((t) => this.collectEventNamesFromTag(t)) : [])\n        );\n    }\n\n    protected findCacheTimingByCacheActions(cacheActions: CacheAction[]): ICacheTiming | null {\n        const predicate: IPredicateRegistry | undefined = this.predicatesRegistry.find(\n            (cacheTimingPredicate) => cacheTimingPredicate.test(cacheActions)\n        );\n        return predicate ? predicate.cacheTiming : this.defaultCacheTiming;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/**\n * @ngdoc object\n * @name @smartutils.object:EvictionTag\n * @description\n * A {@link @smartutils.object:@Cached @Cached} annotation is tagged with 0 to n EvictionTag, each EvictionTag possibly referencing other evictionTags.\n * <br/>An EvictionTag enables a method cache to be evicted 2 different ways:\n * <ul>\n * <li> An event with the same name as the tag is raised.</li>\n * <li> {@link @smartutils.services:CacheService#methods_evict evict} method of {@link @smartutils.services:CacheService cacheService} is invoked with the tag.</li>\n * </ul>\n */\nexport class EvictionTag {\n    /**\n     * @ngdoc property\n     * @name name\n     * @propertyOf @smartutils.object:EvictionTag\n     * @description\n     * event upon which the cache should be cleared.\n     */\n    public event: string;\n\n    /**\n     * @ngdoc property\n     * @name relatedTags\n     * @propertyOf @smartutils.object:EvictionTag\n     * @description\n     * other EvictionTag instances grouped under this evictionTag.\n     */\n    public relatedTags?: EvictionTag[];\n\n    constructor(args: { event: string; relatedTags?: EvictionTag[] }) {\n        this.event = args.event;\n        this.relatedTags = args.relatedTags;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/** @internal */\nimport { CacheAction } from '../../../services/cache/cache-action';\n\nexport const RarelyChangingContentName: string = 'RarelyChangingContent';\n\nexport const rarelyChangingContent = new CacheAction(RarelyChangingContentName);\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/* tslint:disable:max-classes-per-file */\nimport * as lodash from 'lodash';\nimport { Injectable } from '@angular/core';\nimport { HttpRequest } from '@angular/common/http';\nimport { Cloneable, Payload, TypedMap } from '../../../dtos';\n\nexport type RESTMETHOD = 'GET' | 'POST' | 'PUT' | 'DELETE';\n\n/**\n * @ngdoc object\n * @name @smartutils.object:BackendRespond\n * @description\n * Mocked response of a {@link @smartutils.services:HttpBackendService HttpBackendService} invocation\n * It is either a Cloneable payload (returned automatically with 200 status code)\n * or a function returning an array of 2 arguments: the status code and the payload\n * if a function, it is invoked with:\n * @param {string=} method GET, POST, PUT or DELETE\n * @param {string=} url the full url with query string\n * @param {any=} data the payload or the request, or the POST querystring\n * @param {TypedMap<string>=} headers the outpbound request headers map\n */\nexport type BackendRespond =\n    | Payload\n    | Payload[]\n    | ((\n          method?: string,\n          url?: string,\n          data?: any,\n          headers?: TypedMap<string>\n      ) => [number, Payload | Payload[]] | PromiseLike<[number, Payload | Payload[]]>);\n\n/**\n * @ngdoc service\n * @name @smartutils.services:BackendEntry\n * @description\n * Invocations of {@link @smartutils.services:HttpBackendService} when, whenGET, whenPOST, whenPUT, whenDELETE\n * all return an instance of {@link @smartutils.services:BackendEntry BackendEntry}\n * It is used to specify the mocked response for the given conditions.\n */\nexport class BackendEntry {\n    mock?: BackendRespond;\n\n    constructor(public pattern: string | RegExp, public matchingPayload?: Cloneable) {}\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:BackendEntry#respond\n     * @methodOf @smartutils.services:BackendEntry\n     * @description\n     * @param {BackendRespond} mock the {@link @smartutils.object:BackendRespond} to return for the given conditions\n     */\n    respond(mock: BackendRespond): BackendEntry {\n        this.mock = mock;\n        return this;\n    }\n\n    passThrough(): void {\n        //\n    }\n}\n\nexport interface BackendEntryMap {\n    [index: string]: BackendEntry[];\n}\n\n/**\n * @ngdoc service\n * @name @smartutils.services:HttpBackendService\n * @description\n * Service aimed to provide mocked backend responses for given http request patterns.\n * It follows the API of {@link https://docs.angularjs.org/api/ngMockE2E/service/$httpBackend $httpBackend}\n * minus a few limitations\n */\n@Injectable()\nexport class HttpBackendService {\n    private matchLatestDefinition: boolean = false;\n\n    private backends: BackendEntryMap = {\n        GET: [],\n        POST: [],\n        PUT: [],\n        DELETE: []\n    };\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:HttpBackendService#whenGET\n     * @methodOf @smartutils.services:HttpBackendService\n     * @description\n     * method similar to {@link https://docs.angularjs.org/api/ngMockE2E/service/$httpBackend#whenGET $httpBackend#whenGET}\n     * but with only the url pattern as parameter\n     * @param {string | RegExp} pattern url end of the url pattern to match\n     * @returns {BackendEntry} the {@link @smartutils.services:BackendEntry backenEntry}\n     */\n    whenGET(pattern: string | RegExp): BackendEntry {\n        return this._whenMethod('GET', pattern);\n    }\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:HttpBackendService#whenPOST\n     * @methodOf @smartutils.services:HttpBackendService\n     * @description\n     * method similar to {@link https://docs.angularjs.org/api/ngMockE2E/service/$httpBackend#whenPOST $httpBackend#whenPOST}\n     * but with only the first 2 arguments\n     * @param {string | RegExp} pattern url end of the url pattern to match\n     * @param {Cloenable=} matchingPayload HTTP request body to be matched\n     * @returns {BackendEntry} the {@link @smartutils.services:BackendEntry backenEntry}\n     */\n    whenPOST(pattern: string | RegExp, matchingPayload?: Cloneable): BackendEntry {\n        return this._whenMethod('POST', pattern, matchingPayload);\n    }\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:HttpBackendService#whenPUT\n     * @methodOf @smartutils.services:HttpBackendService\n     * @description\n     * method similar to {@link https://docs.angularjs.org/api/ngMockE2E/service/$httpBackend#whenPUT $httpBackend#whenPUT}\n     * but with only the first 2 arguments\n     * @param {string | RegExp} pattern url end of the url pattern to match\n     * @param {Cloenable=} matchingPayload HTTP request body to be matched\n     * @returns {BackendEntry} the {@link @smartutils.services:BackendEntry backenEntry}\n     */\n    whenPUT(pattern: string | RegExp, matchingPayload?: Cloneable): BackendEntry {\n        return this._whenMethod('PUT', pattern, matchingPayload);\n    }\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:HttpBackendService#whenPUT\n     * @methodOf @smartutils.services:HttpBackendService\n     * @description\n     * method similar to {@link https://docs.angularjs.org/api/ngMockE2E/service/$httpBackend#whenPUT $httpBackend#whenPUT}\n     * but with only the url pattern as parameter\n     * @param {string | RegExp} pattern url end of the url pattern to match\n     * @returns {BackendEntry} the {@link @smartutils.services:BackendEntry backenEntry}\n     */\n    whenDELETE(pattern: string | RegExp): BackendEntry {\n        return this._whenMethod('DELETE', pattern);\n    }\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:HttpBackendService#when\n     * @methodOf @smartutils.services:HttpBackendService\n     * @description\n     * method similar to {@link https://docs.angularjs.org/api/ngMockE2E/service/$httpBackend#when $httpBackend#when}\n     * @param {string} method GET, POST, PUT, or DELETE\n     * @param {string | RegExp} pattern url end of the url pattern to match\n     * @param {Cloenable=} matchingPayload HTTP request body to be matched\n     * @returns {BackendEntry} the {@link @smartutils.services:BackendEntry backenEntry}\n     */\n    when(method: RESTMETHOD, pattern: string | RegExp, matchingPayload?: Cloneable): BackendEntry {\n        return this._whenMethod(method, pattern, matchingPayload);\n    }\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:HttpBackendService#whenAsync\n     * @methodOf @smartutils.services:HttpBackendService\n     * @description\n     * method similar to legacy $httpBackend#whenAsync, use {@link @smartutils.services:HttpBackendService#when HttpBackendService#when} instead\n     * @param {string} method GET, POST, PUT, or DELETE\n     * @param {string | RegExp} pattern url end of the url pattern to match\n     * @param {Cloenable=} matchingPayload HTTP request body to be matched\n     * @returns {BackendEntry} the {@link @smartutils.services:BackendEntry backenEntry}\n     */\n    whenAsync(\n        method: RESTMETHOD,\n        pattern: string | RegExp,\n        matchingPayload?: Cloneable\n    ): BackendEntry {\n        return this._whenMethod(method, pattern, matchingPayload);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:HttpBackendService#matchLatestDefinitionEnabled\n     * @methodOf @smartutils.services:HttpBackendService\n     * @description\n     * method similar to {@link https://docs.angularjs.org/api/ngMockE2E/service/$httpBackend#matchLatestDefinitionEnabled $httpBackend#matchLatestDefinitionEnabled}\n     * @param {boolean=false} matchLatestDefinitionEnabled if true, the last matching pattern will be picked. Otherwise the first is picked\n     */\n    matchLatestDefinitionEnabled(matchLatestDefinitionEnabled: boolean) {\n        this.matchLatestDefinition = matchLatestDefinitionEnabled;\n    }\n\n    // whenAsync\n    ////////////////////////////////////\n\n    findMatchingMock(request: HttpRequest<any>): BackendRespond | undefined {\n        const backendEntry = (this.matchLatestDefinition\n            ? this.backends[request.method].slice().reverse()\n            : this.backends[request.method]\n        ).find((entry) => {\n            if (typeof entry.pattern === 'string') {\n                return (\n                    request.urlWithParams.endsWith(entry.pattern) &&\n                    this.matchingPayloadRestriction(entry, request)\n                );\n            } else {\n                const test =\n                    entry.pattern.test(request.urlWithParams) &&\n                    this.matchingPayloadRestriction(entry, request);\n                entry.pattern.lastIndex = 0;\n                return test;\n            }\n        });\n\n        return backendEntry ? backendEntry.mock : undefined;\n    }\n\n    private _whenMethod(\n        method: RESTMETHOD,\n        pattern: string | RegExp,\n        matchingPayload?: Cloneable\n    ): BackendEntry {\n        const entry = new BackendEntry(pattern, matchingPayload);\n        this.backends[method].push(entry);\n        return entry;\n    }\n\n    private matchingPayloadRestriction(entry: BackendEntry, request: HttpRequest<any>): boolean {\n        return entry.matchingPayload ? lodash.isEqual(entry.matchingPayload, request.body) : true;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { Payload, TypedMap } from '../../../dtos';\nimport { HttpUtils, UrlUtils } from '../../../utils';\nimport { LogService } from '../../../services/log.service';\nimport { HttpBackendService } from './http-backend.service';\n\n/*\n * This is the place where the entries through HttpBackenService invocations are being used.\n * All outbound http requests are funneled through here, when a match from HttpBackenService entries\n * is found, the request is intercepted and the specified mock is returned with especified status code.\n * If no match is found, the http request is effectively sent over the wire\n */\n@Injectable()\nexport class BackendInterceptor implements HttpInterceptor {\n    constructor(\n        private httpBackendService: HttpBackendService,\n        private httpUtils: HttpUtils,\n        private urlUtils: UrlUtils,\n        private logService: LogService\n    ) {}\n\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        const backendMockRespond = this.httpBackendService.findMatchingMock(request);\n\n        if (!backendMockRespond) {\n            return next.handle(request);\n        }\n\n        let response: [number, Payload | Payload[]] | PromiseLike<[number, Payload | Payload[]]>;\n\n        if (typeof backendMockRespond === 'object') {\n            response = [200, lodash.cloneDeep(backendMockRespond)];\n        } else {\n            // if (typeof backendMockRespond === 'function')\n            let data: string | null = null;\n            if (request.method === 'GET') {\n                data = decodeURIComponent(\n                    this.urlUtils.getQueryString(\n                        this.httpUtils.copyHttpParamsOrHeaders(request.params)\n                    )\n                );\n            } else if (\n                request.headers.get('Content-Type') === 'application/x-www-form-urlencoded'\n            ) {\n                data = request.body; // it is a query string\n            } else if (request.method === 'POST' || request.method === 'PUT') {\n                data = JSON.stringify(request.body);\n            }\n            const headers = this.httpUtils.copyHttpParamsOrHeaders(request.headers) as TypedMap<\n                string\n            >;\n\n            response = backendMockRespond(\n                request.method,\n                decodeURIComponent(request.urlWithParams),\n                data,\n                headers\n            );\n        }\n        this.logService.debug(`backend ${status} response for ${request.url}: `);\n\n        return this.httpUtils.buildHttpResponse(request, response).pipe(take(1));\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Injectable } from '@angular/core';\nimport {\n    HttpEvent,\n    HttpHandler,\n    HttpInterceptor,\n    HttpRequest,\n    HttpResponse\n} from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { HttpUtils } from '../../../utils';\nimport { LogService } from '../../../services/log.service';\n\nexport type Predicate = (request: HttpRequest<any>) => boolean;\nexport type RequestHandler = (request: HttpRequest<any>) => HttpRequest<any>;\nexport type ResponseHandler = (event: HttpResponse<any>) => HttpResponse<any>;\n\n/*\n * interceptor that will inject flaw into outbound and inbound http calls.\n * It is mainly used to validate reliability and consitency of test frameworks\n */\n/** @internal */\n@Injectable()\nexport class FlawInjectionInterceptor implements HttpInterceptor {\n    static registerRequestFlaw(mutation: { test: Predicate; mutate: RequestHandler }) {\n        this.requestMutations.push(mutation);\n    }\n\n    static registerResponseFlaw(mutation: { test: Predicate; mutate: ResponseHandler }) {\n        this.responseMutations.push(mutation);\n    }\n\n    private static requestMutations: { test: Predicate; mutate: RequestHandler }[] = [];\n    private static responseMutations: { test: Predicate; mutate: ResponseHandler }[] = [];\n\n    /*\n     * probability of flaw occurrence ranging from 0 to 1\n     */\n    private static PROBABILITY = 0;\n\n    private flawWindow: any;\n\n    constructor(private httpUtils: HttpUtils, private logService: LogService) {\n        this.flawWindow = window;\n        this.flawWindow.allRequests = 0;\n        this.flawWindow.flawedRequests = 0;\n        this.flawWindow.allResponses = 0;\n        this.flawWindow.flawedResponses = 0;\n    }\n\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        let result: Observable<HttpEvent<any>>;\n\n        if (\n            FlawInjectionInterceptor.PROBABILITY !== 0 &&\n            this.httpUtils.isCRUDRequest(request) &&\n            !this._isGET(request)\n        ) {\n            this.flawWindow.allRequests++;\n            if (this._activateWithProbability(FlawInjectionInterceptor.PROBABILITY)) {\n                this.flawWindow.flawedRequests++;\n\n                const requestMutation = FlawInjectionInterceptor.requestMutations.find((mutation) =>\n                    mutation.test(request)\n                );\n                if (requestMutation) {\n                    this.logService.error(`FLAWED REQUEST-\"${request.url}`);\n                    result = next.handle(requestMutation.mutate(request));\n                }\n            }\n\n            result = next.handle(request);\n\n            return result.pipe(\n                map((event: HttpEvent<any>) => {\n                    if (\n                        event instanceof HttpResponse &&\n                        this._activateWithProbability(FlawInjectionInterceptor.PROBABILITY)\n                    ) {\n                        this.flawWindow.flawedResponses++;\n\n                        const responseMutation = FlawInjectionInterceptor.responseMutations.find(\n                            (mutation) => mutation.test(request)\n                        );\n                        if (responseMutation && event instanceof HttpResponse) {\n                            this.logService.error(`FLAWED RESPONSE-\"${request.url}`);\n                            return responseMutation.mutate(event);\n                        }\n                    }\n\n                    return event;\n                })\n            );\n        } else {\n            return next.handle(request);\n        }\n    }\n\n    private _isGET(config: angular.IRequestConfig) {\n        return config.method === 'GET';\n    }\n\n    private _activateWithProbability(probabilityTrue: number) {\n        return Math.random() >= 1.0 - probabilityTrue;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/* forbiddenNameSpaces useClass:false */\nimport { APP_INITIALIZER, ComponentRef, NgModule } from '@angular/core';\nimport { HttpRequest, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { FlawInjectionInterceptor } from './flaw-injection.interceptor';\n\n/** @internal */\n@NgModule({\n    imports: [],\n    providers: [\n        {\n            provide: HTTP_INTERCEPTORS,\n            useClass: FlawInjectionInterceptor,\n            multi: true\n        },\n        {\n            provide: APP_INITIALIZER,\n            useFactory() {\n                FlawInjectionInterceptor.registerRequestFlaw({\n                    test: (request: HttpRequest<any>) => /sites\\/[\\w-]+\\//.test(request.url),\n                    mutate: (request: HttpRequest<any>) => {\n                        return request.clone({\n                            url: request.url.replace(\n                                /sites\\/([\\w-]+)\\//,\n                                'sites/' + Math.random() + '/'\n                            )\n                        });\n                    }\n                });\n\n                return (component: ComponentRef<any>) => {\n                    // an initializer useFactory must return a function\n                };\n            },\n            multi: true\n        }\n    ]\n})\nexport class FlawInjectionInterceptorModule {}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/*\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n */\nimport { Observable } from 'rxjs';\n\nexport enum FundamentalModalButtonStyle {\n    Default = 'light',\n    Primary = 'emphasized'\n}\n\nexport enum FundamentalModalButtonAction {\n    Close = 'close',\n    Dismiss = 'dismiss',\n    None = 'none'\n}\n\nexport interface IFundamentalModalButtonOptions {\n    id: string;\n    label: string;\n    callback?: () => Observable<any>;\n    action?: FundamentalModalButtonAction;\n    style?: FundamentalModalButtonStyle;\n    compact?: boolean;\n    disabled?: boolean;\n    disabledFn?: () => boolean;\n}\n\n/**\n * @ngdoc object\n * @name modalServiceModule.object:ModalButtonActions\n * @description\n * An enum type representing buttons available actions.\n */\n\nexport enum ModalButtonActions {\n    /**\n     * @ngdoc property\n     * @name None\n     * @propertyOf modalServiceModule.object:ModalButtonActions\n     * @description none\n     *\n     */\n\n    None = 'none',\n\n    /**\n     * @ngdoc property\n     * @name Close\n     * @propertyOf modalServiceModule.object:ModalButtonActions\n     * @description close\n     *\n     */\n\n    Close = 'close',\n\n    /**\n     * @ngdoc property\n     * @name Dismiss\n     * @propertyOf modalServiceModule.object:ModalButtonActions\n     * @description dismiss\n     *\n     */\n\n    Dismiss = 'dismiss'\n}\n\n/**\n * @ngdoc object\n * @name modalServiceModule.object:ModalButtonStyles\n * @description\n * An enum type representing buttons available styles.\n */\n\nexport enum ModalButtonStyles {\n    /**\n     * @ngdoc property\n     * @name Default\n     * @propertyOf modalServiceModule.object:ModalButtonStyles\n     * @description default\n     */\n\n    Default = 'default',\n\n    /**\n     * @ngdoc property\n     * @name Primary\n     * @propertyOf modalServiceModule.object:ModalButtonStyles\n     * @description primary\n     */\n\n    Primary = 'primary'\n}\n\n/**\n * @ngdoc interface\n * @name modalServiceModule.interface:IModalButtonOptions\n *\n * @description\n * Interface for IModalButtonOptions\n */\n\nexport interface IModalButtonOptions {\n    /**\n     * @ngdoc property\n     * @name id\n     * @propertyOf modalServiceModule.interface:IModalButtonOptions\n     * @description\n     * id: String\n     *\n     * The key used to identify button\n     */\n    id: string;\n\n    /**\n     * @ngdoc property\n     * @name label\n     * @propertyOf modalServiceModule.interface:IModalButtonOptions\n     * @description\n     * label: String\n     *\n     * Translation key\n     */\n\n    label: string;\n    /**\n     * @ngdoc property\n     * @name action\n     * @propertyOf modalServiceModule.interface:IModalButtonOptions\n     * @description\n     * action: {@link modalServiceModule.object:ModalButtonActions ModalButtonActions}\n     *\n     * Used to define what action button should perform after click\n     */\n    action?: ModalButtonActions;\n    /**\n     * @ngdoc property\n     * @name style\n     * @propertyOf modalServiceModule.interface:IModalButtonOptions\n     * @description\n     * style: {@link modalServiceModule.object:ModalButtonStyles ModalButtonStyles}\n     *\n     * Property used to style the button\n     */\n    style?: ModalButtonStyles;\n    /**\n     * @ngdoc property\n     * @name disabled\n     * @propertyOf modalServiceModule.interface:IModalButtonOptions\n     * @description\n     * disabled: Boolean\n     *\n     * Decides whether button is disabled or not\n     */\n    disabled?: boolean;\n\n    /**\n     * @ngdoc method\n     * @name callback\n     * @propertyOf modalServiceModule.interface:IModalButtonOptions\n     * @description\n     * callback: () => void || Promise<any>\n     *\n     * Method triggered when button is pressed\n     */\n    callback?: () => void | Promise<any>;\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/**\n * @ngdoc service\n * @name @smartutils.services:authenticationService\n *\n * @description\n * The authenticationService is used to authenticate and logout from SmartEdit.\n * It also allows the management of entry points used to authenticate the different resources in the application.\n *\n */\nexport abstract class IAuthenticationService {\n    protected reauthInProgress: IReAuthInProgress = {};\n    protected initialized: boolean = false;\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:authenticationService#authenticate\n     * @methodOf @smartutils.services:authenticationService\n     *\n     * @description\n     * Authenticates the current SmartEdit user against the entry point assigned to the requested resource. If no\n     * suitable entry point is found, the resource will be authenticated against the\n     * {@link resourceLocationsModule.object:DEFAULT_AUTHENTICATION_ENTRY_POINT DEFAULT_AUTHENTICATION_ENTRY_POINT}\n     *\n     * @param {String} resource The URI identifying the resource to access.\n     * @returns {Promise} A promise that resolves if the authentication is successful.\n     */\n    authenticate(resource: string): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:authenticationService#logout\n     * @methodOf @smartutils.services:authenticationService\n     *\n     * @description\n     * The logout method removes all stored authentication tokens and redirects to the\n     * landing page.\n     *\n     */\n    logout(): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    // abstract onLogout(_onLogout: () => void): void;\n\n    // abstract onUserHasChanged(_onUserHasChanged: () => void): void;\n\n    isReAuthInProgress(entryPoint: string): Promise<boolean> {\n        'proxyFunction';\n        return Promise.resolve(false);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:authenticationService#setReAuthInProgress\n     * @methodOf @smartutils.services:authenticationService\n     *\n     * @description\n     * Used to indicate that the user is currently within a re-authentication flow for the given entry point.\n     * This flow is entered by default through authentication token expiry.\n     *\n     * @param {String} entryPoint The entry point which the user must be re-authenticated against.\n     *\n     */\n    setReAuthInProgress(entryPoint: string): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:authenticationService#filterEntryPoints\n     * @methodOf @smartutils.services:authenticationService\n     *\n     * @description\n     * Will retrieve all relevant authentication entry points for a given resource.\n     * A relevant entry point is an entry value of the authenticationMap found in {@link @smartutils.sharedDataService sharedDataService}.The key used in that map is a regular expression matching the resource.\n     * When no entry point is found, the method returns the {@link resourceLocationsModule.object:DEFAULT_AUTHENTICATION_ENTRY_POINT DEFAULT_AUTHENTICATION_ENTRY_POINT}\n     * @param {string} resource The URL for which a relevant authentication entry point must be found.\n     */\n    filterEntryPoints(resource: string): Promise<string[]> {\n        'proxyFunction';\n        return Promise.resolve([]);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:authenticationService##isAuthEntryPoint\n     * @methodOf @smartutils.services:authenticationService\n     *\n     * @description\n     * Indicates if the resource URI provided is one of the registered authentication entry points.\n     *\n     * @param {String} resource The URI to compare\n     * @returns {Boolean} Flag that will be true if the resource URI provided is an authentication entry point.\n     */\n    isAuthEntryPoint(resource: string): Promise<boolean> {\n        'proxyFunction';\n        return Promise.resolve(false);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:authenticationService##isAuthenticated\n     * @methodOf @smartutils.services:authenticationService\n     *\n     * @description\n     * Indicates if the resource URI provided maps to a registered authentication entry point and the associated entry point has an authentication token.\n     *\n     * @param {String} resource The URI to compare\n     * @returns {Boolean} Flag that will be true if the resource URI provided maps to an authentication entry point which has an authentication token.\n     */\n    isAuthenticated(url: string): Promise<boolean> {\n        'proxyFunction';\n        return Promise.resolve(false);\n    }\n}\n\nexport interface IReAuthInProgress {\n    [endPoint: string]: boolean;\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/**\n * @ngdoc interface\n * @name @smartutils.interfaces:IAuthToken\n * @description\n * Interface for Auth token\n */\nexport interface IAuthToken {\n    access_token: string;\n    expires_in?: number;\n    refresh_token?: string;\n    scope?: string;\n    token_type: string;\n}\n\n/**\n * @ngdoc interface\n * @name @smartutils.interfaces:IStorageService\n * @description\n * Interface for StorageService\n */\nexport abstract class IStorageService {\n    /**\n     * @ngdoc method\n     * @name @smartutils.interfaces:IStorageService#isInitialized\n     * @methodOf @smartutils.interfaces:IStorageService\n     *\n     * @description\n     * This method is used to determine if the storage service has been initialized properly. It\n     * makes sure that the smartedit-sessions cookie is available in the browser.\n     *\n     * @returns {Boolean} Indicates if the storage service was properly initialized.\n     */\n    isInitialized(): Promise<boolean> {\n        'proxyFunction';\n        return Promise.resolve(false);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.interfaces:IStorageService#storeAuthToken\n     * @methodOf @smartutils.interfaces:IStorageService\n     *\n     * @description\n     * This method creates and stores a new key/value entry. It associates an authentication token with a\n     * URI.\n     *\n     * @param {String} authURI The URI that identifies the resource(s) to be authenticated with the authToken. Will be used as a key.\n     * @param {String} auth The token to be used to authenticate the user in the provided URI.\n     */\n    storeAuthToken(authURI: string, auth: IAuthToken): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.interfaces:IStorageService#getAuthToken\n     * @methodOf @smartutils.interfaces:IStorageService\n     *\n     * @description\n     * This method is used to retrieve the authToken associated with the provided URI.\n     *\n     * @param {String} authURI The URI for which the associated authToken is to be retrieved.\n     * @returns {String} The authToken used to authenticate the current user in the provided URI.\n     */\n    getAuthToken(authURI: string): Promise<IAuthToken | undefined> {\n        'proxyFunction';\n        return Promise.resolve(undefined);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.interfaces:IStorageService#removeAuthToken\n     * @methodOf @smartutils.interfaces:IStorageService\n     *\n     * @description\n     * Removes the authToken associated with the provided URI.\n     *\n     * @param {String} authURI The URI for which its authToken is to be removed.\n     */\n    removeAuthToken(authURI: string): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.interfaces:IStorageService#removeAllAuthTokens\n     * @methodOf @smartutils.interfaces:IStorageService\n     *\n     * @description\n     * This method removes all authURI/authToken key/pairs from the storage service.\n     */\n    removeAllAuthTokens(): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.interfaces:IStorageService#getValueFromLocalStorage\n     * @methodOf @smartutils.interfaces:IStorageService\n     *\n     * @description\n     * Retrieves the value stored in the cookie identified by the provided name.\n     */\n    getValueFromLocalStorage(cookieName: string, isEncoded: boolean): Promise<any> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    setValueInLocalStorage(cookieName: string, value: any, encode: boolean): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.interfaces:IStorageService#setItem\n     * @methodOf @smartutils.interfaces:IStorageService\n     *\n     * @description\n     * This method is used to store the item.\n     *\n     * @param {String} key The key of the item.\n     * @param {any} value The value of the item.\n     */\n    setItem(key: string, value: any): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.interfaces:IStorageService#getItem\n     * @methodOf @smartutils.interfaces:IStorageService\n     *\n     * @description\n     * Retrieves the value for a given key.\n     *\n     * @param {String} key The key of the item.\n     *\n     * @returns {Promise<any>} A promise that resolves to the item value.\n     */\n    getItem(key: string): Promise<any> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/*\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n */\n\nimport { Cloneable } from '../dtos';\n\n/**\n * @ngdoc interface\n * @name smarteditServicesModule.interface:ISharedDataService\n *\n * @description\n * Provides an abstract extensible shared data service. Used to store any data to be used either the SmartEdit\n * application or the SmartEdit container.\n *\n * This class serves as an interface and should be extended, not instantiated.\n */\nexport abstract class ISharedDataService {\n    /**\n     * @ngdoc method\n     * @name smarteditServicesModule.interface:ISharedDataService#get\n     * @methodOf smarteditServicesModule.interface:ISharedDataService\n     *\n     * @description\n     * Get the data for the given key.\n     *\n     * @param {String} key The key of the data to fetch\n     */\n    get(key: string): Promise<Cloneable> {\n        'proxyFunction';\n        return Promise.resolve({});\n    }\n\n    /**\n     * @ngdoc method\n     * @name smarteditServicesModule.interface:ISharedDataService#set\n     * @methodOf smarteditServicesModule.interface:ISharedDataService\n     *\n     * @description\n     * Set data for the given key.\n     *\n     * @param {String} key The key of the data to set\n     * @param {object} value The value of the data to set\n     */\n    set(key: string, value: Cloneable): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    /**\n     * @ngdoc method\n     * @name smarteditServicesModule.interface:ISharedDataService#update\n     * @methodOf smarteditServicesModule.interface:ISharedDataService\n     *\n     * @description\n     * Convenience method to retrieve and modify on the fly the content stored under a given key\n     *\n     * @param {String} key The key of the data to store\n     * @param {Function} modifyingCallback callback fed with the value stored under the given key. The callback must return the new value of the object to update.\n     */\n    update(key: string, modifyingCallback: (oldValue: any) => any): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    /**\n     * @ngdoc method\n     * @name smarteditServicesModule.interface:ISharedDataService#remove\n     * @methodOf smarteditServicesModule.interface:ISharedDataService\n     *\n     * @description\n     * Remove the entry for the given key.\n     *\n     * @param {String} key The key of the data to remove.\n     * @returns {Promise<Cloneable>} A promise which resolves to the removed data for the given key.\n     */\n    remove(key: string): Promise<Cloneable> {\n        'proxyFunction';\n        return Promise.resolve({});\n    }\n\n    /**\n     * @ngdoc method\n     * @name smarteditServicesModule.interface:ISharedDataService#containsKey\n     * @methodOf smarteditServicesModule.interface:ISharedDataService\n     *\n     * @description\n     * Checks the given key exists or not.\n     *\n     * @param {String} key The key of the data to check.\n     * @returns {Promise<boolean>} A promise which resolves to true if the given key is found. Otherwise false.\n     */\n    containsKey(key: string): Promise<boolean> {\n        'proxyFunction';\n        return Promise.resolve(true);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { TypedMap } from '../dtos';\n\nexport abstract class ISettingsService {\n    load(): Promise<TypedMap<string | boolean>> {\n        'proxyFunction';\n        return Promise.resolve({ key: '' });\n    }\n\n    get(key: string): Promise<string> {\n        'proxyFunction';\n        return Promise.resolve('');\n    }\n\n    getBoolean(key: string): Promise<boolean> {\n        'proxyFunction';\n        return Promise.resolve(true);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { IFundamentalModalConfig } from '../services/modal';\nimport { ModalRef } from '@fundamental-ngx/core';\nimport { IModalConfig } from './i-modal-config';\n\nexport abstract class IModalService {\n    public dismissAll(): void {\n        'proxyFunction';\n    }\n\n    public open<T>(conf: IFundamentalModalConfig<T>): ModalRef;\n    public open(conf: IModalConfig): angular.IPromise<any>;\n    public open<T = {}>(\n        conf: IFundamentalModalConfig<T> | IModalConfig\n    ): ModalRef | angular.IPromise<any> {\n        'proxyFunction';\n        return {} as ModalRef;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/*\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n */\n\nimport { User } from '../dtos';\n\n/**\n * @ngdoc interface\n * @name smarteditServicesModule.interface:ISessionService\n * @description\n * The ISessionService provides information related to the current session\n * and the authenticated user (including a user readable and writeable languages).\n */\nexport abstract class ISessionService {\n    /**\n     * @ngdoc method\n     * @name smarteditServicesModule.interface:ISessionService#getCurrentUsername\n     * @methodOf smarteditServicesModule.interface:ISessionService\n     *\n     * @description\n     * Returns the username, previously mentioned as \"principalUID\",\n     * associated to the authenticated user.\n     *\n     * @returns {Promise<string>} A promise resolving to the username,\n     * previously mentioned as \"principalUID\", associated to the\n     * authenticated user.\n     */\n    getCurrentUsername(): Promise<string> {\n        'proxyFunction';\n        return Promise.resolve('');\n    }\n\n    /**\n     * @ngdoc method\n     * @name smarteditServicesModule.interface:ISessionService#getCurrentUserDisplayName\n     * @methodOf smarteditServicesModule.interface:ISessionService\n     *\n     * @description\n     * Returns the displayed name associated to the authenticated user.\n     *\n     * @returns {Promise<string>} A promise resolving to the displayed name\n     * associated to the authenticated user.\n     */\n    getCurrentUserDisplayName(): Promise<string> {\n        'proxyFunction';\n        return Promise.resolve('');\n    }\n\n    /**\n     * @ngdoc method\n     * @name smarteditServicesModule.interface:ISessionService#getCurrentUser\n     * @methodOf smarteditServicesModule.interface:ISessionService\n     *\n     * @description\n     * Returns the data of the current authenticated user.\n     * Also note that as part of the User object returned by this method contains\n     * the list of readable and writeable languages available to the user.\n     *\n     * @returns {Promise<User>} A promise resolving to the data of the current\n     * authenticated user.\n     */\n    getCurrentUser(): Promise<User> {\n        'proxyFunction';\n        return Promise.resolve({} as User);\n    }\n\n    /**\n     * @ngdoc method\n     * @name smarteditServicesModule.interface:ISessionService#hasUserChanged\n     * @methodOf smarteditServicesModule.interface:ISessionService\n     *\n     * @description\n     * Returns boolean indicating whether the current user is different from\n     * the last authenticated one.\n     *\n     * @returns {Promise<boolean>} Boolean indicating whether the current user is\n     * different from the last authenticated one.\n     */\n    hasUserChanged(): Promise<boolean> {\n        'proxyFunction';\n        return Promise.resolve(true);\n    }\n\n    /**\n     * @ngdoc method\n     * @name smarteditServicesModule.interface:ISessionService#resetCurrentUserData\n     * @methodOf smarteditServicesModule.interface:ISessionService\n     *\n     * @description\n     * Reset all data associated to the authenticated user.\n     * to the authenticated user.\n     *\n     * @return {Promise<void>} returns an empty promise.\n     */\n    resetCurrentUserData(): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n\n    /**\n     * @ngdoc method\n     * @name smarteditServicesModule.interface:ISessionService#setCurrentUsername\n     * @methodOf smarteditServicesModule.interface:ISessionService\n     *\n     * @description\n     * Set the username, previously mentioned as \"principalUID\", associated\n     * to the authenticated user.\n     *\n     * @return {Promise<void>} returns an empty promise.\n     */\n    setCurrentUsername(): Promise<void> {\n        'proxyFunction';\n        return Promise.resolve();\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nexport abstract class IAuthenticationManagerService {\n    abstract onLogout(): void;\n    abstract onUserHasChanged(): void;\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { HttpErrorResponse, HttpRequest } from '@angular/common/http';\nimport { booleanUtils } from '../../../../../utils';\nconst SERVER_ERROR_PREDICATE_HTTP_STATUSES = [500, 502, 503, 504];\nconst CLIENT_ERROR_PREDICATE_HTTP_STATUSES = [429];\nconst TIMEOUT_ERROR_PREDICATE_HTTP_STATUSES = [408];\n\nexport function serverErrorPredicate(request: HttpRequest<any>, response: HttpErrorResponse) {\n    return response && lodash.includes(SERVER_ERROR_PREDICATE_HTTP_STATUSES, response.status);\n}\nexport function clientErrorPredicate(request: HttpRequest<any>, response: HttpErrorResponse) {\n    return response && lodash.includes(CLIENT_ERROR_PREDICATE_HTTP_STATUSES, response.status);\n}\nexport function timeoutErrorPredicate(request: HttpRequest<any>, response: HttpErrorResponse) {\n    return response && lodash.includes(TIMEOUT_ERROR_PREDICATE_HTTP_STATUSES, response.status);\n}\nexport function retriableErrorPredicate(request: HttpRequest<any>, response: HttpErrorResponse) {\n    return (\n        response &&\n        booleanUtils.isAnyTruthy(serverErrorPredicate, clientErrorPredicate, timeoutErrorPredicate)(\n            request,\n            response\n        )\n    );\n}\nexport function noInternetConnectionErrorPredicate(\n    request: HttpRequest<any>,\n    response: HttpErrorResponse\n) {\n    return response && response.status === 0;\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { HttpErrorResponse, HttpRequest } from '@angular/common/http';\nexport const HTTP_METHODS_UPDATE = ['PUT', 'POST', 'DELETE', 'PATCH'];\nexport const HTTP_METHODS_READ = ['GET', 'OPTIONS', 'HEAD'];\n\nexport function updatePredicate(request: HttpRequest<any>, response: HttpErrorResponse) {\n    return lodash.includes(HTTP_METHODS_UPDATE, request.method);\n}\nexport function readPredicate(request: HttpRequest<any>, response: HttpErrorResponse) {\n    return lodash.includes(HTTP_METHODS_READ, request.method);\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { IRetry } from './i-retry';\n\n/**\n * @ngdoc object\n * @name @smartutils.object:EXPONENTIAL_RETRY_DEFAULT_SETTING\n *\n * @description\n * The setting object to be used as default values for retry.\n */\nexport const EXPONENTIAL_RETRY_DEFAULT_SETTING = {\n    MAX_BACKOFF: 64000,\n    MAX_ATTEMPT: 5,\n    MIN_BACKOFF: 0\n};\n\n/**\n * @ngdoc service\n * @name @smartutils.services:exponentialRetry\n * @description\n * When used by a retry strategy, this service could provide an exponential delay time to be used by the strategy before the next request is sent. The service also provides functionality to check if it is possible to perform a next retry.\n */\nexport class ExponentialRetry implements IRetry {\n    calculateNextDelay(attemptCount: number, maxBackoff?: number, minBackoff?: number): number {\n        maxBackoff = maxBackoff || EXPONENTIAL_RETRY_DEFAULT_SETTING.MAX_BACKOFF;\n        minBackoff = minBackoff || EXPONENTIAL_RETRY_DEFAULT_SETTING.MIN_BACKOFF;\n\n        const waveShield = minBackoff + Math.random();\n\n        return Math.min(Math.pow(2, attemptCount) * 1000 + waveShield, maxBackoff);\n    }\n\n    canRetry(attemptCount: number, maxAttempt?: number): boolean {\n        maxAttempt = maxAttempt || EXPONENTIAL_RETRY_DEFAULT_SETTING.MAX_ATTEMPT;\n        return attemptCount <= maxAttempt;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { IRetry } from './i-retry';\n/**\n * @ngdoc object\n * @name @smartutils.object:LINEAR_RETRY_DEFAULT_SETTING\n *\n * @description\n * The setting object to be used as default values for retry.\n */\nexport const LINEAR_RETRY_DEFAULT_SETTING = {\n    MAX_ATTEMPT: 5,\n    MAX_BACKOFF: 32000,\n    MIN_BACKOFF: 0,\n    RETRY_INTERVAL: 500\n};\n\n/**\n * @ngdoc service\n * @name @smartutils.services:linearRetry\n * @description\n * When used by a retry strategy, this service could provide a linear delay time to be used by the strategy before the next request is sent. The service also provides functionality to check if it is possible to perform a next retry.\n */\nexport class LinearRetry implements IRetry {\n    calculateNextDelay(\n        attemptCount: number,\n        retryInterval?: number,\n        maxBackoff?: number,\n        minBackoff?: number\n    ): number {\n        maxBackoff = maxBackoff || LINEAR_RETRY_DEFAULT_SETTING.MAX_BACKOFF;\n        minBackoff = minBackoff || LINEAR_RETRY_DEFAULT_SETTING.MIN_BACKOFF;\n        retryInterval = retryInterval || LINEAR_RETRY_DEFAULT_SETTING.RETRY_INTERVAL;\n\n        const waveShield = minBackoff + Math.random();\n        return Math.min(attemptCount * retryInterval + waveShield, maxBackoff);\n    }\n\n    canRetry(attemptCount: number, maxAttempt?: number): boolean {\n        maxAttempt = maxAttempt || LINEAR_RETRY_DEFAULT_SETTING.MAX_ATTEMPT;\n        return attemptCount <= maxAttempt;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { IRetry } from './i-retry';\n/**\n * @ngdoc object\n * @name @smartutils.object:SIMPLE_RETRY_DEFAULT_SETTING\n *\n * @description\n * The setting object to be used as default values for retry.\n */\nexport const SIMPLE_RETRY_DEFAULT_SETTING = {\n    MAX_ATTEMPT: 5,\n    MIN_BACKOFF: 0,\n    RETRY_INTERVAL: 500\n};\n\n/**\n * @ngdoc service\n * @name @smartutils.services:simpleRetry\n * @description\n * When used by a retry strategy, this service could provide a simple fixed delay time to be used by the strategy before the next request is sent. The service also provides functionality to check if it is possible to perform a next retry.\n */\nexport class SimpleRetry implements IRetry {\n    calculateNextDelay(retryInterval?: number, minBackoff?: number): number {\n        minBackoff = minBackoff || SIMPLE_RETRY_DEFAULT_SETTING.MIN_BACKOFF;\n        retryInterval = retryInterval || SIMPLE_RETRY_DEFAULT_SETTING.RETRY_INTERVAL;\n\n        const waveShield = minBackoff + Math.random();\n        return retryInterval + waveShield;\n    }\n\n    canRetry(attemptCount: number, _maxAttempt?: number): boolean {\n        const maxAttempt = _maxAttempt || SIMPLE_RETRY_DEFAULT_SETTING.MAX_ATTEMPT;\n        return attemptCount <= maxAttempt;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { InjectionToken } from '@angular/core';\nimport { Class } from '../../../../../types';\nimport { SimpleRetry } from '../retryPolicies';\nimport { IRetryStrategy } from './i-retry-strategy';\n\nexport const DefaultRetryStrategy = new InjectionToken<string>('DefaultRetryStrategy');\n\nexport function defaultRetryStrategyFactory(simpleRetry: SimpleRetry): Class<IRetryStrategy> {\n    return class implements IRetryStrategy {\n        public firstFastRetry = true;\n        public attemptCount: number = 0;\n\n        canRetry() {\n            return simpleRetry.canRetry(this.attemptCount);\n        }\n\n        calculateNextDelay() {\n            return simpleRetry.calculateNextDelay();\n        }\n    };\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { InjectionToken } from '@angular/core';\nimport { Class } from '../../../../../types';\nimport { ExponentialRetry } from '../retryPolicies';\nimport { IRetryStrategy } from './i-retry-strategy';\n\nexport const ExponentialRetryStrategy = new InjectionToken<string>('ExponentialRetryStrategy');\n\nexport function exponentialRetryStrategyFactory(\n    exponentialRetry: ExponentialRetry\n): Class<IRetryStrategy> {\n    return class implements IRetryStrategy {\n        public firstFastRetry = true;\n        public attemptCount: number = 0;\n\n        canRetry() {\n            return exponentialRetry.canRetry(this.attemptCount);\n        }\n\n        calculateNextDelay() {\n            return exponentialRetry.calculateNextDelay(this.attemptCount);\n        }\n    };\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { InjectionToken } from '@angular/core';\nimport { Class } from '../../../../../types';\nimport { LinearRetry } from '../retryPolicies';\nimport { IRetryStrategy } from './i-retry-strategy';\n\nexport const LinearRetryStrategy = new InjectionToken<string>('LinearRetryStrategy');\n\nexport function linearRetryStrategyFactory(linearRetry: LinearRetry): Class<IRetryStrategy> {\n    return class implements IRetryStrategy {\n        public firstFastRetry = true;\n        public attemptCount: number = 0;\n\n        canRetry() {\n            return linearRetry.canRetry(this.attemptCount);\n        }\n\n        calculateNextDelay() {\n            return linearRetry.calculateNextDelay(this.attemptCount);\n        }\n    };\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { Injectable } from '@angular/core';\n\n/** @internal */\ninterface Store {\n    urlRegex: RegExp;\n    operationContext: string;\n}\n\n/**\n * @ngdoc service\n * @name @smartutils.services:OperationContextService\n * @description\n * This service provides the functionality to register a url with its associated operation contexts and also finds operation context given an url.\n */\n@Injectable()\nexport class OperationContextService {\n    private store: Store[];\n    constructor() {\n        this.store = [];\n    }\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:OperationContextService#register\n     * @methodOf @smartutils.services:OperationContextService\n     *\n     * @description\n     * Register a new url with it's associated operationContext.\n     *\n     * @param {String} url The url that is associated to the operation context.\n     * @param {String} operationContext The operation context name that is associated to the given url.\n     *\n     * @return {Object} operationContextService The operationContextService service\n     */\n    register(url: string, operationContext: string): this {\n        if (typeof url !== 'string' || lodash.isEmpty(url)) {\n            throw new Error('operationContextService.register error: url is invalid');\n        }\n        if (typeof operationContext !== 'string' || lodash.isEmpty(operationContext)) {\n            throw new Error('operationContextService.register error: operationContext is invalid');\n        }\n        const regexIndex = this.store.findIndex(\n            (store) =>\n                store.urlRegex.test(url) === true && store.operationContext === operationContext\n        );\n\n        if (regexIndex !== -1) {\n            return this;\n        }\n        const urlRegex = new RegExp(url.replace(/\\/:[^\\/]*/g, '/.*'));\n        this.store.push({\n            urlRegex,\n            operationContext\n        });\n        return this;\n    }\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:OperationContextService#findOperationContext\n     * @methodOf @smartutils.services:OperationContextService\n     *\n     * @description\n     * Find the first matching operation context for the given url.\n     *\n     * @param {String} url The request url.\n     *\n     * @return {String} operationContext\n     */\n    findOperationContext(url: string): string | null {\n        const regexIndex = this.store.findIndex((store) => store.urlRegex.test(url) === true);\n        return ~regexIndex ? this.store[regexIndex].operationContext : null;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Injector } from '@angular/core';\nimport { TypedMap } from '../../../../dtos';\nimport { annotationService, ClassAnnotationFactory } from '../../../annotation.service';\nimport { OperationContextService } from './operation-context.service';\n\nconst operationContextName = 'OperationContextRegistered';\n\n/**\n * @ngdoc object\n * @name @smartutils.object:@OperationContextRegistered\n * @description\n * Class level typescript {@link http://www.typescriptlang.org/docs/handbook/decorators.html decorator factory} is delegated to\n * {@link @smartutils.services:OperationContextService OperationContextService.register} and it provides the functionality\n * to register an url with  operation context(s).\n *\n * For example:\n * 1. @OperationContextRegistered('apiUrl', ['CMS', 'INTERACTIVE'])\n * 2. @OperationContextRegistered('apiUrl', 'TOOLING')\n *\n * @param {string} url\n * @param {string | string[]} operationContext\n */\nexport const OperationContextRegistered = annotationService.getClassAnnotationFactory(\n    operationContextName\n) as (url: string, operationContext: string | string[]) => ClassDecorator;\n\nexport function OperationContextAnnotationFactory(\n    injector: Injector,\n    operationContextService: OperationContextService,\n    OPERATION_CONTEXT: TypedMap<string>\n): ClassAnnotationFactory | null {\n    'ngInject';\n    return annotationService.setClassAnnotationFactory(operationContextName, function(\n        factoryArguments: any[]\n    ) {\n        return function(\n            instance: any,\n            originalConstructor: (...x: any[]) => any,\n            invocationArguments: any[]\n        ) {\n            originalConstructor.call(instance, ...invocationArguments);\n\n            const url: string = injector.get<string>(factoryArguments[0], factoryArguments[0]);\n\n            if (typeof factoryArguments[1] === 'string') {\n                const operationContext: string = (OPERATION_CONTEXT as any)[factoryArguments[1]];\n                operationContextService.register(url, operationContext);\n            } else if (Array.isArray(factoryArguments[1]) && factoryArguments[1].length > 0) {\n                factoryArguments[1].forEach((element: string) => {\n                    operationContextService.register(url, (OPERATION_CONTEXT as any)[element]);\n                });\n            }\n        };\n    });\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Inject, Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse, HttpRequest } from '@angular/common/http';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IAlertService } from '../../../interfaces';\nimport { BooleanUtils } from '../../../utils';\nimport { TypedMap } from '../../../dtos';\nimport { Class } from '../../../types';\nimport {\n    clientErrorPredicate,\n    noInternetConnectionErrorPredicate,\n    readPredicate,\n    retriableErrorPredicate,\n    serverErrorPredicate,\n    timeoutErrorPredicate,\n    DefaultRetryStrategy,\n    ExponentialRetryStrategy,\n    IRetryStrategy,\n    LinearRetryStrategy,\n    OperationContextService\n} from './retries';\nimport { IHttpErrorInterceptor } from '../i-http-error.interceptor';\n\nexport type RetryPredicate = (\n    request: HttpRequest<any>,\n    response: HttpErrorResponse,\n    operationContext?: string\n) => boolean;\n\nimport { LIBRARY_NAME } from '../../../constants';\n\nexport const OPERATION_CONTEXT_TOKEN = `${LIBRARY_NAME}_OPERATION_CONTEXT`;\n\n/**\n * @ngdoc service\n * @name @smartutils.services:retryInterceptor\n *\n * @description\n * The retryInterceptor provides the functionality to register a set of predicates with their associated retry strategies.\n * Each time an HTTP request fails, the service try to find a matching retry strategy for the given response.\n */\n@Injectable()\nexport class RetryInterceptor<T = any> implements IHttpErrorInterceptor<T> {\n    private TRANSLATE_NAMESPACE = 'se.gracefuldegradation.';\n\n    private predicatesRegistry: {\n        predicate: RetryPredicate;\n        retryStrategy: Class<IRetryStrategy>;\n    }[] = [];\n\n    private requestToRetryTegistry: TypedMap<IRetryStrategy> = {};\n\n    constructor(\n        private httpClient: HttpClient,\n        private translate: TranslateService,\n        private operationContextService: OperationContextService,\n        private alertService: IAlertService,\n        booleanUtils: BooleanUtils,\n        @Inject(DefaultRetryStrategy) defaultRetryStrategy: Class<IRetryStrategy>,\n        @Inject(ExponentialRetryStrategy) exponentialRetryStrategy: Class<IRetryStrategy>,\n        @Inject(LinearRetryStrategy) linearRetryStrategy: Class<IRetryStrategy>,\n        @Inject(OPERATION_CONTEXT_TOKEN) private OPERATION_CONTEXT: TypedMap<string>\n    ) {\n        this.register(noInternetConnectionErrorPredicate, exponentialRetryStrategy)\n            .register(\n                booleanUtils.isAnyTruthy(clientErrorPredicate, timeoutErrorPredicate),\n                defaultRetryStrategy\n            )\n            .register(\n                booleanUtils.areAllTruthy(readPredicate, retriableErrorPredicate),\n                defaultRetryStrategy\n            )\n            .register(serverErrorPredicate, exponentialRetryStrategy);\n    }\n\n    predicate(request: HttpRequest<T>, response: HttpErrorResponse) {\n        return this.findMatchingStrategy(request, response) !== null;\n    }\n\n    responseError(request: HttpRequest<T>, response: HttpErrorResponse): Promise<any> {\n        let retryStrategy = this.retrieveRetryStrategy(request);\n        if (!retryStrategy) {\n            const StrategyHolder = this.findMatchingStrategy(request, response);\n            if (StrategyHolder) {\n                this.alertService.showWarning({\n                    message: this.translate.instant(this.TRANSLATE_NAMESPACE + 'stillworking')\n                });\n                retryStrategy = new StrategyHolder();\n                retryStrategy.attemptCount = 0;\n                this.storeRetryStrategy(request, retryStrategy);\n            } else {\n                return Promise.reject(response);\n            }\n        }\n        return this.handleRetry(retryStrategy, request, response);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:retryInterceptor#register\n     * @methodOf @smartutils.services:retryInterceptor\n     *\n     * @description\n     * Register a new predicate with it's associated strategyHolder.\n     *\n     * @param {Function} predicate This function takes the 'response' {Object} argument and an (optional) operationContext {String}. This function must return a Boolean that is true if the given response match the predicate.\n     * @param {Function} retryStrategy This function will be instanciated at run-time. See {@link @smartutils.services:IRetryStrategy IRetryStrategy}.\n     *\n     * @return {Object} retryInterceptor The retryInterceptor service.\n     *\n     * @example\n     * ```js\n     *      var customPredicate = function(request, response, operationContext) {\n     *          return response.status === 500 && operationContext === OPERATION_CONTEXT.TOOLING;\n     *      };\n     *      var StrategyHolder = function() {\n     *          // set the firstFastRetry value to true for the retry made immediately only for the very first retry (subsequent retries will remain subject to the calculateNextDelay response)\n     *          this.firstFastRetry = true;\n     *      };\n     *      StrategyHolder.prototype.canRetry = function() {\n     *          // this function must return a {Boolean} if the given request must be retried.\n     *          // use this.attemptCount value to determine if the function should return true or false\n     *      };\n     *      StrategyHolder.prototype.calculateNextDelay = function() {\n     *          // this function must return the next delay time {Number}\n     *          // use this.attemptCount value to determine the next delay value\n     *      };\n     *      retryInterceptor.register(customPredicate, StrategyHolder);\n     * ```\n     */\n    register(predicate: RetryPredicate, retryStrategy: Class<IRetryStrategy>): RetryInterceptor<T> {\n        if (typeof predicate !== 'function') {\n            throw new Error('retryInterceptor.register error: predicate must be a function');\n        }\n        if (typeof retryStrategy !== 'function') {\n            throw new Error('retryInterceptor.register error: retryStrategy must be a function');\n        }\n        this.predicatesRegistry.unshift({\n            predicate,\n            retryStrategy\n        });\n        return this;\n    }\n\n    /**\n     * Find a matching strategy for the given response and (optional) operationContext\n     * If not provided, the default operationContext is OPERATION_CONTEXT.INTERACTIVE\n     *\n     * @param {Object} response The http response object\n     *\n     * @return {Function} The matching retryStrategy\n     */\n    private findMatchingStrategy(\n        request: HttpRequest<any>,\n        response: HttpErrorResponse\n    ): Class<IRetryStrategy> | null {\n        const operationContext =\n            this.operationContextService.findOperationContext(request.url) ||\n            this.OPERATION_CONTEXT.INTERACTIVE;\n        const matchStrategy = this.predicatesRegistry.find((predicateObj) => {\n            return predicateObj.predicate(request, response, operationContext);\n        });\n        return matchStrategy ? matchStrategy.retryStrategy : null;\n    }\n\n    private handleRetry(\n        retryStrategy: IRetryStrategy,\n        request: HttpRequest<any>,\n        response: HttpErrorResponse\n    ): Promise<any> {\n        retryStrategy.attemptCount++;\n        if (retryStrategy.canRetry()) {\n            const delay = retryStrategy.firstFastRetry ? 0 : retryStrategy.calculateNextDelay();\n            retryStrategy.firstFastRetry = false;\n            return new Promise((resolve, reject) => {\n                setTimeout(() => {\n                    this.httpClient\n                        .request(request)\n                        .toPromise()\n                        .then(\n                            (result: any) => {\n                                this.removeRetryStrategy(request);\n                                return resolve(result);\n                            },\n                            (error: any) => reject(error)\n                        );\n                }, delay);\n            });\n        } else {\n            this.alertService.showDanger({\n                message: this.translate.instant(this.TRANSLATE_NAMESPACE + 'somethingwrong')\n            });\n            return Promise.reject(response);\n        }\n    }\n\n    private storeRetryStrategy(request: HttpRequest<any>, retryStrategy: IRetryStrategy): void {\n        this.requestToRetryTegistry[this.getRequestUUID(request)] = retryStrategy;\n    }\n    private removeRetryStrategy(request: HttpRequest<any>): void {\n        delete this.requestToRetryTegistry[this.getRequestUUID(request)];\n    }\n\n    private retrieveRetryStrategy(request: HttpRequest<any>): IRetryStrategy {\n        return this.requestToRetryTegistry[this.getRequestUUID(request)];\n    }\n\n    private getRequestUUID(request: HttpRequest<any>): string {\n        return request.clone().toString();\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Injectable } from '@angular/core';\nimport { HttpErrorResponse, HttpRequest } from '@angular/common/http';\nimport { IAlertService } from '../../../interfaces';\nimport { BackendError, IHttpErrorInterceptor } from '../i-http-error.interceptor';\n/**\n * @ngdoc service\n * @name permissionErrorInterceptorModule.service:permissionErrorInterceptor\n * @description\n * Used for HTTP error code 403. Displays the alert message for permission error.\n */\n@Injectable()\nexport class PermissionErrorInterceptor<T = any> implements IHttpErrorInterceptor<T> {\n    constructor(private alertService: IAlertService) {}\n    predicate(request: HttpRequest<T>, response: HttpErrorResponse) {\n        return response.status === 403;\n    }\n    responseError(request: HttpRequest<T>, response: HttpErrorResponse) {\n        if (response.error && response.error.errors) {\n            response.error.errors\n                .filter((error: BackendError) => {\n                    return error.type === 'TypePermissionError';\n                })\n                .forEach((error: BackendError) => {\n                    this.alertService.showDanger({\n                        message: error.message,\n                        duration: 10000\n                    });\n                });\n        }\n        return Promise.reject(response);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Inject, Injectable, Injector } from '@angular/core';\nimport { HttpClient, HttpErrorResponse, HttpEvent, HttpRequest } from '@angular/common/http';\nimport { IAuthenticationService, IEventService } from '../../../interfaces';\nimport { Deferred, HttpUtils, PromiseUtils } from '../../../utils';\nimport { TypedMap } from '../../../dtos';\nimport { IHttpErrorInterceptor } from '../i-http-error.interceptor';\nimport { EVENT_SERVICE, REAUTH_STARTED, WHO_AM_I_RESOURCE_URI_TOKEN } from '../../../constants';\n\n// map used by HttpAuthInterceptor to avoid replay identical requests being held because of 401\nexport const GET_REQUESTS_ON_HOLD_MAP: TypedMap<Promise<HttpEvent<any>>> = {};\n\n/**\n * @ngdoc service\n * @name @smartutils.services:unauthorizedErrorInterceptor\n * @description\n * Used for HTTP error code 401 (Forbidden). It will display the login modal.\n */\n@Injectable()\nexport class UnauthorizedErrorInterceptor<T = any> implements IHttpErrorInterceptor<T> {\n    private promisesToResolve: TypedMap<\n        { requestIdentifier: string; deferred: Deferred<T> }[]\n    > = {}; // key: auth entry point, value: array of deferred\n    private rejectedUrls: (string | RegExp)[] = [/authenticate/];\n\n    constructor(\n        private httpClient: HttpClient,\n        private authenticationService: IAuthenticationService,\n        private promiseUtils: PromiseUtils,\n        private httpUtils: HttpUtils,\n        @Inject(WHO_AM_I_RESOURCE_URI_TOKEN) WHO_AM_I_RESOURCE_URI: string,\n        @Inject(EVENT_SERVICE) private eventService: IEventService\n    ) {\n        this.rejectedUrls.push(WHO_AM_I_RESOURCE_URI);\n    }\n\n    predicate(request: HttpRequest<T>, response: HttpErrorResponse) {\n        return (\n            response.status === 401 &&\n            (request.url\n                ? this.httpUtils.isCRUDRequest(request, response) &&\n                  this.isUrlNotRejected(request.url)\n                : true)\n        );\n    }\n    responseError(request: HttpRequest<T>, response: HttpErrorResponse): Promise<any> {\n        const deferred = this.promiseUtils.defer<T>();\n\n        const deferredPromise = deferred.promise.then(() => {\n            return this.httpClient.request(request).toPromise();\n        });\n\n        this.authenticationService.isAuthEntryPoint(request.url).then((isAuthEntryPoint) => {\n            if (!isAuthEntryPoint) {\n                this.authenticationService\n                    .filterEntryPoints(request.url)\n                    .then((entryPoints: string[]) => {\n                        const entryPoint = entryPoints[0];\n                        this.promisesToResolve[entryPoint] =\n                            this.promisesToResolve[entryPoint] || [];\n                        this.promisesToResolve[entryPoint].push({\n                            requestIdentifier: request.url,\n                            deferred\n                        });\n                        if (this.httpUtils.isGET(request)) {\n                            GET_REQUESTS_ON_HOLD_MAP[request.url] = deferredPromise;\n                        }\n                        this.authenticationService\n                            .isReAuthInProgress(entryPoint)\n                            .then((isReAuthInProgress) => {\n                                if (!isReAuthInProgress) {\n                                    this.authenticationService\n                                        .setReAuthInProgress(entryPoint)\n                                        .then(() => {\n                                            const promisesToResolve = this.promisesToResolve;\n                                            this.eventService.publish(REAUTH_STARTED);\n                                            this.authenticationService\n                                                .authenticate(request.url)\n                                                .then(\n                                                    function() {\n                                                        promisesToResolve[this].forEach(\n                                                            (record) => {\n                                                                delete GET_REQUESTS_ON_HOLD_MAP[\n                                                                    record.requestIdentifier\n                                                                ];\n                                                                record.deferred.resolve();\n                                                            }\n                                                        );\n                                                        promisesToResolve[this] = [];\n                                                    }.bind(entryPoint),\n                                                    function() {\n                                                        promisesToResolve[this].forEach(\n                                                            (record) => {\n                                                                delete GET_REQUESTS_ON_HOLD_MAP[\n                                                                    record.requestIdentifier\n                                                                ];\n                                                                record.deferred.reject();\n                                                            }\n                                                        );\n                                                        promisesToResolve[this] = [];\n                                                    }.bind(entryPoint)\n                                                );\n                                        });\n                                }\n                            });\n                    });\n            } else {\n                deferred.reject(response);\n            }\n        });\n\n        return deferredPromise;\n    }\n\n    private isUrlNotRejected(url: string): boolean {\n        return !this.rejectedUrls.some((rejectedUrl) => {\n            return typeof rejectedUrl === 'string'\n                ? url.indexOf(rejectedUrl) === 0\n                : rejectedUrl.test(url);\n        });\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Inject, Injectable, Injector } from '@angular/core';\nimport {\n    HttpEvent,\n    HttpHandler,\n    HttpInterceptor,\n    HttpRequest,\n    HttpResponse\n} from '@angular/common/http';\nimport { from, Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { HttpUtils } from '../../utils';\nimport { IAuthenticationService, IAuthToken, IStorageService } from '../../interfaces';\nimport { GET_REQUESTS_ON_HOLD_MAP } from './errors/unauthorized-error.interceptor';\nimport { I18N_RESOURCE_URI_TOKEN } from '../../constants';\n\n/**\n * @ngdoc service\n * @name @smartutils.httpAuthInterceptor\n *\n * @description\n * Makes it possible to perform global authentication by intercepting requests before they are forwarded to the server\n * and responses before they are forwarded to the application code.\n *\n */\n@Injectable()\nexport class HttpAuthInterceptor implements HttpInterceptor {\n    constructor(\n        private authenticationService: IAuthenticationService,\n        private injector: Injector,\n        private httpUtils: HttpUtils,\n        @Inject(I18N_RESOURCE_URI_TOKEN) private I18N_RESOURCE_URI: string\n    ) {}\n    /**\n     * @ngdoc method\n     * @name @smartutils.httpAuthInterceptor#request\n     * @methodOf @smartutils.httpAuthInterceptor\n     *\n     * @description\n     * Interceptor method which gets called with a http config object, intercepts any request made using httpClient service.\n     * A call to any REST resource will be intercepted by this method, which then adds an authentication token to the request\n     * and then forwards it to the REST resource.\n     *\n     */\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        if (\n            !request.url.includes(this.I18N_RESOURCE_URI) &&\n            this.httpUtils.isCRUDRequest(request)\n        ) {\n            if (this.httpUtils.isGET(request) && GET_REQUESTS_ON_HOLD_MAP[request.url]) {\n                return new Observable((obj) => {\n                    GET_REQUESTS_ON_HOLD_MAP[request.url].then((body) => {\n                        obj.next(new HttpResponse<any>({ status: 200, body }));\n                    });\n                });\n            }\n            return from(this.authenticationService.filterEntryPoints(request.url)).pipe(\n                switchMap<string[], Observable<HttpEvent<any>>>((entryPoints: string[]) => {\n                    if (entryPoints && entryPoints.length) {\n                        return from<Observable<IAuthToken>>(\n                            this.injector.get(IStorageService).getAuthToken(entryPoints[0])\n                        ).pipe(\n                            switchMap<IAuthToken, Observable<HttpEvent<any>>>(\n                                (authToken: IAuthToken) => {\n                                    if (authToken) {\n                                        const authReq = request.clone({\n                                            headers: request.headers.set(\n                                                'Authorization',\n                                                authToken.token_type + ' ' + authToken.access_token\n                                            )\n                                        });\n                                        return next.handle(authReq);\n                                    } else {\n                                        return next.handle(request);\n                                    }\n                                }\n                            )\n                        );\n                    } else {\n                        return next.handle(request);\n                    }\n                })\n            );\n        } else {\n            return next.handle(request);\n        }\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { HttpErrorResponse, HttpEvent, HttpRequest } from '@angular/common/http';\nimport { Injectable, Injector } from '@angular/core';\nimport * as lodash from 'lodash';\nimport { from, Observable } from 'rxjs';\nimport { Deferred, PromiseUtils } from '../../utils';\nimport { Class } from '../../types';\nimport { IHttpErrorInterceptor } from './i-http-error.interceptor';\n\n/**\n * @ngdoc service\n * @name @smartutils.services:httpErrorInterceptorService\n *\n * @description\n * The httpErrorInterceptorService provides the functionality to add custom HTTP error interceptors.\n * An interceptor can be an {Object} or an Angular Factory and must be represented by a pair of functions:\n * - predicate(request, response) {Function} that must return true if the response is associated to the interceptor. Important: The predicate must be designed to fulfill a specific function. It must not be defined for generic use.\n * - responseError(request, response) {Function} function called if the current response error matches the predicate. It must return a {Promise} with the resolved or rejected response.\n *\n * Each time an HTTP request fails, the service iterates through all registered interceptors. It sequentially calls the responseError function for all interceptors that have a predicate returning true for the current response error. If an interceptor modifies the response, the next interceptor that is called will have the modified response.\n * The last interceptor added to the service will be the first interceptor called. This makes it possible to override default interceptors.\n * If an interceptor resolves the response, the service service stops the iteration.\n */\n@Injectable()\nexport class HttpErrorInterceptorService {\n    private _errorInterceptors: IHttpErrorInterceptor[] = [];\n\n    constructor(private injector: Injector, private promiseUtils: PromiseUtils) {}\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:httpErrorInterceptorService#addInterceptor\n     * @methodOf @smartutils.services:httpErrorInterceptorService\n     *\n     * @description\n     * Add a new error interceptor\n     *\n     * @param {Object|String} interceptor The interceptor {Object} or angular Factory\n     *\n     * @returns {Function} Function to call to unregister the interceptor from the service\n     *\n     * @example\n     * ```js\n     *      // Add a new interceptor with an instance of IHttpErrorInterceptor:\n     *      var unregisterCustomInterceptor = httpErrorInterceptorService.addInterceptor({\n     *          predicate: function(request, response) {\n     *              return response.status === 400;\n     *          },\n     *          responseError: function(request, response) {\n     *              alertService.showDanger({\n     *                  message: response.message\n     *              });\n     *              return Promise.reject(response);// FIXME: update doc\n     *          }\n     *      });\n     *\n     *      // Add an interceptor with a class of IHttpErrorInterceptor:\n     *      var unregisterCustomInterceptor = httpErrorInterceptorService.addInterceptor(CustomErrorInterceptor);\n     *\n     *      // Unregister the interceptor:\n     *      unregisterCustomInterceptor();\n     * ```\n     */\n\n    addInterceptors(\n        interceptorClasses: (Class<IHttpErrorInterceptor> | IHttpErrorInterceptor)[]\n    ): void {\n        interceptorClasses.forEach((InterceptorClass) => {\n            this.addInterceptor(InterceptorClass);\n        });\n    }\n\n    addInterceptor(_interceptor: Class<IHttpErrorInterceptor> | IHttpErrorInterceptor): () => void {\n        let interceptor: IHttpErrorInterceptor;\n        if (\n            (_interceptor as IHttpErrorInterceptor).predicate ||\n            (_interceptor as IHttpErrorInterceptor).responseError\n        ) {\n            interceptor = _interceptor as IHttpErrorInterceptor;\n        } else {\n            interceptor = this.injector.get(_interceptor);\n        }\n        this._validateInterceptor(interceptor);\n        this._errorInterceptors.unshift(interceptor);\n\n        return () => {\n            this._errorInterceptors.splice(this._errorInterceptors.indexOf(interceptor), 1);\n        };\n    }\n\n    responseError<T>(\n        request: HttpRequest<T>,\n        response: HttpErrorResponse\n    ): Observable<HttpEvent<T>> {\n        const matchingErrorInterceptors = this._errorInterceptors.filter(\n            (errorInterceptor) => errorInterceptor.predicate(request, response) === true\n        );\n        const _interceptorsDeferred: Deferred<any> = this.promiseUtils.defer<any>();\n        if (matchingErrorInterceptors.length) {\n            this._iterateErrorInterceptors<T>(\n                request.clone(),\n                lodash.cloneDeep(response),\n                matchingErrorInterceptors,\n                _interceptorsDeferred\n            );\n        } else {\n            _interceptorsDeferred.reject(response);\n        }\n        return from(_interceptorsDeferred.promise);\n    }\n\n    private _iterateErrorInterceptors<T>(\n        request: HttpRequest<T>,\n        response: HttpErrorResponse,\n        interceptors: IHttpErrorInterceptor[],\n        _interceptorsDeferred: Deferred<any>,\n        idx: number = 0\n    ): void {\n        if (idx === interceptors.length) {\n            _interceptorsDeferred.reject(response);\n        } else {\n            const iterateFn = this._iterateErrorInterceptors.bind(this);\n            // FIXME: fully convert this part to Observable chaining\n            Promise.resolve(interceptors[idx].responseError(request, response)).then(\n                (interceptedResponse) => {\n                    _interceptorsDeferred.resolve(interceptedResponse);\n                },\n                (interceptedResponse) => {\n                    iterateFn(\n                        request,\n                        interceptedResponse,\n                        interceptors,\n                        _interceptorsDeferred,\n                        ++idx\n                    );\n                }\n            );\n        }\n    }\n\n    /**\n     * @ignore\n     * Validate if the provided interceptor respects the Interface (predicate and responseError functions are mandatory).\n     * @param {Object|String} interceptor The interceptor {Object} or angular Factory\n     */\n    private _validateInterceptor(interceptor: IHttpErrorInterceptor) {\n        if (!interceptor.predicate || typeof interceptor.predicate !== 'function') {\n            throw new Error(\n                'httpErrorInterceptorService.addInterceptor.error.interceptor.has.no.predicate'\n            );\n        }\n        if (!interceptor.responseError || typeof interceptor.responseError !== 'function') {\n            throw new Error(\n                'httpErrorInterceptorService.addInterceptor.error.interceptor.has.no.responseError'\n            );\n        }\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport {\n    HttpErrorResponse,\n    HttpEvent,\n    HttpHandler,\n    HttpInterceptor,\n    HttpRequest\n} from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { throwError, Observable } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { HttpUtils } from '../../utils';\nimport { HttpErrorInterceptorService } from './http-error-interceptor.service';\n\n/**\n * @ngdoc overview\n * @name httpErrorInterceptorServiceModule\n *\n * @description\n * This module provides the functionality to add custom HTTP error interceptors.\n * Interceptors are used to execute code each time an HTTP request fails.\n */\n@Injectable()\nexport class HttpErrorInterceptor implements HttpInterceptor {\n    constructor(\n        private httpErrorInterceptorService: HttpErrorInterceptorService,\n        private httpUtils: HttpUtils\n    ) {}\n\n    intercept<T>(request: HttpRequest<T>, next: HttpHandler): Observable<HttpEvent<T>> {\n        return next.handle(request).pipe(\n            catchError((error: HttpErrorResponse, caught: Observable<HttpEvent<T>>) => {\n                if (!this.httpUtils.isHTMLRequest(request, error)) {\n                    return this.httpErrorInterceptorService.responseError(request, error);\n                } else {\n                    return throwError(error);\n                }\n            })\n        );\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { APP_BOOTSTRAP_LISTENER, ComponentRef, ModuleWithProviders, NgModule } from '@angular/core';\nimport { Class } from '../../types';\nimport {\n    defaultRetryStrategyFactory,\n    exponentialRetryStrategyFactory,\n    linearRetryStrategyFactory,\n    DefaultRetryStrategy,\n    ExponentialRetry,\n    ExponentialRetryStrategy,\n    LinearRetry,\n    LinearRetryStrategy,\n    SimpleRetry\n} from './errors';\nimport { BackendInterceptor, HttpBackendService } from './backend';\nimport { FlawInjectionInterceptorModule } from './flaws';\nimport { HttpAuthInterceptor } from './http-auth.interceptor';\nimport { HttpErrorInterceptorService } from './http-error-interceptor.service';\nimport { HttpErrorInterceptor } from './http-error.interceptor';\nimport { IHttpErrorInterceptor } from './i-http-error.interceptor';\n\n/**\n * @ngdoc overview\n * @name httpInterceptorModule\n *\n * @description\n * This module provides the functionality to add custom HTTP error interceptors.\n * Interceptors are used to execute code each time an HTTP request fails.\n *\n */\n@NgModule({\n    imports: [FlawInjectionInterceptorModule],\n    providers: [\n        SimpleRetry,\n        LinearRetry,\n        ExponentialRetry,\n        {\n            provide: DefaultRetryStrategy,\n            useFactory: defaultRetryStrategyFactory,\n            deps: [SimpleRetry]\n        },\n        {\n            provide: ExponentialRetryStrategy,\n            useFactory: exponentialRetryStrategyFactory,\n            deps: [ExponentialRetry]\n        },\n        {\n            provide: LinearRetryStrategy,\n            useFactory: linearRetryStrategyFactory,\n            deps: [SimpleRetry]\n        },\n        HttpErrorInterceptorService,\n        HttpBackendService\n    ]\n})\nexport class HttpInterceptorModule {\n    static forRoot(\n        ...HttpErrorInterceptorClasses: Class<IHttpErrorInterceptor>[]\n    ): ModuleWithProviders {\n        return {\n            ngModule: HttpInterceptorModule,\n            providers: [\n                ...HttpErrorInterceptorClasses,\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: HttpAuthInterceptor,\n                    multi: true\n                },\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: HttpErrorInterceptor,\n                    multi: true\n                },\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: BackendInterceptor,\n                    multi: true\n                },\n                {\n                    provide: APP_BOOTSTRAP_LISTENER,\n                    useFactory(httpErrorInterceptorService: HttpErrorInterceptorService) {\n                        httpErrorInterceptorService.addInterceptors(HttpErrorInterceptorClasses);\n\n                        return (component: ComponentRef<any>) => {\n                            // an initializer useFactory must return a function\n                        };\n                    },\n                    deps: [HttpErrorInterceptorService],\n                    multi: true\n                }\n            ]\n        };\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { HttpErrorResponse, HttpEvent, HttpRequest } from '@angular/common/http';\n\nexport interface BackendError {\n    message: string;\n    type: string;\n}\n\nexport enum StatusText {\n    UNKNOW_ERROR = 'Unknown Error'\n}\n\nexport interface IHttpErrorInterceptor<T = any> {\n    predicate(request: HttpRequest<T>, response: HttpErrorResponse): boolean;\n    responseError(\n        request: HttpRequest<T>,\n        response: HttpErrorResponse\n    ): Promise<HttpEvent<T> | HttpErrorResponse>;\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { HttpEvent, HttpResponse } from '@angular/common/http';\n\nexport class HttpPaginationResponseAdapter {\n    public static transform(ev: HttpEvent<any>): HttpEvent<any> {\n        const event = ev as HttpResponse<any>;\n        const isAdaptable: boolean = event && event.body && event.body.pagination;\n\n        if (!isAdaptable) {\n            return event;\n        }\n\n        const foundKey: string = Object.keys(event.body).find(\n            (key: string) => key !== 'pagination' && Array.isArray(event.body[key])\n        ) as string;\n\n        return foundKey\n            ? event.clone({ body: { ...event.body, results: event.body[foundKey] } })\n            : event;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Injectable } from '@angular/core';\nimport { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { HttpPaginationResponseAdapter } from '../../utils/http-pagination-response-adapter';\n\n/**\n * @ngdoc service\n * @name @smartutils.services:responseAdapterInterceptor\n *\n * @description\n *\n * Interceptor used to normalize the response of paginated resources. Some API consumers select data with 'result' and 'response' key.\n * This interceptor purpose is to adapt such payload.\n */\n\n@Injectable()\nexport class ResponseAdapterInterceptor implements HttpInterceptor {\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        return next.handle(request).pipe(map(HttpPaginationResponseAdapter.transform));\n    }\n}\n","/**\n * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { HttpClient, HttpHeaders, HttpResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Page, Pageable, Payload, TypedMap } from '../../dtos';\nimport { URIBuilder } from '../../utils';\nimport { IRestOptions, IRestService, SearchParams } from './i-rest-service';\n\nexport type ObjectWithHeaders<T> = T & { headers?: HttpHeaders };\n\n/** @internal */\nexport class RestClient<T> implements IRestService<T> {\n    private readonly DEFAULT_HEADERS: TypedMap<string> = { 'x-requested-with': 'Angular' };\n    private readonly DEFAULT_OPTIONS: IRestOptions = { headers: {} };\n    // will activate response headers appending\n    private metadataActivated = false;\n\n    constructor(\n        private httpClient: HttpClient,\n        public readonly url: string,\n        private identifierName: string\n    ) {}\n\n    getById<S extends T = T>(\n        identifier: string,\n        options: IRestOptions = this.DEFAULT_OPTIONS\n    ): Promise<ObjectWithHeaders<S> | null> {\n        return this.addHeadersToBody(\n            this.httpClient.get<S>(`${this.url}/${identifier}`, {\n                headers: this.buildRequestHeaders(options.headers || {}),\n                observe: 'response'\n            })\n        ).toPromise();\n    }\n    get<S extends T = T>(\n        searchParams: SearchParams,\n        options: IRestOptions = this.DEFAULT_OPTIONS\n    ): Promise<ObjectWithHeaders<S> | null> {\n        const params = this.convertToTypeMapOfString(searchParams);\n        return this.addHeadersToBody(\n            this.httpClient.get<S>(this.interpolateParamsInURL(this.url, params), {\n                params: this.formatQueryString(\n                    this.determineTrueQueryStringParams(this.url, searchParams)\n                ),\n                headers: this.buildRequestHeaders(options.headers || {}),\n                observe: 'response'\n            })\n        ).toPromise();\n    }\n    query<S extends T = T>(\n        searchParams?: SearchParams,\n        options: IRestOptions = this.DEFAULT_OPTIONS\n    ): Promise<ObjectWithHeaders<S[]>> {\n        const params = searchParams ? this.convertToTypeMapOfString(searchParams) : searchParams;\n        return this.addHeadersToBody(\n            this.httpClient.get<S[]>(this.interpolateParamsInURL(this.url, params), {\n                params: this.formatQueryString(\n                    this.determineTrueQueryStringParams(this.url, searchParams)\n                ),\n                headers: this.buildRequestHeaders(options.headers || {}),\n                observe: 'response'\n            })\n        )\n            .pipe(map((arr: S[] | null) => arr || []))\n            .toPromise();\n    }\n    page<S extends T = T>(\n        pageable: Pageable,\n        options: IRestOptions = this.DEFAULT_OPTIONS\n    ): Promise<ObjectWithHeaders<Page<S>>> {\n        return (\n            this.addHeadersToBody(\n                this.httpClient.get<Page<S>>(this.interpolateParamsInURL(this.url, pageable), {\n                    params: this.formatQueryString(\n                        this.determineTrueQueryStringParams(this.url, pageable)\n                    ),\n                    headers: this.buildRequestHeaders(options.headers || {}),\n                    observe: 'response'\n                })\n            )\n                // force typing to accept the fact that a page is never null\n                .pipe(map((arr: Page<S> | null) => (arr as any) as Page<S>))\n                .toPromise()\n        );\n    }\n    update<S extends T = T>(\n        payload: Payload,\n        options: IRestOptions = this.DEFAULT_OPTIONS\n    ): Promise<S> {\n        return this.performIdentifierCheck(payload)\n            .then(() => this.buildUrlWithIdentifier(payload))\n            .then((url: string) =>\n                this.httpClient\n                    .put<S>(url, payload, {\n                        headers: this.buildRequestHeaders(options.headers || {})\n                    })\n                    .toPromise()\n            );\n    }\n    save<S extends T = T>(\n        payload: Payload,\n        options: IRestOptions = this.DEFAULT_OPTIONS\n    ): Promise<S> {\n        return this.httpClient\n            .post<S>(this.interpolateParamsInURL(this.url, payload), payload, {\n                headers: this.buildRequestHeaders(options.headers || {})\n            })\n            .toPromise();\n    }\n\n    patch<S extends T = T>(\n        payload: Payload,\n        options: IRestOptions = this.DEFAULT_OPTIONS\n    ): Promise<S> {\n        return this.performIdentifierCheck(payload)\n            .then(() => this.buildUrlWithIdentifier(payload))\n            .then((url: string) =>\n                this.httpClient\n                    .patch<S>(url, payload, {\n                        headers: this.buildRequestHeaders(options.headers || {})\n                    })\n                    .toPromise()\n            );\n    }\n\n    remove(payload: string | Payload, options: IRestOptions = this.DEFAULT_OPTIONS): Promise<any> {\n        return this.performIdentifierCheck(payload)\n            .then(() => this.buildUrlWithIdentifier(payload))\n            .then((url: string) =>\n                this.httpClient\n                    .delete(url, { headers: this.buildRequestHeaders(options.headers || {}) })\n                    .toPromise()\n            );\n    }\n\n    ///////////////////////////////////////////\n    /// INTERNAL METHODS NEEDED FOR GATEWAY ///\n    ///////////////////////////////////////////\n\n    getMethodForSingleInstance = (\n        name: 'getById' | 'get' | 'update' | 'save' | 'remove' | 'patch'\n    ): ((params: any) => Promise<any>) => {\n        switch (name) {\n            case 'getById':\n                return (id: string, options: IRestOptions = this.DEFAULT_OPTIONS) =>\n                    this.getById(id, options);\n            case 'get':\n                return (searchParams: SearchParams, options: IRestOptions = this.DEFAULT_OPTIONS) =>\n                    this.get(searchParams, options);\n            case 'update':\n                return (payload: Payload, options: IRestOptions = this.DEFAULT_OPTIONS) =>\n                    this.update(payload, options);\n            case 'save':\n                return (payload: Payload, options: IRestOptions = this.DEFAULT_OPTIONS) =>\n                    this.save(payload, options);\n            case 'patch':\n                return (payload: Payload, options: IRestOptions = this.DEFAULT_OPTIONS) =>\n                    this.patch(payload, options);\n            case 'remove':\n                return (payload: string | Payload, options: IRestOptions = this.DEFAULT_OPTIONS) =>\n                    this.remove(payload, options);\n        }\n    };\n    getMethodForArray = (name: 'query'): ((params: SearchParams) => Promise<T[] | null>) => {\n        switch (name) {\n            case 'query':\n                return (params: SearchParams, options: IRestOptions = this.DEFAULT_OPTIONS) =>\n                    this.query(params, options);\n        }\n    };\n    activateMetadata(): void {\n        this.metadataActivated = true;\n    }\n\n    private convertToTypeMapOfString(searchParams: SearchParams): TypedMap<string> {\n        return lodash.mapValues(searchParams, (val: any) => String(val));\n    }\n\n    private formatQueryString(\n        _params: SearchParams | Pageable\n    ): {\n        [param: string]: string | string[];\n    } {\n        return this.sortByKeys(_params);\n    }\n    private addHeadersToBody<BodyType>(\n        observable: Observable<HttpResponse<BodyType>>\n    ): Observable<ObjectWithHeaders<BodyType> | null> {\n        return observable.pipe(\n            map((response: HttpResponse<ObjectWithHeaders<BodyType>>) => {\n                const data = response.body;\n\n                if (this.metadataActivated && data) {\n                    // used by @Cached annotation\n                    data.headers = response.headers;\n                }\n                return data;\n            })\n        );\n    }\n\n    /*\n     * interpolation URL placeholders interpolation with potential matches in queryString\n     */\n    private interpolateParamsInURL(_url: string, payload?: string | TypedMap<any>): string {\n        // only keep params to be found in the URI or query params\n        if (payload && typeof payload !== 'string') {\n            return new URIBuilder(_url)\n                .replaceParams(payload)\n                .sanitize()\n                .build();\n        } else {\n            return _url;\n        }\n    }\n\n    /*\n     * remove from queryString any param needed for URL placeholders interpolation\n     */\n    private determineTrueQueryStringParams(\n        url: string,\n        payload?: string | TypedMap<any>\n    ): TypedMap<any> {\n        return typeof payload === 'object'\n            ? Object.keys(payload).reduce((prev: Payload, next: string) => {\n                  if (\n                      !new RegExp(':' + next + '/').test(url) &&\n                      !new RegExp(':' + next + '$').test(url) &&\n                      !new RegExp(':' + next + '&').test(url) &&\n                      !lodash.isNil(payload[next])\n                  ) {\n                      prev[next] = payload[next];\n                  }\n                  return prev;\n              }, {})\n            : {};\n    }\n\n    private sortByKeys(obj: TypedMap<any>) {\n        const keys = lodash.sortBy(lodash.keys(obj), (key: string) => {\n            return key;\n        });\n\n        return lodash.zipObject(\n            keys,\n            lodash.map(keys, (key: string) => {\n                return obj[key];\n            })\n        );\n    }\n\n    private performIdentifierCheck(payload: string | Payload): Promise<void> {\n        const identifier = typeof payload === 'string' ? payload : payload[this.identifierName];\n\n        if (!identifier) {\n            return Promise.reject(\n                'no data was found under the ' +\n                    identifier +\n                    ' field of object ' +\n                    JSON.stringify(payload) +\n                    ', it is necessary for update and remove operations'\n            );\n        }\n\n        return Promise.resolve();\n    }\n\n    private buildUrlWithIdentifier(payload: string | Payload): Promise<string> {\n        const identifier = typeof payload === 'string' ? payload : payload[this.identifierName];\n        let url = this.interpolateParamsInURL(`${this.url}`, payload);\n\n        url =\n            url.includes('?') || this.url.includes(':' + this.identifierName)\n                ? url\n                : `${url}/${identifier}`;\n\n        return Promise.resolve(url);\n    }\n\n    private buildRequestHeaders(headers: TypedMap<string>): HttpHeaders {\n        return new HttpHeaders({ ...this.DEFAULT_HEADERS, ...headers });\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { IRestServiceFactory } from './i-rest-service.factory';\nimport { IRestService } from './i-rest-service';\nimport { RestClient } from './rest-client';\nimport { LogService } from '../log.service';\n\n/** @internal */\n@Injectable()\nexport class RestServiceFactory implements IRestServiceFactory {\n    static setGlobalBasePath(globalBasePath: string): void {\n        if (!RestServiceFactory.globalBasePath) {\n            RestServiceFactory.globalBasePath = globalBasePath;\n        } else {\n            RestServiceFactory.logService.warn(\n                'The value of a global base path was already set. ' +\n                    'Update is not possible, the value remained unchanged!'\n            );\n        }\n    }\n\n    static getGlobalBasePath(): string {\n        return RestServiceFactory.globalBasePath ? RestServiceFactory.globalBasePath : '';\n    }\n\n    private static globalBasePath: string | null = null;\n    private static logService: LogService = new LogService();\n    private map = new Map();\n    private basePath: string | null = null;\n    private DOMAIN: string | null = null;\n    private IDENTIFIER: string = 'identifier';\n\n    constructor(private httpClient: HttpClient) {}\n\n    setDomain(DOMAIN: string): void {\n        this.DOMAIN = DOMAIN;\n    }\n\n    setBasePath(basePath: string): void {\n        this.basePath = basePath;\n    }\n\n    get<T>(uri: string, identifier: string = this.IDENTIFIER): IRestService<T> {\n        if (this.map.has(uri + identifier)) {\n            return this.map.get(uri + identifier);\n        }\n\n        if (!/^https?\\:\\/\\//.test(uri)) {\n            const newBasePath: string | null = this.getNewBasePath();\n            const basePathURI: string = lodash.isEmpty(newBasePath)\n                ? uri\n                : newBasePath + (/^\\//.test(uri) ? uri : `/${uri}`);\n\n            uri = this.shouldAppendDomain(uri) ? `${this.DOMAIN}/${uri}` : basePathURI;\n        }\n\n        const restClient: RestClient<T> = new RestClient<T>(this.httpClient, uri, identifier);\n        this.map.set(uri + identifier, restClient);\n        return restClient;\n    }\n\n    private shouldAppendDomain(uri: string): boolean {\n        return !!this.DOMAIN && !/^\\//.test(uri);\n    }\n\n    private getNewBasePath(): string | null {\n        return this.basePath ? this.basePath : RestServiceFactory.globalBasePath;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Page, Pageable, Payload } from '../../dtos';\nimport { Cached, InvalidateCache } from '../cache';\nimport { IRestOptions, IRestService, IRestServiceFactory, SearchParams } from '.';\n\n/**\n * @ngdoc service\n * @name @smartutils.service:AbstractCachedRestService\n *\n * @description\n * Base class to implement Cache enabled {@link @smartutils.interfaces:IRestService IRestServices}.\n * <br/>Implementing classes just need declare a class level {@link @smartutils.object:@CacheConfig @CacheConfig} annotation\n * with at least one {@link @smartutils.object:CacheAction CacheAction} and one {@link @smartutils.object:EvictionTag EvictionTag}.\n * <br/>Cache policies called by the set of {@link @smartutils.object:CacheAction CacheActions} will have access to\n * REST call response headers being added to the response under \"headers\" property.\n * <br/>Those headers are then stripped from the response.\n *\n * <h2>Usage</h2>\n * <pre>\n * &#64;CacheConfig({actions: [rarelyChangingContent], tags: [userEvictionTag]})\n * &#64;SeInjectable()\n * export class ProductCatalogRestService extends AbstractCachedRestService<IBaseCatalogs> {\n * \tconstructor(restServiceFactory: IRestServiceFactory) {\n * \t\tsuper(restServiceFactory, '/productcatalogs');\n * \t}\n * }\n * </pre>\n */\nexport abstract class AbstractCachedRestService<T> implements IRestService<T> {\n    protected innerRestService: IRestService<T>;\n\n    constructor(restServiceFactory: IRestServiceFactory, uri: string, identifier?: string) {\n        this.innerRestService = restServiceFactory.get(uri, identifier);\n        this.innerRestService.activateMetadata && this.innerRestService.activateMetadata();\n    }\n\n    @StripResponseHeaders\n    @Cached()\n    getById<S extends T = T>(identifier: string, options?: IRestOptions): Promise<S | null> {\n        return this.innerRestService.getById<S>(identifier, options);\n    }\n\n    @StripResponseHeaders\n    @Cached()\n    get<S extends T = T>(searchParams?: SearchParams, options?: IRestOptions): Promise<S | null> {\n        return this.innerRestService.get(searchParams, options);\n    }\n\n    @StripResponseHeaders\n    @Cached()\n    query<S extends T = T>(searchParams: SearchParams, options?: IRestOptions): Promise<S[]> {\n        return this.innerRestService.query(searchParams, options);\n    }\n\n    @StripResponseHeaders\n    @Cached()\n    page<S extends T = T>(searchParams: Pageable, options?: IRestOptions): Promise<Page<S>> {\n        return this.innerRestService.page(searchParams, options);\n    }\n\n    @StripResponseHeaders\n    @InvalidateCache()\n    update<S extends T = T>(payload: Payload, options?: IRestOptions): Promise<S> {\n        return this.innerRestService.update(payload, options);\n    }\n\n    @StripResponseHeaders\n    @InvalidateCache()\n    patch<S extends T = T>(payload: Payload, options?: IRestOptions): Promise<S> {\n        return this.innerRestService.patch(payload, options);\n    }\n\n    @InvalidateCache()\n    remove<S extends T = T>(payload: Payload, options?: IRestOptions): Promise<void> {\n        return this.innerRestService.remove(payload, options);\n    }\n\n    @StripResponseHeaders\n    save<S extends T = T>(payload: Payload, options?: IRestOptions): Promise<S> {\n        return this.innerRestService.save(payload, options);\n    }\n}\n\nexport function StripResponseHeaders(\n    target: any,\n    propertyName: string,\n    descriptor: TypedPropertyDescriptor<(...x: any[]) => any>\n) {\n    const originalMethod = descriptor.value;\n\n    if (originalMethod) {\n        descriptor.value = function() {\n            return originalMethod\n                .apply(this, Array.prototype.slice.call(arguments))\n                .then((response: any) => {\n                    delete response.headers;\n                    return response;\n                });\n        };\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Injectable, Injector } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { IAuthToken } from '../../interfaces';\nimport { Deferred, PromiseUtils, WindowUtils } from '../../utils';\n\nconst SSO_DIALOG_MARKER = 'sso';\n\nenum SSO_PROPERTIES {\n    SSO_CLIENT_ID = 'SSO_CLIENT_ID',\n    SSO_AUTHENTICATION_ENTRY_POINT = 'SSO_AUTHENTICATION_ENTRY_POINT',\n    SSO_LOGOUT_ENTRY_POINT = 'SSO_LOGOUT_ENTRY_POINT',\n    SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT = 'SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT'\n}\n\nconst CHILD_SMARTEDIT_SENDING_AUTHTOKEN = 'ssoAuthenticate';\nconst CHILD_SMARTEDIT_SENDING_AUTH_ERROR = 'ssoAuthenticateError';\n\nconst SSODIALOG_WINDOW = 'SSODIALOG_WINDOW';\n/*\n * Helper to initiate a SAML /SSO autentication sequence through a pop-up\n * (because the sequence involves auto-submiting html form at some point that causes a redirect and hence would\n * loose app context if not executed in a different window)\n * that ultimately loads the app again which in turn will detect its context and do the following:\n * - will not continue loading\n * - wil post the loginToken to the /authenticate end point to retrieve oAuth access\n * - will send back to parent (through postMessage) the retrieved oAuth access\n * - will close;\n */\n@Injectable()\nexport class SSOAuthenticationHelper {\n    // static in order to be shared by multiple instances\n    private static lastAuthenticatedWithSSO = false;\n\n    private readonly logoutIframeId = 'logoutIframe';\n\n    private deferred: Deferred<IAuthToken> | null = null;\n\n    constructor(\n        private windowUtils: WindowUtils,\n        private promiseUtils: PromiseUtils,\n        private httpClient: HttpClient,\n        private injector: Injector\n    ) {\n        this.listenForAuthTokenBeingSentBack();\n    }\n\n    /*\n     * Initiates the SSO dialog through a pop-up\n     */\n    launchSSODialog(): Promise<IAuthToken> {\n        this.deferred = this.promiseUtils.defer<IAuthToken>();\n\n        const ssoAuthenticationEntryPoint =\n            this.injector.get(SSO_PROPERTIES.SSO_AUTHENTICATION_ENTRY_POINT) +\n            this.getSSOContextPath();\n        this.window.open(\n            ssoAuthenticationEntryPoint,\n            SSODIALOG_WINDOW,\n            'toolbar=no,scrollbars=no,resizable=no,top=200,left=200,width=1000,height=800'\n        );\n\n        return this.deferred.promise;\n    }\n\n    /*\n     * SSO happen in a popup window launched by AuthenticationHelper#launchSSODialog().\n     * Once SSO is successful, a 'LoginToken' cookie is present, this is a pre-requisite for doing a POST to the /authenticate\n     * endpoint that will return the Authorization bearer token.\n     * This bearer is then sent with postMessage to the opener window, i.e. the SmartEdit application that will resume the pending 401 request.\n     */\n    completeDialog(): Promise<void> {\n        return new Promise<void>((resolve, reject) => {\n            this.httpClient\n                .post<IAuthToken>(\n                    this.injector.get(SSO_PROPERTIES.SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT),\n                    { client_id: this.injector.get(SSO_PROPERTIES.SSO_CLIENT_ID) }\n                )\n                .subscribe(\n                    (authToken) => {\n                        this.window.opener.postMessage(\n                            {\n                                eventId: CHILD_SMARTEDIT_SENDING_AUTHTOKEN,\n                                authToken\n                            },\n                            this.document.location.origin\n                        );\n                        this.window.close();\n                        resolve();\n                    },\n                    (httpErrorResponse: HttpErrorResponse) => {\n                        const clonableHttpErrorResponse = {\n                            error: httpErrorResponse.error,\n                            status: httpErrorResponse.status\n                        };\n                        this.window.opener.postMessage(\n                            {\n                                eventId: CHILD_SMARTEDIT_SENDING_AUTH_ERROR,\n                                error: clonableHttpErrorResponse\n                            },\n                            this.document.location.origin\n                        );\n                        this.window.close();\n                        reject();\n                    }\n                );\n        });\n    }\n\n    /*\n     * case of the App being a popup only meant for authentication and spun up buy the main app\n     */\n    isSSODialog(): boolean {\n        return (\n            this.window.name === SSODIALOG_WINDOW &&\n            new RegExp(`[?&]${SSO_DIALOG_MARKER}`).test(location.search)\n        );\n    }\n\n    /*\n     * case of:\n     * - the App called from another app in an SSO context and that should therefore auto-authenticate with SSO\n     * - last manual authentication was with SSO\n     */\n    isAutoSSOMain(): boolean {\n        return (\n            SSOAuthenticationHelper.lastAuthenticatedWithSSO ||\n            (this.window.name !== SSODIALOG_WINDOW &&\n                new RegExp(`[?&]${SSO_DIALOG_MARKER}`).test(location.search))\n        );\n    }\n\n    logout(): any {\n        let logoutIframe = this.logoutIframe;\n        if (!logoutIframe) {\n            logoutIframe = this.document.createElement('iframe');\n            logoutIframe.id = this.logoutIframeId;\n            logoutIframe.style.display = 'none';\n            this.document.body.appendChild(logoutIframe);\n        }\n        logoutIframe.src = this.injector.get(SSO_PROPERTIES.SSO_LOGOUT_ENTRY_POINT);\n\n        SSOAuthenticationHelper.lastAuthenticatedWithSSO = false;\n        this.document.location.href = this.document.location.href.replace(\n            this.getSSOContextPath(),\n            this.document.location.pathname\n        );\n    }\n\n    // context path of app in an SSO mode\n    private getSSOContextPath() {\n        return `${this.document.location.pathname}?${SSO_DIALOG_MARKER}`;\n    }\n\n    private listenForAuthTokenBeingSentBack(): void {\n        this.window.addEventListener(\n            'message',\n            (event: MessageEvent) => {\n                if (event.origin !== document.location.origin) {\n                    return;\n                }\n\n                this.logoutIframe && this.logoutIframe.remove();\n\n                if (event.data.eventId === CHILD_SMARTEDIT_SENDING_AUTHTOKEN) {\n                    SSOAuthenticationHelper.lastAuthenticatedWithSSO = true;\n                    this.deferred && this.deferred.resolve(event.data.authToken);\n                } else if (event.data.eventId === CHILD_SMARTEDIT_SENDING_AUTH_ERROR) {\n                    this.deferred && this.deferred.reject(event.data.error);\n                }\n            },\n            false\n        );\n    }\n\n    private get window() {\n        return this.windowUtils.getWindow();\n    }\n\n    private get document(): Document {\n        return this.window.document;\n    }\n\n    private get logoutIframe(): HTMLIFrameElement | null {\n        return this.document.querySelector<HTMLIFrameElement>(`iframe#${this.logoutIframeId}`);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n\nexport enum SUPPORTED_BROWSERS {\n    IE,\n    CHROME,\n    FIREFOX,\n    EDGE,\n    SAFARI,\n    UNKNOWN\n}\nexport class BrowserService {\n    getCurrentBrowser(): SUPPORTED_BROWSERS {\n        /* forbiddenNameSpaces window as any:false */\n        const anyWindow = window as any;\n        let browser = SUPPORTED_BROWSERS.UNKNOWN;\n        if (typeof anyWindow.InstallTrigger !== 'undefined') {\n            browser = SUPPORTED_BROWSERS.FIREFOX;\n        } else if (/*@cc_on!@*/ false || !!(document as any).documentMode) {\n            browser = SUPPORTED_BROWSERS.IE;\n        } else if (!!anyWindow.StyleMedia) {\n            browser = SUPPORTED_BROWSERS.EDGE;\n        } else if (!!anyWindow.chrome && !!anyWindow.chrome.webstore) {\n            browser = SUPPORTED_BROWSERS.CHROME;\n        } else if (this._isSafari()) {\n            browser = SUPPORTED_BROWSERS.SAFARI;\n        }\n\n        return browser;\n    }\n\n    /*\n\t\tIt is always better to detect a browser via features. Unfortunately, it's becoming really hard to identify \n\t\tSafari, since newer versions do not match the previous ones. Thus, we have to rely on User Agent as the last\n\t\toption. \n\t*/\n    _isSafari = () => {\n        // return this.getCurrentBrowser() === SUPPORTED_BROWSERS.SAFARI;\n        const userAgent = window.navigator.userAgent;\n        const vendor = window.navigator.vendor;\n\n        const testFeature = /constructor/i.test(\n            function HTMLElementConstructor() {\n                //\n            }.toString()\n        );\n        const testUserAgent =\n            vendor && vendor.indexOf('Apple') > -1 && userAgent && !userAgent.match('CriOS');\n\n        return testFeature || testUserAgent;\n    };\n\n    isIE = () => {\n        return this.getCurrentBrowser() === SUPPORTED_BROWSERS.IE;\n    };\n\n    isFF = () => {\n        return this.getCurrentBrowser() === SUPPORTED_BROWSERS.FIREFOX;\n    };\n\n    isSafari = () => {\n        return this.getCurrentBrowser() === SUPPORTED_BROWSERS.SAFARI;\n    };\n\n    getBrowserLocale(): string {\n        const locale = window.navigator.language.split('-');\n        return locale.length === 1 ? locale[0] : locale[0] + '_' + locale[1].toUpperCase();\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { TypedMap } from '../../dtos';\n\nexport type TranslationMap = TypedMap<string>;\n\n/**\n * @module blabla\n */\nexport abstract class ITranslationsFetchService {\n    abstract get(lang: string): Promise<TranslationMap>;\n\n    abstract isReady(): Promise<boolean>;\n\n    abstract waitToBeReady(): Promise<void>;\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n\nimport { ISelectItem } from '../../interfaces';\nimport { IToolingLanguage } from '../../services';\n\nexport enum LanguageSortStrategy {\n    Default = 'default',\n    None = 'none'\n}\nexport interface ILanguageSortConfig {\n    strategy: LanguageSortStrategy;\n}\n\n// @dynamic\nexport class LanguageDropdownHelper {\n    static findSelectLanguageWithIsoCodePredicate(\n        isoCode: string\n    ): (item: ISelectItem<IToolingLanguage>) => boolean {\n        return (item: ISelectItem<IToolingLanguage>) => item.value.isoCode === isoCode;\n    }\n\n    /**\n     * Finds the language with a specified isoCode.\n     *\n     * @param {string} isoCode\n     * @param {IToolingLanguage[]} languages\n     * @returns {IToolingLanguage}\n     */\n    static findLanguageWithIsoCode(\n        isoCode: string,\n        languages: IToolingLanguage[]\n    ): IToolingLanguage {\n        return languages.find((language) => language.isoCode === isoCode) as IToolingLanguage;\n    }\n\n    /**\n     * Returns an ordered language array by name and sets the selected language at the beginning.\n     *\n     * @param {IToolingLanguage} selectedLanguage\n     * @param {IToolingLanguage[]} languages\n     * @param {ILanguageSortConfig} config\n     * @returns {IToolingLanguage[]}\n     */\n\n    static order(\n        selectedLanguage: IToolingLanguage,\n        languages: IToolingLanguage[],\n        config: ILanguageSortConfig = { strategy: LanguageSortStrategy.Default }\n    ): IToolingLanguage[] {\n        switch (config.strategy) {\n            case LanguageSortStrategy.Default:\n                const orderedLanguages = languages\n                    .filter((language) => language.isoCode !== selectedLanguage.isoCode)\n                    .sort((a, b) => {\n                        return a.isoCode.localeCompare(b.isoCode);\n                    });\n\n                return [selectedLanguage, ...orderedLanguages];\n\n            case LanguageSortStrategy.None:\n                return languages;\n        }\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { stringUtils } from '../../utils';\n/** @internal */\nexport class FingerPrintingService {\n    private readonly _fingerprint: string = stringUtils.encode(\n        this.getUserAgent() +\n            this.getPlugins() +\n            this.hasJava() +\n            this.hasFlash() +\n            this.hasLocalStorage() +\n            this.hasSessionStorage() +\n            this.hasCookie() +\n            this.getTimeZone() +\n            this.getLanguage() +\n            this.getSystemLanguage() +\n            this.hasCanvas()\n    );\n\n    /**\n     * Get unique browser fingerprint information encoded in Base64.\n     */\n    getFingerprint(): string {\n        return this._fingerprint;\n    }\n\n    private getUserAgent(): string {\n        return navigator.userAgent;\n    }\n\n    private getPlugins(): string {\n        const plugins = [];\n        for (let i = 0, l = navigator.plugins.length; i < l; i++) {\n            if (navigator.plugins[i]) {\n                plugins.push(navigator.plugins[i].name);\n            }\n        }\n        return plugins.join(',');\n    }\n\n    private hasJava(): boolean {\n        return navigator.javaEnabled();\n    }\n\n    private hasFlash(): boolean {\n        return !!navigator.plugins.namedItem('Shockwave Flash');\n    }\n\n    private hasLocalStorage(): boolean {\n        try {\n            const hasLs = 'test-has-ls';\n            localStorage.setItem(hasLs, hasLs);\n            localStorage.removeItem(hasLs);\n            return true;\n        } catch (exception) {\n            return false;\n        }\n    }\n\n    private hasSessionStorage(): boolean {\n        try {\n            const hasSs = 'test-has-ss';\n            sessionStorage.setItem(hasSs, hasSs);\n            sessionStorage.removeItem(hasSs);\n            return true;\n        } catch (exception) {\n            return false;\n        }\n    }\n\n    private hasCookie(): boolean {\n        return navigator.cookieEnabled;\n    }\n\n    private getTimeZone(): string {\n        return String(String(new Date()).split('(')[1]).split(')')[0];\n    }\n\n    private getLanguage(): string {\n        return navigator.language;\n    }\n\n    private getSystemLanguage(): string {\n        return window.navigator.language;\n    }\n\n    private hasCanvas(): boolean {\n        try {\n            const elem = document.createElement('canvas');\n            return !!(elem.getContext && elem.getContext('2d'));\n        } catch (e) {\n            return false;\n        }\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Injectable } from '@angular/core';\nimport { TranslateLoader } from '@ngx-translate/core';\nimport { from, Observable } from 'rxjs';\nimport { TypedMap } from '../../dtos';\nimport { ITranslationsFetchService } from './i-translations-fetch.service';\n\n/* @internal */\n@Injectable()\nexport class TranslateHttpLoader implements TranslateLoader {\n    constructor(private translationsFetchService: ITranslationsFetchService) {}\n\n    /**\n     * Gets the translations from the server\n     */\n    public getTranslation(lang: string): Observable<TypedMap<string>> {\n        return from(this.translationsFetchService.get(lang));\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { APP_INITIALIZER, ComponentRef, ModuleWithProviders, NgModule } from '@angular/core';\nimport { TranslateLoader, TranslateModule, TranslateService } from '@ngx-translate/core';\nimport { moduleUtils } from '../../utils';\nimport { BrowserService } from '../../services/browser';\nimport { IStorageService } from '../../interfaces';\nimport { ITranslationsFetchService } from './i-translations-fetch.service';\nimport { TranslateHttpLoader } from './translate-http.loader';\n\n@NgModule({\n    imports: [\n        TranslateModule.forRoot({\n            isolate: false,\n            loader: {\n                provide: TranslateLoader,\n                useClass: TranslateHttpLoader\n            }\n        })\n    ],\n    exports: [TranslateModule]\n})\nexport class TranslationModule {\n    static forChild() {\n        return TranslateModule.forChild({\n            isolate: false,\n            loader: {\n                provide: TranslateLoader,\n                useClass: TranslateHttpLoader\n            }\n        });\n    }\n\n    static forRoot(\n        TranslationsFetchServiceClass: new (...args: any[]) => ITranslationsFetchService\n    ): ModuleWithProviders {\n        return {\n            ngModule: TranslationModule,\n            providers: [\n                {\n                    provide: ITranslationsFetchService,\n                    useClass: TranslationsFetchServiceClass\n                },\n                {\n                    provide: APP_INITIALIZER,\n                    useFactory(\n                        translate: TranslateService,\n                        storageService: IStorageService,\n                        browserService: BrowserService\n                    ) {\n                        storageService\n                            .getValueFromLocalStorage('SELECTED_LANGUAGE', false)\n                            .then(\n                                (lang: { name: string; isoCode: string }) => {\n                                    return lang ? lang.isoCode : browserService.getBrowserLocale();\n                                },\n                                () => {\n                                    return browserService.getBrowserLocale();\n                                }\n                            )\n                            .then((lang: string) => {\n                                translate.setDefaultLang(lang);\n                                translate.use(lang);\n                            });\n\n                        return (component: ComponentRef<any>) => {\n                            // an initializer useFactory must return a function\n                        };\n                    },\n                    deps: [TranslateService, IStorageService, BrowserService],\n                    multi: true\n                }\n            ]\n        };\n    }\n}\n","/**\n * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { InjectionToken } from '@angular/core';\n\nexport interface LoginDialogResource {\n    topLogoURL: string;\n    bottomLogoURL: string;\n}\n\nexport const LoginDialogResourceProvider: InjectionToken<LoginDialogResource> = new InjectionToken(\n    'LoginDialogResourceProvider'\n);\n","/**\n * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Component, HostBinding, Inject, OnInit, Optional } from '@angular/core';\nimport { AbstractControl, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { HttpClient, HttpErrorResponse, HttpHeaders, HttpResponse } from '@angular/common/http';\nimport { ModalRef } from '@fundamental-ngx/core';\n\nimport { StringUtils, UrlUtils } from '../../utils';\nimport { LogService } from '../../services/log.service';\nimport {\n    IAuthToken,\n    ILoginData,\n    ILoginModalFeedback,\n    ISessionService,\n    IStorageService\n} from '../../interfaces';\nimport { SSOAuthenticationHelper } from '../../services/authentication/sso-authentication.helper';\nimport { DEFAULT_AUTHENTICATION_ENTRY_POINT } from '../../constants';\nimport { LoginDialogResource, LoginDialogResourceProvider } from './login-dialog-resource-provider';\n\ninterface IRequestPayload {\n    username: string;\n    password: string;\n    grant_type: string;\n}\n\n@Component({\n    selector: 'su-login-dialog',\n    styleUrls: ['./login-dialog.component.scss'],\n    templateUrl: './login-dialog.component.html'\n})\nexport class LoginDialogComponent implements OnInit {\n    @HostBinding('class.su-login-dialog') hostClass: boolean = true;\n\n    public data: ILoginData = (null as unknown) as ILoginData;\n    public authURIKey: string = '';\n    public authURI: string = '';\n    public isFullScreen: boolean = false;\n    public ssoEnabled: boolean = false;\n    public form: FormGroup = new FormGroup({\n        username: new FormControl('', Validators.required),\n        password: new FormControl('', Validators.required)\n    });\n\n    constructor(\n        private modalRef: ModalRef,\n        private logService: LogService,\n        private httpClient: HttpClient,\n        private sessionService: ISessionService,\n        private storageService: IStorageService,\n        private stringUtils: StringUtils,\n        private urlUtils: UrlUtils,\n        private ssoAuthenticationHelper: SSOAuthenticationHelper,\n        @Optional() @Inject(LoginDialogResourceProvider) public resource: LoginDialogResource\n    ) {}\n\n    ngOnInit() {\n        this.data = this.modalRef.data || {};\n\n        this.authURI = this.data.authURI;\n\n        this.isFullScreen = this.data.isFullScreen as boolean;\n        this.ssoEnabled = (this.data.ssoEnabled as boolean) && this.isMainEndPoint();\n\n        this.storageService.removeAuthToken(this.authURI);\n\n        this.authURIKey = btoa(this.authURI).replace(/=/g, '');\n\n        if (this.ssoAuthenticationHelper.isAutoSSOMain()) {\n            this.signinWithSSO();\n        }\n    }\n\n    public signinWithSSO = (): Promise<ILoginModalFeedback> => {\n        this.form.setErrors(null);\n\n        return this.ssoAuthenticationHelper\n            .launchSSODialog()\n            .then(\n                (data: IAuthToken) => this.storeAccessToken(data),\n                (error: HttpErrorResponse) => this.APIAuthenticationFailureReportFactory(error)\n            )\n            .then((userHasChanged: boolean) => this.acceptUser(userHasChanged));\n    };\n\n    public signinWithCredentials(): Promise<ILoginModalFeedback> {\n        this.form.setErrors(null);\n\n        if (this.hasRequiredCredentialsError()) {\n            this.form.setErrors({\n                credentialsRequiredError: 'se.logindialogform.username.and.password.required'\n            });\n\n            return Promise.reject();\n        }\n\n        const payload = {\n            ...(this.data.clientCredentials || {}),\n            username: (this.form.get('username') as FormControl).value,\n            password: (this.form.get('password') as FormControl).value,\n            grant_type: 'password'\n        } as IRequestPayload;\n\n        return this.sendCredentials(payload)\n            .then(\n                (response: HttpResponse<IAuthToken> | IAuthToken) =>\n                    this.storeAccessToken(response),\n                (error) => this.APIAuthenticationFailureReportFactory(error)\n            )\n            .then((hasUserChanged: boolean) => this.acceptUser(hasUserChanged));\n    }\n\n    private isMainEndPoint(): boolean {\n        return DEFAULT_AUTHENTICATION_ENTRY_POINT === this.authURI;\n    }\n\n    private storeAccessToken(\n        response: HttpResponse<IAuthToken> | IAuthToken\n    ): PromiseLike<boolean> {\n        const token = response instanceof HttpResponse ? response.body : response;\n        this.storageService.storeAuthToken(this.authURI, token as IAuthToken);\n        this.logService.debug(`API Authentication Success: ${this.authURI}`);\n        return this.isMainEndPoint()\n            ? this.sessionService.hasUserChanged()\n            : Promise.resolve(false);\n    }\n\n    private sendCredentials = (payload: IRequestPayload): Promise<HttpResponse<IAuthToken>> => {\n        return this.httpClient\n            .request<IAuthToken>('POST', this.authURI, {\n                headers: new HttpHeaders().set('Content-Type', 'application/x-www-form-urlencoded'),\n                body: this.urlUtils.getQueryString(payload).replace('?', ''),\n                observe: 'response'\n            })\n            .toPromise();\n    };\n\n    private APIAuthenticationFailureReportFactory(error: HttpErrorResponse): Promise<never> {\n        this.logService.debug(\n            `API Authentication Failure: ${this.authURI} status: ${error.status}`\n        );\n\n        this.form.setErrors({\n            asyncValidationError:\n                (error.error && this.stringUtils.sanitize(error.error.error_description)) ||\n                'se.logindialogform.oauth.error.default'\n        });\n\n        return Promise.reject(error);\n    }\n\n    private acceptUser(userHasChanged: boolean): Promise<ILoginModalFeedback> {\n        this.modalRef.close({\n            userHasChanged\n        });\n        if (this.isMainEndPoint()) {\n            this.sessionService.setCurrentUsername();\n        }\n        return Promise.resolve({ userHasChanged });\n    }\n\n    private hasRequiredCredentialsError(): boolean {\n        const username: AbstractControl = this.form.get('username') as AbstractControl;\n        const password: AbstractControl = this.form.get('password') as AbstractControl;\n\n        return (\n            (username.errors && username.errors.required) ||\n            (password.errors && password.errors.required)\n        );\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n\nimport { ISelectItem } from '../../interfaces/i-select-item';\nimport { ISelectAdapter } from '../select/i-select-adapter';\nimport { IToolingLanguage } from '../../services';\n\nexport class LanguageDropdownAdapter implements ISelectAdapter {\n    static transform(item: IToolingLanguage, id: number): ISelectItem<IToolingLanguage> {\n        return {\n            id,\n            label: item.name,\n            value: item\n        };\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n\nimport { TranslateService } from '@ngx-translate/core';\nimport { Inject, Injectable, Injector } from '@angular/core';\nimport {\n    EVENT_SERVICE,\n    LANGUAGE_SERVICE_CONSTANTS,\n    SELECTED_LANGUAGE,\n    SWITCH_LANGUAGE_EVENT\n} from '../constants';\nimport { Payload } from '../dtos';\nimport { IEventService, ILanguageServiceConstants, IStorageService } from '../interfaces';\nimport { BrowserService } from './browser';\nimport { rarelyChangingContent, Cached } from './cache';\nimport { LogService } from './log.service';\nimport { IRestService, IRestServiceFactory, RestServiceFactory } from './rest';\nimport { PromiseUtils } from '../utils';\n\n/**\n * @ngdoc interface\n * @name @smartutils.interfaces:ILanguage\n * @description\n * Interface for language information\n */\nexport interface ILanguage extends Payload {\n    active: boolean;\n    isocode: string;\n    name: string;\n    nativeName: string;\n    required: boolean;\n}\n\nexport interface IToolingLanguage extends Payload {\n    isoCode: string;\n    name: string;\n}\n\n/**\n * @ngdoc object\n * @name resourceLocationsModule.object:LANGUAGE_RESOURCE_URI\n *\n * @description\n * Resource URI of the languages REST service.\n */\n\n/**\n * @ngdoc service\n * @name @smartutils.services:LanguageService\n */\n\n@Injectable()\nexport class LanguageService {\n    constructor(\n        protected logService: LogService,\n        protected translateService: TranslateService,\n        protected promiseUtils: PromiseUtils,\n        @Inject(EVENT_SERVICE) protected eventService: IEventService,\n        protected browserService: BrowserService,\n        protected storageService: IStorageService,\n        protected injector: Injector,\n        @Inject(LANGUAGE_SERVICE_CONSTANTS)\n        protected languageServiceConstants: ILanguageServiceConstants\n    ) {}\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:LanguageService#getBrowserLanguageIsoCode\n     * @methodOf @smartutils.services:LanguageService\n     *\n     * @deprecated since 1808\n     *\n     * @description\n     * Uses the browser's current locale to determine the selected language ISO code.\n     *\n     * @returns {String} The language ISO code of the browser's currently selected locale.\n     */\n    getBrowserLanguageIsoCode(): string {\n        return window.navigator.language.split('-')[0];\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:LanguageService#getBrowserLocale\n     * @methodOf @smartutils.services:LanguageService\n     *\n     * @deprecated since 1808 - use browserService instead.\n     *\n     * @description\n     * determines the browser locale in the format en_US\n     *\n     * @returns {string} the browser locale\n     */\n    getBrowserLocale(): string {\n        return this.browserService.getBrowserLocale();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:LanguageService#getResolveLocale\n     * @methodOf @smartutils.services:LanguageService\n     *\n     * @description\n     * Resolve the user preference tooling locale. It determines in the\n     * following order:\n     *\n     * 1. Check if the user has previously selected the language\n     * 2. Check if the user browser locale is supported in the system\n     *\n     * @returns {Promise<string>} the locale\n     */\n    getResolveLocale(): Promise<string> {\n        return this._getDefaultLanguage();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:LanguageService#getResolveLocaleIsoCode\n     * @methodOf @smartutils.services:LanguageService\n     *\n     * @description\n     * Resolve the user preference tooling locale ISO code. i.e.: If the selected tooling language is 'en_US',\n     * the resolved value will be 'en'.\n     *\n     * @returns {Promise<string>} A promise that resolves to the isocode of the tooling language.\n     */\n    getResolveLocaleIsoCode(): Promise<string> {\n        return this.getResolveLocale().then((resolveLocale: string) => {\n            return this.convertBCP47TagToJavaTag(resolveLocale).split('_')[0];\n        });\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:LanguageService#getToolingLanguages\n     * @methodOf @smartutils.services:LanguageService\n     *\n     * @description\n     * Retrieves a list of language descriptors using REST calls to the i18n API.\n     *\n     * @returns {Promise<IToolingLanguage[]>} A promise that resolves to an array of IToolingLanguage.\n     */\n    @Cached({ actions: [rarelyChangingContent] })\n    getToolingLanguages(): Promise<IToolingLanguage[]> {\n        return this.i18nLanguageRestService\n            .get({})\n            .then((response) => {\n                return response!.languages;\n            })\n            .catch((error: any) => {\n                this.logService.error(\n                    'LanguageService.getToolingLanguages() - Error loading tooling languages'\n                );\n                return Promise.reject(error);\n            });\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:LanguageService#setSelectedToolingLanguage\n     * @methodOf @smartutils.services:LanguageService\n     *\n     * @description\n     * Set the user preference language in the storage service\n     *\n     * @param {IToolingLanguage} language the language object to be saved.\n     */\n    setSelectedToolingLanguage(language: IToolingLanguage): void {\n        this.storageService.setValueInLocalStorage(SELECTED_LANGUAGE, language, false);\n        this.translateService.use(language.isoCode);\n        this.setApplicationTitle();\n        this.eventService.publish(SWITCH_LANGUAGE_EVENT, {\n            isoCode: language.isoCode\n        });\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:LanguageService#registerSwitchLanguage\n     * @methodOf @smartutils.services:LanguageService\n     *\n     * @description\n     * Register a callback function to the gateway in order to switch the tooling language\n     */\n    registerSwitchLanguage(): void {\n        this.eventService.subscribe<IToolingLanguage>(\n            SWITCH_LANGUAGE_EVENT,\n            (eventId: string, language?: IToolingLanguage) => {\n                if (this.translateService.currentLang !== language!.isoCode) {\n                    this.translateService.use(language!.isoCode);\n                }\n            }\n        );\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:LanguageService#convertBCP47TagToJavaTag\n     * @methodOf @smartutils.services:LanguageService\n     *\n     * @description\n     * Method converts the BCP47 language tag representing the locale to the default java representation.\n     * For example, method converts \"en-US\" to \"en_US\".\n     *\n     * @param {string} languageTag the language tag to be converted.\n     *\n     * @returns {string} the languageTag in java representation\n     */\n    convertBCP47TagToJavaTag(languageTag: string): string {\n        return !!languageTag ? languageTag.replace(/-/g, '_') : languageTag;\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:LanguageService#convertJavaTagToBCP47Tag\n     * @methodOf @smartutils.services:LanguageService\n     *\n     * @description\n     * Method converts the default java language tag representing the locale to the BCP47 representation.\n     * For example, method converts \"en_US\" to \"en-US\".\n     *\n     * @param {string} languageTag the language tag to be converted.\n     *\n     * @returns {string} the languageTag in BCP47 representation\n     */\n    convertJavaTagToBCP47Tag(languageTag: string): string {\n        return !!languageTag ? languageTag.replace(/_/g, '-') : languageTag;\n    }\n\n    protected _getDefaultLanguage(): Promise<string> {\n        return this.storageService.getValueFromLocalStorage(SELECTED_LANGUAGE, false).then(\n            (lang: { name: string; isoCode: string }) => {\n                return lang ? lang.isoCode : this.browserService.getBrowserLocale();\n            },\n            () => {\n                return this.browserService.getBrowserLocale();\n            }\n        );\n    }\n\n    protected setApplicationTitle() {\n        this.translateService.get('se.application.name').subscribe((pageTitle: string) => {\n            document.title = pageTitle;\n        });\n    }\n\n    protected get i18nLanguageRestService(): IRestService<{ languages: IToolingLanguage[] }> {\n        return this.injector\n            .get<IRestServiceFactory>(RestServiceFactory)\n            .get<{ languages: IToolingLanguage[] }>(\n                this.languageServiceConstants.I18N_LANGUAGES_RESOURCE_URI\n            );\n    }\n}\n","import {\n    AfterContentInit,\n    ContentChildren,\n    Directive,\n    EventEmitter,\n    HostListener,\n    Input,\n    OnChanges,\n    Output,\n    QueryList,\n    SimpleChanges\n} from '@angular/core';\n\nimport { ListItemKeyboardControlDirective } from './list-item-keyboard-control.directive';\n\nexport enum KeyboardKey {\n    ArrowDown = 'ArrowDown',\n    ArrowUp = 'ArrowUp',\n    Enter = 'Enter',\n    Esc = 'Escape'\n}\n\nexport type ListKeyboardControlDisabledPredicate = (\n    item: ListItemKeyboardControlDirective,\n    index: number\n) => boolean;\n\n/**\n * Directive that manages the active option in a list of items based on keyboard interaction.\n * For disabled options, a predicate must be passed with `suListKeyboardControlDisabledPredicate`\n * which will prevent that option from navigating with arrow up / down key.\n *\n * Note: It will include only direct children having the `suListItemKeyboardControl` directive.\n *\n * @example\n * ```\n * items = [\n *   {\n *     id: 1,\n *     label: 'item 1'\n *   },\n *   {\n *     id: 2,\n *     label: 'item 2'\n *   },\n *   {\n *     id: 3,\n *     label: 'item 3'\n *   }\n * ]\n * <ul suListKeyboardControl>\n *   <li suListItemKeyboardControl *ngFor=\"let item of items\">\n *     {{ item.label }}\n *   </li>\n * </ul>\n * ```\n */\n@Directive({\n    selector: '[suListKeyboardControl]'\n})\nexport class ListKeyboardControlDirective implements OnChanges, AfterContentInit {\n    /** Whether the keyboard interaction is enabled */\n    @Input() suListKeyboardControlEnabled = true;\n    /** Predicate called for each item. If true, the item will be excluded from keyboard navigation */\n    @Input() suListKeyboardControlDisabledPredicate?: ListKeyboardControlDisabledPredicate;\n    @Output() suListKeyboardControlEnterKeydown = new EventEmitter<number | null>();\n    @Output() suListKeyboardControlEscKeydown = new EventEmitter<void>();\n\n    /** @internal */\n    @ContentChildren(ListItemKeyboardControlDirective) items!: QueryList<\n        ListItemKeyboardControlDirective\n    >;\n\n    /** @internal */\n    private didNgAfterContentInit = false;\n    /** @internal */\n    private shouldSetActiveAfterContentInit = false;\n    /** @internal */\n    private activeItem: ListItemKeyboardControlDirective | null = null;\n    /** @internal */\n    private activeItemIndex: number | null = null;\n\n    /** @internal */\n    ngAfterContentInit() {\n        this.items.changes.subscribe(() => {\n            // handler for changes in content\n            if (this.items.length === 0) {\n                this.clearActiveItem();\n                return;\n            }\n\n            if (this.suListKeyboardControlEnabled) {\n                this.setActiveItemByIndex(0, 1);\n            } else {\n                this.clearActiveItem();\n            }\n        });\n\n        if (this.shouldSetActiveAfterContentInit && this.items.length > 0) {\n            this.setActiveItemByIndex(0, 1);\n        }\n        this.didNgAfterContentInit = true;\n    }\n\n    /** @internal */\n    @HostListener('document:keydown', ['$event']) onKeyDown(event: KeyboardEvent): void {\n        if (!this.suListKeyboardControlEnabled || this.items.length === 0) {\n            return;\n        }\n\n        // For ArrowDown and ArrowUp prevent from scrolling the container.\n        // Focus event is called when setting an active item so it will also scroll if needed.\n        switch (event.key) {\n            case KeyboardKey.ArrowDown:\n                event.preventDefault();\n                this.handleArrowDown();\n                return;\n            case KeyboardKey.ArrowUp:\n                event.preventDefault();\n                this.handleArrowUp();\n                return;\n            case KeyboardKey.Enter:\n                event.preventDefault();\n                this.handleEnter();\n                return;\n            case KeyboardKey.Esc:\n                this.handleEsc();\n                return;\n        }\n    }\n\n    /** @internal */\n    ngOnInit() {\n        this.shouldSetActiveAfterContentInit = this.suListKeyboardControlEnabled;\n    }\n\n    /** @internal */\n    ngOnChanges(changes: SimpleChanges) {\n        if (!this.didNgAfterContentInit) {\n            return;\n        }\n\n        const enabledChange = changes.suListKeyboardControlEnabled;\n        const predicateChange = changes.suListKeyboardControlDisabledPredicate;\n\n        const shouldSetActive =\n            enabledChange && enabledChange.currentValue && !enabledChange.previousValue;\n\n        const shouldUnsetActive =\n            enabledChange && !enabledChange.currentValue && enabledChange.previousValue;\n\n        const shouldSetActiveForPredicate =\n            predicateChange && predicateChange.currentValue && !!this.suListKeyboardControlEnabled;\n        const shouldUnsetActiveForPredicate =\n            predicateChange &&\n            !predicateChange.currentValue &&\n            predicateChange.previousValue &&\n            !!this.suListKeyboardControlEnabled;\n\n        if (this.items.length === 0) {\n            return;\n        }\n\n        if (shouldSetActive || shouldSetActiveForPredicate) {\n            this.setFirstItemActive();\n        }\n\n        if (shouldUnsetActive || shouldUnsetActiveForPredicate) {\n            this.unsetActiveItem();\n        }\n    }\n\n    /** @internal */\n    private handleArrowUp(): void {\n        this.setPreviousItemActive();\n    }\n\n    /** @internal */\n    private handleArrowDown(): void {\n        this.setNextItemActive();\n    }\n\n    /** @internal */\n    private handleEnter(): void {\n        this.suListKeyboardControlEnterKeydown.emit(this.activeItemIndex);\n    }\n\n    /** @internal */\n    private handleEsc(): void {\n        this.suListKeyboardControlEscKeydown.emit();\n    }\n\n    /** @internal */\n    private getItemByIndex(index: number): ListItemKeyboardControlDirective {\n        const items = this.getItemsArray();\n        return items[index];\n    }\n\n    /** @internal */\n    private getItemsArray(): ListItemKeyboardControlDirective[] {\n        return this.items.toArray();\n    }\n\n    /** @internal */\n    private setActiveItemByIndex(index: number, delta: -1 | 1): void {\n        const items = this.getItemsArray();\n\n        if (this.suListKeyboardControlDisabledPredicate) {\n            while (this.suListKeyboardControlDisabledPredicate(items[index], index)) {\n                index += delta;\n\n                if (!items[index]) {\n                    return;\n                }\n            }\n        }\n\n        const item = this.getItemByIndex(index);\n        this.setActiveItem(item);\n    }\n\n    /** @internal */\n    private setActiveItem(item: ListItemKeyboardControlDirective): void {\n        const items = this.getItemsArray();\n        const index = items.indexOf(item);\n\n        if (this.activeItem) {\n            this.activeItem.setInactive();\n        }\n\n        if (items.length > 0) {\n            this.activeItem = items[index];\n            this.activeItem.setActive();\n            this.activeItemIndex = index;\n        }\n    }\n\n    /** @internal */\n    private unsetActiveItem(): void {\n        if (!this.activeItem) {\n            return;\n        }\n\n        this.activeItem.setInactive();\n        this.activeItemIndex = null;\n    }\n\n    /** @internal */\n    private setFirstItemActive(): void {\n        this.setActiveItemByIndex(0, 1);\n    }\n\n    /** @internal */\n    private setNextItemActive(): void {\n        if (this.activeItemIndex === null) {\n            this.setFirstItemActive();\n            return;\n        }\n\n        if (this.activeItemIndex < this.items.length - 1) {\n            this.setActiveItemByIndex(this.activeItemIndex + 1, 1);\n        }\n    }\n\n    /** @internal */\n    private setPreviousItemActive(): void {\n        if (this.activeItemIndex === null) {\n            this.setFirstItemActive();\n            return;\n        }\n\n        if (this.activeItemIndex > 0) {\n            this.setActiveItemByIndex(this.activeItemIndex - 1, -1);\n        }\n    }\n\n    /** @internal */\n    private clearActiveItem(): void {\n        this.activeItem = null;\n        this.activeItemIndex = null;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n\nimport { Input } from '@angular/core';\nimport { ISelectItem } from '../../interfaces/i-select-item';\nimport { IEventService } from '../../interfaces/i-event.service';\nimport { IToolingLanguage, LanguageService } from '../../services/language.service';\nimport { DEFAULT_LANGUAGE_ISO, SWITCH_LANGUAGE_EVENT } from '../../constants';\nimport { LanguageDropdownHelper, LanguageSortStrategy } from './language-dropdown-helper';\nimport { LanguageDropdownAdapter } from './language-dropdown-adapter';\n\nexport class LanguageDropdown {\n    @Input() languageSortStrategy: LanguageSortStrategy = LanguageSortStrategy.Default;\n\n    public selectedLanguage: IToolingLanguage = (null as unknown) as IToolingLanguage;\n    public items: ISelectItem<IToolingLanguage>[] = [];\n    public initialLanguage: ISelectItem<IToolingLanguage> = (null as unknown) as ISelectItem<\n        IToolingLanguage\n    >;\n\n    private languages: IToolingLanguage[] = [];\n    private unRegisterEventService: () => void = (null as unknown) as () => void;\n\n    constructor(public languageService: LanguageService, public eventService: IEventService) {}\n\n    ngOnInit(): void {\n        Promise.all([\n            this.languageService.getResolveLocale(),\n            this.languageService.getToolingLanguages()\n        ]).then(([isoCode, languages]: [string, IToolingLanguage[]]) => {\n            this.items = languages.map(LanguageDropdownAdapter.transform);\n            this.languages = languages;\n\n            this.setSelectedLanguage(isoCode);\n            this.setInitialLanguage(isoCode);\n        });\n\n        this.unRegisterEventService = this.eventService.subscribe(SWITCH_LANGUAGE_EVENT, () =>\n            this.handleLanguageChange()\n        );\n    }\n\n    ngOnDestroy(): void {\n        this.unRegisterEventService();\n    }\n\n    /**\n     * Triggered when an user selects a language.\n     * @param {IToolingLanguage} language\n     */\n    onSelectedLanguage(item: ISelectItem<IToolingLanguage>) {\n        this.languageService.setSelectedToolingLanguage(item.value);\n    }\n\n    /**\n     * Set initial language to be displayed in dropdown\n     *\n     * @param {string} isoCode\n     */\n\n    private setInitialLanguage(isoCode: string): void {\n        this.initialLanguage =\n            (this.items.find(\n                LanguageDropdownHelper.findSelectLanguageWithIsoCodePredicate(isoCode)\n            ) as ISelectItem<IToolingLanguage>) ||\n            this.items.find(\n                LanguageDropdownHelper.findSelectLanguageWithIsoCodePredicate(DEFAULT_LANGUAGE_ISO)\n            );\n    }\n    /**\n     * Triggered onInit and when language service sets a new language.\n     *\n     * @param {IToolingLanguage[]} languages\n     * @param {string} isoCode\n     */\n    private setSelectedLanguage(isoCode: string): void {\n        this.selectedLanguage = LanguageDropdownHelper.findLanguageWithIsoCode(\n            isoCode,\n            this.languages\n        );\n\n        if (this.selectedLanguage) {\n            const sortedLanguages = LanguageDropdownHelper.order(\n                this.selectedLanguage,\n                this.languages,\n                { strategy: this.languageSortStrategy }\n            );\n\n            this.items = sortedLanguages.map(LanguageDropdownAdapter.transform);\n            return;\n        }\n\n        // In case the iso code is too specific, it will use the more generic iso code to set the language.\n        this.languageService.getResolveLocaleIsoCode().then((code: string) => {\n            this.selectedLanguage = LanguageDropdownHelper.findLanguageWithIsoCode(\n                code,\n                this.languages\n            );\n            const sortedLanguages = LanguageDropdownHelper.order(\n                this.selectedLanguage,\n                this.languages,\n                { strategy: this.languageSortStrategy }\n            );\n            this.items = sortedLanguages.map(LanguageDropdownAdapter.transform);\n        });\n    }\n\n    /**\n     * Callback for setting the selected language.\n     */\n    private handleLanguageChange(): void {\n        this.languageService.getResolveLocale().then((isoCode: string) => {\n            this.setSelectedLanguage(isoCode);\n        });\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n\nimport { Component, Inject } from '@angular/core';\nimport { LanguageService } from '../../services/language.service';\nimport { EVENT_SERVICE, LANGUAGE_SERVICE } from '../../constants';\nimport { IEventService } from '../../interfaces';\n\nimport { LanguageDropdown } from './language-dropdown';\n\n/**\n * @ngdoc component\n * @name  @smartutils.components:LanguageDropdownComponent\n *\n * @description\n * A component responsible for displaying and selecting application language. Uses {@link @smartutils.components:SelectComponent SelectComponent} to show language items\n *\n */\n\n@Component({\n    selector: 'su-language-dropdown',\n    template: `\n        <su-select\n            class=\"su-language-selector\"\n            [items]=\"items\"\n            [initialValue]=\"initialLanguage\"\n            (onItemSelected)=\"onSelectedLanguage($event)\"\n        >\n        </su-select>\n    `\n})\nexport class LanguageDropdownComponent extends LanguageDropdown {\n    constructor(\n        @Inject(LANGUAGE_SERVICE) languageService: LanguageService,\n        @Inject(EVENT_SERVICE) public eventService: IEventService\n    ) {\n        super(languageService, eventService);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n\nimport { ISelectItem } from '../../interfaces/i-select-item';\n\nexport abstract class ISelectAdapter {\n    static transform<T>(item: T, id: number): ISelectItem<T> {\n        return {} as ISelectItem<T>;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n\nimport {\n    forwardRef,\n    Component,\n    EventEmitter,\n    Input,\n    OnChanges,\n    Output,\n    SimpleChanges,\n    ViewChild,\n    ViewEncapsulation\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport { BaseValueAccessor } from '../../utils/base-value-accessor';\nimport { ISelectItem } from '../../interfaces/i-select-item';\n\n/**\n * @ngdoc component\n * @name  @smartutils.components:SelectComponent\n *\n * @description\n * Dropdown component allowing to select item from dropdown\n *\n * @param {ISelectItem<T>[]} items Items to displayed in dropdown\n * @param {ISelectItem<T>} initialValue Value dropdown should be initialized with\n * @param {string} placeholder String to be displayed when value is not selected\n * @param {Boolean} isKeyboardControlEnabled Flag enabling dropdown items selection with arrow keys\n * @param {Boolean} hasCustomTrigger If set true the trigger opening the dropdown will be set by user\n */\n\n@Component({\n    selector: 'su-select',\n    encapsulation: ViewEncapsulation.None,\n    providers: [\n        { provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => SelectComponent), multi: true }\n    ],\n    styleUrls: ['./select.component.scss'],\n    template: `\n        <fd-popover #popover fillControlMode=\"equal\" class=\"su-select\">\n            <fd-popover-control class=\"su-select__popover-control\">\n                <button\n                    class=\"fd-dropdown__control fd-button\"\n                    type=\"button\"\n                    *ngIf=\"!hasCustomTrigger; else customTrigger\"\n                >\n                    {{ (value && value.label) || placeholder | translate }}\n                </button>\n\n                <ng-template #customTrigger>\n                    <ng-content select=\"[su-select-custom-trigger]\"></ng-content>\n                </ng-template>\n            </fd-popover-control>\n            <fd-popover-body>\n                <fd-menu class=\"su-select__menu\">\n                    <ul\n                        fd-menu-list\n                        suListKeyboardControl\n                        [suListKeyboardControlEnabled]=\"isKeyboardControlEnabled && popover.isOpen\"\n                        (suListKeyboardControlEnterKeydown)=\"selectItem($event)\"\n                    >\n                        <li\n                            fd-menu-item\n                            suListItemKeyboardControl\n                            [ngClass]=\"item.listItemClassName\"\n                            *ngFor=\"let item of items\"\n                            (click)=\"selectItem(item.id)\"\n                            [attr.tabindex]=\"-1\"\n                            [attr.data-select-id]=\"item.id\"\n                        >\n                            {{ item.label | translate }}\n                        </li>\n                    </ul>\n                </fd-menu>\n            </fd-popover-body>\n        </fd-popover>\n    `\n})\nexport class SelectComponent<T> extends BaseValueAccessor<ISelectItem<T>> implements OnChanges {\n    @Input() items: ISelectItem<T>[] = [];\n    @Input() initialValue: ISelectItem<T> = (null as unknown) as ISelectItem<T>;\n    @Input() placeholder: string = '';\n    @Input() isKeyboardControlEnabled: boolean = true;\n    @Input() hasCustomTrigger: boolean = false;\n    @Output() onItemSelected: EventEmitter<ISelectItem<T>> = new EventEmitter();\n\n    @ViewChild('popover', { static: false }) popover: any; // PopoverComponent\n\n    selectItem(id: number): void {\n        const item: ISelectItem<T> = this.items.find(\n            (selected) => selected.id === id\n        ) as ISelectItem<T>;\n\n        this.setValue(item);\n        this.popover.close();\n        this.onItemSelected.emit(item);\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes.initialValue && changes.initialValue.currentValue && !this.value) {\n            this.setInitialValue(changes.initialValue.currentValue);\n        }\n    }\n\n    private setInitialValue(value: ISelectItem<T> | number): void {\n        if (typeof value === 'number') {\n            this.setValueById(value);\n        } else {\n            this.setValue(value);\n        }\n    }\n\n    private setValue(item: ISelectItem<T>): void {\n        this.writeValue(item);\n        this.onChange(item);\n    }\n\n    private setValueById(id: number): void {\n        this.setValue(this.items.find((item) => item.id === id) as ISelectItem<T>);\n    }\n}\n","import { Directive, ElementRef, OnInit, Renderer2 } from '@angular/core';\n\n/**\n * Directive for marking list item for 'ListKeyboardControlDirective' to allow for navigating with keyboard.\n */\n@Directive({\n    selector: '[suListItemKeyboardControl]'\n})\nexport class ListItemKeyboardControlDirective implements OnInit {\n    /** @internal */\n    private readonly activeClassName = 'is-active';\n\n    constructor(private hostElement: ElementRef, private renderer: Renderer2) {}\n\n    /** @internal */\n    ngOnInit() {\n        this.setTabIndex();\n    }\n\n    public getElement(): HTMLElement {\n        return this.hostElement.nativeElement;\n    }\n\n    public setActive(): void {\n        const elm = this.getElement();\n        this.renderer.addClass(elm, this.activeClassName);\n\n        elm.scrollIntoView({ block: 'nearest' });\n    }\n\n    public setInactive(): void {\n        this.renderer.removeClass(this.getElement(), this.activeClassName);\n    }\n\n    /** @internal */\n    private setTabIndex(): void {\n        this.renderer.setAttribute(this.getElement(), 'tabindex', '-1');\n    }\n}\n","import { NgModule } from '@angular/core';\n\nimport { ListKeyboardControlDirective } from './list-keyboard-control.directive';\nimport { ListItemKeyboardControlDirective } from './list-item-keyboard-control.directive';\n\n@NgModule({\n    declarations: [ListKeyboardControlDirective, ListItemKeyboardControlDirective],\n    exports: [ListKeyboardControlDirective, ListItemKeyboardControlDirective]\n})\nexport class ListKeyboardControlModule {}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FundamentalNgxCoreModule } from '@fundamental-ngx/core';\nimport { SelectComponent } from './select.component';\nimport { ListKeyboardControlModule } from '../../directives';\nimport { TranslationModule } from '../../services/translations';\n\n@NgModule({\n    imports: [\n        FundamentalNgxCoreModule,\n        CommonModule,\n        ListKeyboardControlModule,\n        TranslationModule.forChild()\n    ],\n    declarations: [SelectComponent],\n    entryComponents: [SelectComponent],\n    exports: [SelectComponent]\n})\nexport class SelectModule {}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { LanguageDropdownComponent } from './language-dropdown.component';\nimport { SelectModule } from '../select';\n\n@NgModule({\n    imports: [CommonModule, SelectModule],\n    declarations: [LanguageDropdownComponent],\n    entryComponents: [LanguageDropdownComponent],\n    exports: [LanguageDropdownComponent]\n})\nexport class LanguageDropdownModule {}\n","/**\n * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AlertModule, ButtonModule, FormModule } from '@fundamental-ngx/core';\n\nimport { LanguageDropdownModule } from '../language-dropdown';\nimport { LoginDialogComponent } from './login-dialog.component';\nimport { TranslationModule } from '../../services/translations';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        LanguageDropdownModule,\n        FormsModule,\n        ReactiveFormsModule,\n        AlertModule,\n        TranslationModule.forChild(),\n        ButtonModule,\n        FormModule\n    ],\n    declarations: [LoginDialogComponent],\n    entryComponents: [LoginDialogComponent],\n    exports: [LanguageDropdownModule]\n})\nexport class LoginDialogModule {}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/*\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n */\n\nimport { Inject, Optional } from '@angular/core';\nimport * as lodash from 'lodash';\n\nimport { functionsUtils } from '../../utils';\nimport {\n    IAuthenticationManagerService,\n    IAuthenticationService,\n    IAuthToken,\n    ICredentialsMapRecord,\n    IEventService,\n    ILoginData,\n    ILoginModalFeedback,\n    IModalService,\n    ISettingsService,\n    ISharedDataService,\n    IStorageService\n} from '../../interfaces';\nimport { ITranslationsFetchService } from '../translations';\nimport {\n    DEFAULT_AUTH_MAP,\n    DEFAULT_AUTHENTICATION_ENTRY_POINT,\n    DEFAULT_CREDENTIALS_MAP,\n    EVENT_SERVICE,\n    EVENTS\n} from '../../constants';\nimport { SSOAuthenticationHelper } from './sso-authentication.helper';\nimport { Cloneable } from '../../dtos';\nimport { LoginDialogComponent } from '../../components/login-dialog';\n\nexport interface ICredentialsMap {\n    [entryPoint: string]: ICredentialsMapRecord;\n}\n\nexport interface IAuthMap {\n    [entryPoint: string]: string;\n}\n\ninterface IAuthenticationMapEntry {\n    key: string;\n    value: string;\n}\n\nexport class AuthenticationService extends IAuthenticationService {\n    constructor(\n        protected translationsFetchService: ITranslationsFetchService,\n        protected modalService: IModalService,\n        protected sharedDataService: ISharedDataService,\n        protected storageService: IStorageService,\n        @Inject(EVENT_SERVICE) protected eventService: IEventService,\n        protected ssoAuthenticationHelper: SSOAuthenticationHelper,\n        protected settingsService: ISettingsService,\n        @Optional() protected authenticationManager: IAuthenticationManagerService\n    ) {\n        super();\n    }\n\n    filterEntryPoints(resource: string): Promise<string[]> {\n        return this.sharedDataService.get('authenticationMap').then((authenticationMap) => {\n            return functionsUtils\n                .convertToArray<string>({\n                    ...(((authenticationMap as unknown) as IAuthenticationMapEntry) || {}),\n                    ...DEFAULT_AUTH_MAP\n                })\n                .filter((entry: IAuthenticationMapEntry) =>\n                    new RegExp(entry.key, 'g').test(resource)\n                )\n                .map((element: IAuthenticationMapEntry) => element.value);\n        });\n    }\n\n    isAuthEntryPoint(resource: string): Promise<boolean> {\n        return this.sharedDataService.get('authenticationMap').then((authenticationMap) => {\n            const authEntryPoints = functionsUtils\n                .convertToArray<string>(((authenticationMap as unknown) as IAuthMap) || {})\n                .map((element: IAuthenticationMapEntry) => element.value);\n            return (\n                authEntryPoints.indexOf(resource) > -1 ||\n                resource === DEFAULT_AUTHENTICATION_ENTRY_POINT\n            );\n        });\n    }\n\n    authenticate(resource: string): Promise<void> {\n        return this._findLoginData(resource).then((loginData: ILoginData) => {\n            return this._launchAuth(loginData).then((modalFeedback: ILoginModalFeedback) => {\n                Promise.resolve(\n                    this.eventService.publish(EVENTS.AUTHORIZATION_SUCCESS, {\n                        userHasChanged: modalFeedback.userHasChanged\n                    })\n                ).then(() => {\n                    if (modalFeedback.userHasChanged) {\n                        this.eventService.publish(EVENTS.USER_HAS_CHANGED);\n                    }\n                    /**\n                     * We only need to reload when the user has changed and all authentication forms were closed.\n                     * There can be many authentication forms if some modules use different (from default one) end points.\n                     */\n                    const reauthInProcess = lodash\n                        .values(this.reauthInProgress)\n                        .some((inProcess: boolean) => inProcess);\n\n                    if (\n                        modalFeedback.userHasChanged &&\n                        !reauthInProcess &&\n                        this.authenticationManager &&\n                        this.authenticationManager.onUserHasChanged\n                    ) {\n                        this.authenticationManager.onUserHasChanged();\n                    }\n                });\n                this.reauthInProgress[loginData.authURI] = false;\n            });\n        });\n    }\n\n    logout(): Promise<void> {\n        // First, indicate the services that SmartEdit is logging out. This should give them the opportunity to clean up.\n        // NOTE: This is not synchronous since some clean-up might be lengthy, and logging out should be fast.\n        return this.eventService.publish(EVENTS.LOGOUT).then(() => {\n            this.storageService.removeAllAuthTokens();\n            if (this.ssoAuthenticationHelper.isAutoSSOMain()) {\n                this.ssoAuthenticationHelper.logout();\n            } else if (this.authenticationManager && this.authenticationManager.onLogout) {\n                this.authenticationManager.onLogout();\n            }\n        });\n    }\n\n    isReAuthInProgress(entryPoint: string): Promise<boolean> {\n        return Promise.resolve(this.reauthInProgress[entryPoint] === true);\n    }\n\n    setReAuthInProgress(entryPoint: string): Promise<void> {\n        this.reauthInProgress[entryPoint] = true;\n        return Promise.resolve();\n    }\n\n    isAuthenticated(url: string): Promise<boolean> {\n        return this.filterEntryPoints(url).then((entryPoints: string[]) => {\n            const authURI = entryPoints && entryPoints[0];\n            return Promise.resolve((this.storageService.getAuthToken(\n                authURI\n            ) as unknown) as IAuthToken).then((authToken: IAuthToken) => {\n                return !!authToken;\n            });\n        });\n    }\n\n    /*\n     * will try determine first relevant authentication entry point from authenticationMap and retrieve potential client credentials to be added on top of user credentials\n     */\n    protected _findLoginData(resource: string): Promise<ILoginData> {\n        return this.filterEntryPoints(resource).then((entryPoints: string[]) => {\n            return Promise.resolve(\n                this.sharedDataService.get('credentialsMap').then((credentialsMap: Cloneable) => {\n                    const map: ICredentialsMap = {\n                        ...(((credentialsMap as unknown) as ICredentialsMap) || {}),\n                        ...DEFAULT_CREDENTIALS_MAP\n                    };\n                    const authURI = entryPoints[0];\n                    return {\n                        authURI,\n                        clientCredentials: map[authURI]\n                    };\n                })\n            );\n        });\n    }\n\n    protected _launchAuth(loginData: ILoginData): Promise<any> {\n        return this.translationsFetchService\n            .waitToBeReady()\n            .then(() =>\n                Promise.all([\n                    this.storageService.isInitialized(),\n                    this.settingsService.getBoolean('smartedit.sso.enabled')\n                ])\n            )\n            .then(([isFullScreen, ssoEnabled]: [boolean, boolean]) => {\n                const modalRef = this.modalService.open<ILoginData>({\n                    component: LoginDialogComponent,\n                    data: {\n                        ...loginData,\n                        isFullScreen,\n                        ssoEnabled\n                    },\n                    config: {\n                        modalPanelClass: 'su-login-dialog-container',\n                        hasBackdrop: false\n                    }\n                });\n\n                return new Promise((resolve, reject) => {\n                    modalRef.afterClosed.subscribe(resolve, reject);\n                });\n            });\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/*\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n */\nimport * as lodash from 'lodash';\nimport { Injectable, Type } from '@angular/core';\nimport { of, BehaviorSubject, Observable } from 'rxjs';\nimport { ModalRef } from '@fundamental-ngx/core';\nimport { FundamentalModalButtonAction, IFundamentalModalButtonOptions } from '../../interfaces';\n\n@Injectable()\nexport class FundamentalModalManagerService {\n    private title: BehaviorSubject<string> = new BehaviorSubject<string>('');\n    private titleSuffix: BehaviorSubject<string> = new BehaviorSubject<string>('');\n    private modalData: BehaviorSubject<any> = new BehaviorSubject<any>({});\n    private component: BehaviorSubject<Type<any>> = new BehaviorSubject<Type<any>>({} as Type<any>);\n    private isDismissButtonVisible: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(true);\n    private buttons: BehaviorSubject<IFundamentalModalButtonOptions[]> = new BehaviorSubject<\n        IFundamentalModalButtonOptions[]\n    >([]);\n\n    constructor(private modalRef: ModalRef) {}\n\n    public init(): void {\n        this.modalData.next(this.modalRef.data.modalData);\n        this.component.next(this.modalRef.data.component);\n        this.buttons.next(this.modalRef.data.templateConfig.buttons || []);\n        this.title.next(this.modalRef.data.templateConfig.title);\n        this.titleSuffix.next(this.modalRef.data.templateConfig.titleSuffix);\n        this.isDismissButtonVisible.next(this.modalRef.data.templateConfig.isDismissButtonVisible);\n    }\n\n    // getters\n\n    public getComponent(): Observable<Type<any>> {\n        return this.component.asObservable();\n    }\n\n    public getTitle(): Observable<string> {\n        return this.title.asObservable();\n    }\n\n    public getTitleSuffix(): Observable<string> {\n        return this.titleSuffix.asObservable();\n    }\n\n    public getButtons(): Observable<IFundamentalModalButtonOptions[]> {\n        return this.buttons.asObservable();\n    }\n\n    public getModalData(): Observable<any> {\n        return this.modalData.asObservable();\n    }\n\n    public getIsDismissButtonVisible(): Observable<boolean> {\n        return this.isDismissButtonVisible.asObservable();\n    }\n\n    // header dismiss button\n\n    public setDismissButtonVisibility(isVisible: boolean) {\n        this.isDismissButtonVisible.next(isVisible);\n    }\n\n    // title\n\n    public setTitle(title: string): void {\n        this.title.next(title);\n    }\n    // buttons\n\n    public addButton(button: IFundamentalModalButtonOptions): void {\n        this.buttons.next([...this.buttons.value, button]);\n    }\n\n    public removeButton(id: string): void {\n        this.buttons.next(\n            this.buttons.value.filter((button: IFundamentalModalButtonOptions) => button.id !== id)\n        );\n    }\n\n    public removeAllButtons(): void {\n        this.buttons.next([]);\n    }\n\n    public disableButton(id: string): void {\n        this.buttons.next(\n            this.buttons.value.map((button: IFundamentalModalButtonOptions) =>\n                button.id === id ? { ...button, disabled: true } : button\n            )\n        );\n    }\n\n    public setDismissCallback(callback: () => Promise<any>): void {\n        this.dismissCallback = callback;\n    }\n\n    public enableButton(id: string): void {\n        this.buttons.next(\n            this.buttons.value.map((button: IFundamentalModalButtonOptions) =>\n                button.id === id ? { ...button, disabled: false } : button\n            )\n        );\n    }\n\n    public onButtonClicked(button: IFundamentalModalButtonOptions): void {\n        const callbackReturnedObservable: Observable<any> = button.callback\n            ? button.callback()\n            : of(null);\n\n        if (button.action !== FundamentalModalButtonAction.None) {\n            callbackReturnedObservable.subscribe((data: any) =>\n                button.action === FundamentalModalButtonAction.Close\n                    ? this.close(data)\n                    : this.dismiss(data)\n            );\n        }\n    }\n\n    public close(data?: any): void {\n        this.modalRef.close(data);\n    }\n\n    public dismiss(data?: any): void {\n        this.dismissCallback()\n            .then(() => this.modalRef.dismiss(data))\n            .catch(lodash.noop);\n    }\n\n    private dismissCallback(): Promise<any> {\n        return Promise.resolve();\n    }\n}\n","/**\n * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/*\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n */\nimport { Component, OnInit, Type, ViewEncapsulation } from '@angular/core';\nimport { map } from 'rxjs/operators';\nimport { FundamentalModalManagerService } from '../../services/modal/modal-manager.service';\nimport { Observable } from 'rxjs';\nimport { IFundamentalModalButtonOptions } from '../../interfaces';\n\n@Component({\n    selector: 'fundamental-modal-template',\n    encapsulation: ViewEncapsulation.None,\n    providers: [FundamentalModalManagerService],\n    styles: [\n        `\n            .fd-modal__title {\n                min-height: 20px;\n            }\n        `\n    ],\n    template: `\n        <fd-modal-header>\n            <h1 fd-modal-title id=\"fd-modal-title-{{ (title | async) || '' }}\">\n                {{ (title | async) || '' | translate }}\n                {{ (titleSuffix | async) || '' | translate }}\n            </h1>\n            <button\n                fd-modal-close-btn\n                *ngIf=\"isDismissButtonVisible | async\"\n                (click)=\"dismiss()\"\n            ></button>\n        </fd-modal-header>\n        <fd-modal-body>\n            <ng-container *ngComponentOutlet=\"component | async\"></ng-container>\n        </fd-modal-body>\n        <fd-modal-footer *ngIf=\"hasButtons() | async\">\n            <button\n                *ngFor=\"let button of buttons | async\"\n                [disabled]=\"button.disabledFn ? button.disabledFn() : button.disabled\"\n                [options]=\"button.style\"\n                [attr.id]=\"button.id\"\n                (click)=\"onButtonClicked(button)\"\n                fd-button\n            >\n                {{ button.label | translate }}\n            </button>\n        </fd-modal-footer>\n    `\n})\nexport class FundamentalModalTemplateComponent implements OnInit {\n    public component: Observable<Type<any>> = this.modalManager.getComponent();\n    public title: Observable<string> = this.modalManager.getTitle();\n    public titleSuffix: Observable<string> = this.modalManager.getTitleSuffix();\n    public buttons: Observable<IFundamentalModalButtonOptions[]> = this.modalManager.getButtons();\n    public isDismissButtonVisible: Observable<\n        boolean\n    > = this.modalManager.getIsDismissButtonVisible();\n\n    constructor(private modalManager: FundamentalModalManagerService) {}\n\n    ngOnInit() {\n        this.modalManager.init();\n    }\n\n    public onButtonClicked(button: IFundamentalModalButtonOptions) {\n        this.modalManager.onButtonClicked(button);\n    }\n\n    public dismiss(): void {\n        this.modalManager.dismiss();\n    }\n\n    public hasButtons(): Observable<boolean> {\n        return this.buttons.pipe(\n            map((buttons: IFundamentalModalButtonOptions[]) => buttons && !!buttons.length)\n        );\n    }\n}\n","/**\n * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ButtonModule, ModalModule } from '@fundamental-ngx/core';\n\nimport { FundamentalModalTemplateComponent } from './modal-template.component';\nimport { TranslationModule } from '../../services/translations';\n\n@NgModule({\n    imports: [CommonModule, ModalModule, ButtonModule, TranslationModule.forChild()],\n    declarations: [FundamentalModalTemplateComponent],\n    entryComponents: [FundamentalModalTemplateComponent],\n    exports: [FundamentalModalTemplateComponent]\n})\nexport class FundamentalModalTemplateModule {}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Injectable } from '@angular/core';\nimport { IFundamentalModalConfig } from './i-modal.service';\nimport {\n    ModalConfig as FundamentalModalConfig,\n    ModalRef as FundamentalModalRef,\n    ModalService as FundamentalModalService\n} from '@fundamental-ngx/core';\nimport { FundamentalModalTemplateComponent } from '../../components';\n\n@Injectable()\nexport class ModalService {\n    constructor(protected fundamentalModalService: FundamentalModalService) {}\n\n    open<T>(options: IFundamentalModalConfig<T>): FundamentalModalRef {\n        const { templateConfig } = options;\n\n        return !!templateConfig\n            ? this.openWithTemplate<T>(options)\n            : this.openStandalone<T>(options);\n    }\n\n    private openStandalone<T>(options: IFundamentalModalConfig<T>): FundamentalModalRef {\n        const { config = {}, component, data } = options;\n\n        return this.fundamentalModalService.open(component, { ...config, data });\n    }\n\n    private openWithTemplate<T>(options: IFundamentalModalConfig<T>): FundamentalModalRef {\n        const { config = {}, templateConfig = {}, component, data } = options;\n\n        const settings: FundamentalModalConfig = {\n            ...config,\n            data: {\n                templateConfig,\n                component,\n                modalData: data\n            }\n        };\n\n        return this.fundamentalModalService.open(FundamentalModalTemplateComponent, settings);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport * as lodash from 'lodash';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n    AlertConfig as FundamentalAlertConfig,\n    AlertRef,\n    AlertService as FundamentalAlertService\n} from '@fundamental-ngx/core';\nimport { IAlertConfig } from '../../interfaces';\n\nexport class Alert {\n    private _displayed: boolean = false;\n    private _alertRef!: AlertRef;\n\n    constructor(\n        private _alertConf: IAlertConfig,\n        ALERT_CONFIG_DEFAULTS: FundamentalAlertConfig,\n        private fundamentalAlertService: FundamentalAlertService,\n        private translateService: TranslateService\n    ) {\n        lodash.defaultsDeep(this._alertConf, lodash.cloneDeep(ALERT_CONFIG_DEFAULTS));\n    }\n\n    get alertConf(): IAlertConfig {\n        return this._alertConf;\n    }\n\n    get message(): string | undefined {\n        return this._alertConf.message;\n    }\n\n    get type(): string {\n        return this._alertConf.type as string;\n    }\n\n    /**\n     * Displays the alert to the user.\n     */\n    public async show(): Promise<void> {\n        if (this.isDisplayed()) {\n            return;\n        }\n\n        if (this._alertConf.message) {\n            this._alertConf.message = await this.translateService\n                .get(this._alertConf.message, this._alertConf.messagePlaceholders)\n                .toPromise<string>();\n        }\n\n        const content =\n            typeof this._alertConf.message !== 'undefined'\n                ? this._alertConf.message\n                : this._alertConf.component || '';\n        this._alertRef = this.fundamentalAlertService.open(content, this._alertConf);\n        this._alertRef.afterDismissed.subscribe(() => (this._displayed = false));\n\n        this._displayed = true;\n    }\n\n    /**\n     * Hides the alert if it is currently being displayed to the user.\n     */\n    public hide(): void {\n        if (!this.isDisplayed()) {\n            return;\n        }\n\n        this._alertRef.dismiss();\n    }\n\n    public isDisplayed(): boolean {\n        return this._displayed;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { InjectionToken } from '@angular/core';\nimport { AlertConfig } from '@fundamental-ngx/core';\nimport { IAlertServiceType } from '../../interfaces';\n\nexport const ALERT_CONFIG_DEFAULTS_TOKEN = new InjectionToken<string>('alertConfigToken');\n\nexport const ALERT_CONFIG_DEFAULTS: AlertConfig = {\n    data: {},\n    type: IAlertServiceType.INFO,\n    dismissible: true,\n    duration: 3000,\n    width: '500px'\n};\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Inject, Injectable } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AlertConfig, AlertService as FundamentalAlertService } from '@fundamental-ngx/core';\nimport { IAlertConfig, IAlertServiceType } from '../../interfaces';\nimport { Alert } from './alert';\nimport { ALERT_CONFIG_DEFAULTS_TOKEN } from './alert-token';\n\n/**\n * @ngdoc service\n * @name @smartutils.services:AlertFactory\n *\n * @description\n * The alertFactory allows you to create an instances of type Alert.<br />\n * When possible, it is better to use {@link @smartutils.services:AlertService AlertService} to show alerts.<br />\n * This factory is useful when one of the Alert class methods is needed, like\n * hide() or isDisplayed(), or if you want to create a single instance and hide/show when necessary.\n */\n@Injectable()\nexport class AlertFactory {\n    constructor(\n        private fundamentalAlertService: FundamentalAlertService,\n        private translateService: TranslateService,\n        @Inject(ALERT_CONFIG_DEFAULTS_TOKEN) private ALERT_CONFIG_DEFAULTS: AlertConfig\n    ) {}\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AlertFactory#createAlert\n     * @methodOf @smartutils.services:AlertFactory\n     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}\n     * @returns {Alert} An {@link Alert Alert} instance\n     */\n    public createAlert(alertConf: string | IAlertConfig): Alert {\n        const config = this.getAlertConfig(alertConf);\n        return this.createAlertObject(config);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AlertFactory#createInfo\n     * @methodOf @smartutils.services:AlertFactory\n     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}\n     * @returns {Alert} An {@link Alert Alert} instance with type set to INFO\n     */\n    public createInfo(alertConf: string | IAlertConfig): Alert {\n        const config = this.getAlertConfig(alertConf, IAlertServiceType.INFO);\n        return this.createAlertObject(config);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AlertFactory#createDanger\n     * @methodOf @smartutils.services:AlertFactory\n     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}\n     * @returns {Alert} An {@link Alert Alert} instance with type set to DANGER\n     */\n    public createDanger(alertConf: string | IAlertConfig): Alert {\n        const config = this.getAlertConfig(alertConf, IAlertServiceType.DANGER);\n        return this.createAlertObject(config);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AlertFactory#createWarning\n     * @methodOf @smartutils.services:AlertFactory\n     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}\n     * @returns {Alert} An {@link Alert Alert} instance with type set to WARNING\n     */\n    public createWarning(alertConf: string | IAlertConfig): Alert {\n        const config = this.getAlertConfig(alertConf, IAlertServiceType.WARNING);\n        return this.createAlertObject(config);\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AlertFactory#createSuccess\n     * @methodOf @smartutils.services:AlertFactory\n     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}\n     * @returns {Alert} An {@link Alert Alert} instance with type set to SUCCESS\n     */\n    public createSuccess(alertConf: string | IAlertConfig): Alert {\n        const config = this.getAlertConfig(alertConf, IAlertServiceType.SUCCESS);\n        return this.createAlertObject(config);\n    }\n\n    private getAlertConfig(\n        strOrConf: string | IAlertConfig,\n        type?: IAlertServiceType\n    ): IAlertConfig {\n        if (typeof strOrConf === 'string') {\n            return {\n                message: strOrConf,\n                type: type || IAlertServiceType.INFO\n            };\n        }\n\n        if (!strOrConf.type) {\n            strOrConf.type = type || IAlertServiceType.INFO;\n        }\n        return strOrConf;\n    }\n\n    private createAlertObject(alertConf: IAlertConfig): Alert {\n        return new Alert(\n            alertConf,\n            this.ALERT_CONFIG_DEFAULTS,\n            this.fundamentalAlertService,\n            this.translateService\n        );\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Injectable } from '@angular/core';\nimport { IAlertConfig } from '../../interfaces';\nimport { AlertFactory } from './alert-factory';\n\n/**\n * @ngdoc service\n * @name @smartutils.services:AlertService\n */\n@Injectable()\nexport class AlertService {\n    constructor(private alertFactory: AlertFactory) {}\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AlertService#showAlert\n     * @methodOf @smartutils.services:AlertService\n     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}\n     * @description\n     * Displays an alert to the user. <br />\n     * Convenience method to create an alert and call.show() on it immediately.\n     */\n    public showAlert(alertConf: string | IAlertConfig): void {\n        const alert = this.alertFactory.createAlert(alertConf);\n        alert.show();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AlertService#showInfo\n     * @methodOf @smartutils.services:AlertService\n     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}\n     * @description\n     * Displays an alert to the user. <br />\n     * Convenience method to create an alert and call.show() on it immediately.\n     */\n    public showInfo(alertConf: string | IAlertConfig): void {\n        const alert = this.alertFactory.createInfo(alertConf);\n        alert.show();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AlertService#showDanger\n     * @methodOf @smartutils.services:AlertService\n     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}\n     * @description\n     * Displays an alert to the user. <br />\n     * Convenience method to create an alert and call.show() on it immediately.\n     */\n    public showDanger(alertConf: string | IAlertConfig): void {\n        const alert = this.alertFactory.createDanger(alertConf);\n        alert.show();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AlertService#showWarning\n     * @methodOf @smartutils.services:AlertService\n     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}\n     * @description\n     * Displays an alert to the user. <br />\n     * Convenience method to create an alert and call.show() on it immediately.\n     */\n    public showWarning(alertConf: string | IAlertConfig): void {\n        const alert = this.alertFactory.createWarning(alertConf);\n        alert.show();\n    }\n\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:AlertService#showSuccess\n     * @methodOf @smartutils.services:AlertService\n     * @param {string | Object} alertConf The alert's configuration {@link @smartutils.interfaces:IAlertConfig IAlertConfig}\n     * @description\n     * Displays an alert to the user. <br />\n     * Convenience method to create an alert and call.show() on it immediately.\n     */\n    public showSuccess(alertConf: string | IAlertConfig): void {\n        const alert = this.alertFactory.createSuccess(alertConf);\n        alert.show();\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { NgModule } from '@angular/core';\nimport { AlertModule as FundamentalAlertModule } from '@fundamental-ngx/core';\nimport { AlertService } from './alert.service';\nimport { AlertFactory } from './alert-factory';\nimport { TranslationModule } from '../translations';\nimport { ALERT_CONFIG_DEFAULTS, ALERT_CONFIG_DEFAULTS_TOKEN } from './alert-token';\n\n@NgModule({\n    imports: [FundamentalAlertModule, TranslationModule],\n    providers: [\n        {\n            provide: ALERT_CONFIG_DEFAULTS_TOKEN,\n            useValue: ALERT_CONFIG_DEFAULTS\n        },\n        AlertService,\n        AlertFactory\n    ]\n})\nexport class AlertModule {}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { AbstractControl } from '@angular/forms';\nimport { Observable } from 'rxjs';\n\nimport { ComponentType } from './interfaces';\nimport { InputProperties, InputPropertyChange } from './input-properties';\n\nexport abstract class AbstractForm {\n    /**\n     * Listen onto any property changes triggered by 'setInput' method.\n     *\n     * @type {Observable<InputPropertyChange>}\n     */\n    readonly inputChanges: Observable<InputPropertyChange> = this.inputs.changes;\n\n    protected constructor(\n        public readonly component: ComponentType,\n        public readonly control: AbstractControl,\n        public readonly inputs: InputProperties,\n        public readonly persist: boolean,\n        public parent: AbstractForm | null = null\n    ) {}\n\n    /**\n     * Get mapped values of fields to be persisted.\n     */\n    abstract getPersistedValue(): any;\n\n    /**\n     * Sets property and marks components for changes if property is decorated\n     * with FormProperty.\n     *\n     * @param {keyof T} key\n     * @param {T[keyof T]} value\n     */\n    setInput<T>(key: keyof T, value: T[keyof T]): void {\n        this.inputs.set(key, value);\n    }\n\n    /**\n     * Retrieves a property.\n     *\n     * @param {keyof T} key\n     * @returns {T[keyof T] | undefined}\n     */\n    getInput<T>(key: keyof T): T[keyof T] | undefined {\n        return this.inputs.get<T>(key);\n    }\n\n    /**\n     * Returns root form.\n     */\n    get root(): AbstractForm {\n        if (this.parent === null) {\n            return this;\n        }\n\n        let root = this.parent;\n\n        while (root.parent) {\n            root = root.parent;\n        }\n\n        return root;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { isUndefined, omitBy } from 'lodash';\n\n/**\n * ValidatorParameters holds data to the synchronous and\n * asynchronous validators configuration for a FormField.\n */\nexport class ValidatorParameters {\n    public validators: { [index: string]: any } = {};\n    public asyncValidators: { [index: string]: any } = {};\n\n    constructor(\n        validators: { [index: string]: any } = {},\n        asyncValidators: { [index: string]: any } = {}\n    ) {\n        this.validators = this._omitUndefinedValues(validators);\n        this.asyncValidators = this._omitUndefinedValues(asyncValidators);\n    }\n\n    /**\n     * Determines if synchronous validator exists.\n     *\n     * @param name The name of the synchronous validator.\n     * @returns A boolean if it has that parameter.\n     */\n    has(name: string): boolean {\n        return this.validators.hasOwnProperty(name);\n    }\n\n    /**\n     * Returns parameters of the synchronous validator.\n     *\n     * @param name The name of the synchronous validator.\n     * @returns The param of the validator.\n     */\n    getParam(name: string): null | any {\n        if (!this.has(name)) {\n            return null;\n        }\n        return this.validators[name];\n    }\n\n    /**\n     * Determines if asynchronous validator exists.\n     *\n     * @param name The name of the asynchronous validator.\n     * @returns A boolean if it has that parameter.\n     */\n    hasAsync(name: string): boolean {\n        return this.asyncValidators.hasOwnProperty(name);\n    }\n\n    /**\n     * Returns parameters of the asynchronous validator.\n     *\n     * @param name The name of the asynchronous validator.\n     * @returns The param of the validator.\n     */\n    getAsyncParam(name: string): null | any {\n        if (!this.hasAsync(name)) {\n            return null;\n        }\n        return this.asyncValidators[name];\n    }\n\n    /**\n     * @internal\n     * Returns a object with all those keys that have\n     * undefined values.\n     */\n    private _omitUndefinedValues(object: { [index: string]: any }): { [index: string]: any } {\n        return omitBy(object, isUndefined);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { FormControl } from '@angular/forms';\n\nimport { AbstractForm } from './abstract-form';\nimport { ComponentType } from './interfaces';\nimport { InputProperties } from './input-properties';\nimport { ValidatorParameters } from './validator-parameters';\n\n/**\n * A leaf node of forms.\n */\nexport class FormField extends AbstractForm {\n    /**\n     * @override\n     */\n    control!: FormControl;\n\n    constructor(\n        component: ComponentType,\n        control: FormControl,\n        inputs: InputProperties,\n        persist: boolean,\n        public validators: ValidatorParameters = new ValidatorParameters()\n    ) {\n        super(component, control, inputs, persist);\n    }\n\n    /**\n     * Returns value if persistable.\n     * @return any\n     */\n    getPersistedValue() {\n        if (!this.persist) {\n            return undefined;\n        }\n        return this.control.value === undefined ? null : this.control.value;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { FormGroup, ValidationErrors } from '@angular/forms';\n\nimport { AbstractForm } from './abstract-form';\nimport { AbstractForms, ComponentType } from './interfaces';\nimport { InputProperties } from './input-properties';\n\n/**\n * A FormGrouping is used to encapsulate form data\n * of objects.\n */\nexport class FormGrouping extends AbstractForm {\n    /**\n     * @override\n     */\n    readonly control!: FormGroup;\n\n    constructor(\n        component: ComponentType,\n        control: FormGroup,\n        inputs: InputProperties,\n        persist: boolean,\n        parent: AbstractForm | null,\n        public forms: AbstractForms = {}\n    ) {\n        super(component, control, inputs, persist, parent);\n\n        Object.keys(this.forms).forEach((key) => {\n            this.forms[key].parent = this;\n        });\n    }\n\n    /**\n     * Adds a form element to the group.\n     *\n     * @param name\n     * @param form\n     */\n    addFormElement(name: string, form: AbstractForm): void {\n        this.forms = { ...this.forms, [name]: form };\n        this.control.addControl(name, form.control);\n\n        form.parent = this;\n    }\n\n    /**\n     * Removes a form element from the group.\n     *\n     * @param {string} name\n     */\n    removeFormElement(name: string): void {\n        if (!this.forms[name]) {\n            return;\n        }\n\n        const { [name]: deleted, ...forms } = this.forms;\n        this.forms = forms;\n        deleted.parent = null;\n\n        this.control.removeControl(name);\n    }\n\n    /**\n     * Get form element based on the string path.\n     *\n     * @param paths A dot notation path to the nested abstract form.\n     * @returns Returns the AbstractForm based on the path. null if the child does not exists.\n     */\n    getFormElement(paths: string | string[]): AbstractForm | null {\n        return (Array.isArray(paths) ? paths : paths.split('.')).reduce(\n            (acc, path) => {\n                if (!acc || !acc.forms) {\n                    return null;\n                }\n                return acc.forms[path];\n            },\n            this as any\n        );\n    }\n\n    /**\n     * Manually sets nested errors to each FormControl.\n     *\n     * Note: Method should be called on the next rendering cycle and not on the initialization of the form. Should be\n     * used to enforce backend validation.\n     *\n     * @param errors\n     */\n    setNestedErrors(errors: [string[] | string, ValidationErrors][] = []): void {\n        errors.forEach(([path, validationErrors]) => {\n            const form = this.getFormElement(path);\n\n            /**\n             * Fail if the form does not exist.\n             */\n            if (!form) {\n                throw new Error(`FormGrouping - Path not found when setting nested error: ${path}`);\n            }\n\n            form.control.setErrors(validationErrors);\n        });\n    }\n\n    /**\n     * Returns value of persistable nodes.\n     * @return any\n     */\n    getPersistedValue(): any {\n        return Object.keys(this.forms).reduce(\n            (acc, key) => {\n                const child = this.forms[key];\n\n                /**\n                 * Look ahead and if nested does not want to be mapped, merge the nested object with\n                 * the current object.\n                 *\n                 * If it's a field, then it's undefined.\n                 *\n                 * If it's a group, then it will be merged.\n                 */\n                if (!child.persist) {\n                    return { ...acc, ...child.getPersistedValue() };\n                }\n\n                acc[key] = child.getPersistedValue();\n                return acc;\n            },\n            {} as any\n        );\n    }\n}\n","import { FormArray } from '@angular/forms';\nimport { values } from 'lodash';\n\nimport { AbstractForm } from './abstract-form';\nimport { ComponentType } from './interfaces';\nimport { InputProperties } from './input-properties';\n\nexport class FormList extends AbstractForm {\n    /**\n     * @override\n     */\n    readonly control!: FormArray;\n\n    constructor(\n        component: ComponentType,\n        control: FormArray,\n        inputs: InputProperties,\n        parent: AbstractForm | null,\n        persist: boolean,\n        public forms: AbstractForm[] = []\n    ) {\n        super(component, control, inputs, persist, parent);\n\n        forms.forEach((child) => {\n            child.parent = this;\n        });\n    }\n\n    /**\n     * @override\n     * Implements the abstract getPersistedValue() method.\n     */\n    getPersistedValue(): any[] {\n        return this.forms.reduce((acc: any[], child: AbstractForm) => {\n            if (!child.persist) {\n                /**\n                 * Look ahead and merge the values of the\n                 * nested group, array or field.\n                 *\n                 * If it's a field, the values of the field\n                 * would be an empty array, because it's not an object.\n                 */\n                return acc.concat(values(child.getPersistedValue()));\n            }\n\n            acc.push(child.getPersistedValue());\n            return acc;\n        }, []);\n    }\n\n    /**\n     * Adds a form element to the end of the list.\n     *\n     * @param form\n     */\n    addFormElement(form: AbstractForm): void {\n        this.forms = [...this.forms, form];\n        this.control.push(form.control);\n\n        form.parent = this;\n    }\n\n    /**\n     * Removes a form element from the list.\n     *\n     * @param {string} index.\n     */\n    removeFormElement(index: number): void {\n        if (!this._isInBounds(index)) {\n            return;\n        }\n\n        this.forms = this.forms.filter((f, i) => i !== index);\n        this.control.removeAt(index);\n    }\n\n    /**\n     * Returns an element at an index.\n     *\n     * @param index An index inbounds of the list.\n     */\n    formElementAt(index: number): AbstractForm | null {\n        if (!this._isInBounds(index)) {\n            return null;\n        }\n\n        return this.forms[index];\n    }\n\n    /**\n     * The size of the list.\n     */\n    size(): number {\n        return this.forms.length;\n    }\n\n    /**\n     * Swaps a form element in the array.\n     *\n     * @param a The index of form a.\n     * @param b The index of form b.\n     */\n    swapFormElements(a: number, b: number): void {\n        if (!this._isInBounds(a) || !this._isInBounds(b) || a === b) {\n            return;\n        }\n\n        this.forms = [...this.forms];\n\n        /**\n         * Swapping form array.\n         */\n        const form = this.forms[a];\n        this.forms[a] = this.forms[b];\n        this.forms[b] = form;\n\n        /**\n         * Swapping control's array.\n         */\n        const control = this.control.at(a);\n        this.control.insert(a, this.control.at(b));\n        this.control.insert(b, control);\n    }\n\n    /**\n     * Moves a form element in the array to a new position.\n     *\n     * @param from The previous index.\n     * @param to The targeted index.\n     */\n    moveFormElement(from: number, to: number): void {\n        if (!this._isInBounds(from) || !this._isInBounds(to) || from === to) {\n            return;\n        }\n\n        const delta = to < from ? -1 : 1;\n\n        const tempControl = this.control.at(from);\n        const tempForm = this.forms[from];\n\n        for (let i = from; i !== to; i += delta) {\n            const position = i + delta;\n\n            this.control.setControl(i, this.control.at(position));\n            this.forms[i] = this.forms[position];\n        }\n\n        this.control.setControl(to, tempControl);\n        this.forms[to] = tempForm;\n    }\n\n    /**\n     * Checks of the index is in bounds.\n     *\n     * @internal\n     * @param index\n     */\n    private _isInBounds(index: number) {\n        return index < this.forms.length && index >= 0;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Observable, Subject } from 'rxjs';\nimport { toPairs } from 'lodash';\n\n/* tslint:disable:max-classes-per-file */\n\n/**\n * Event payload when a property changes.\n */\nexport class InputPropertyChange {\n    constructor(public key: string, public value: any) {}\n}\n\n/**\n * Used for storing component input values for the dynamic component. The values\n * are set onto the dynamic component's properties that are decorated by the @DynamicInput()\n * decorator. Values can be retrieved or set programmatically by the form element's 'input'\n * property.\n */\nexport class InputProperties {\n    readonly changes: Observable<InputPropertyChange> = new Subject<InputPropertyChange>();\n    /**\n     * @internal\n     */\n    private readonly _map: Map<string, any>;\n\n    constructor(object: { [key: string]: any } = {}) {\n        this._map = new Map(toPairs(object));\n    }\n\n    /**\n     * Get a property.\n     *\n     * @param {keyof T} key\n     * @returns {T[keyof T] | undefined} value\n     */\n    get<T>(key: keyof T): T[keyof T] | undefined {\n        return this._map.get(key as string);\n    }\n\n    /**\n     * Setting a property.\n     *\n     * @param {keyof T} key\n     * @param {T[keyof T]} value\n     * @param {boolean} emit If emit is set to false. It will not emit changes to the\n     * the component for those observing for property changes.\n     */\n    set<T>(key: keyof T, value: T[keyof T], emit = true) {\n        this._map.set(key as string, value);\n        if (emit) {\n            (this.changes as Subject<InputPropertyChange>).next(\n                new InputPropertyChange(key as string, value)\n            );\n        }\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n/* tslint:disable:max-classes-per-file */\n\n/**\n * @internal\n * Internal property on the constructor used for adding decorator metadata\n * so that it can be later picked up after component compilation.\n */\nexport const FORM_PROP = '_form_prop_';\n\n/**\n * Base data PropDecorator.\n * @internal\n */\nexport class PropDecorator {\n    constructor(public property: string) {}\n}\n\n/**\n * @internal\n */\nexport class InputPropDecorator extends PropDecorator {\n    public alias: string;\n    constructor(property: string, alias: string | null) {\n        super(property);\n        this.alias = alias ? alias : this.property;\n    }\n}\n\n/**\n * @internal\n */\nexport class FormPropDecorator extends PropDecorator {}\n\n/**\n * @internal\n */\nexport class ControlPropDecorator extends PropDecorator {}\n\n/**\n * Used for tagging dynamic inputs and adding them to the FORM_PROP property\n * of the target constructor.\n */\nfunction makePropertyDecorator<T>(factory: (key: string) => PropDecorator) {\n    return <C>(target: C, key: string) => {\n        const ctor = (target as any).constructor as any;\n        if (!ctor[FORM_PROP]) {\n            ctor[FORM_PROP] = [];\n        }\n        ctor[FORM_PROP].push(factory(key));\n    };\n}\n\n/**\n * Injects the AbstractForm for the dynamic form component.\n */\nexport function DynamicForm() {\n    return makePropertyDecorator((key) => new FormPropDecorator(key));\n}\n\n/**\n * Injects the AbstractFormControl of the AbstractForm for the dynamic form component.\n */\nexport function DynamicFormControl() {\n    return makePropertyDecorator((key) => new ControlPropDecorator(key));\n}\n\n/**\n * Injects a property of the AbstractForm for the dynamic form component.\n * Inputs are assigned from the FormSchema's 'inputs' property.\n * NOTE:\n * Property values are only available ngOnInit or onDynamicInputChange.\n * @param alias Use this alias to target a property of the AbstractForm. Defaults\n * to the assigned class property.\n * @example\n * <pre>\n *     @Component({ ... })\n *     export class DynamicFormComponent {\n *         @DynamicInput()\n *         property: string\n *     }\n * <pre>\n */\nexport const DynamicInput = (alias: string | null = null) => {\n    return makePropertyDecorator((key) => new InputPropDecorator(key, alias));\n};\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Component } from '@angular/core';\nimport { values } from 'lodash';\n\nimport { AbstractForm, FormGrouping } from '../../models';\nimport { DynamicForm } from '../../decorators';\n\n/**\n * Default component used for listing forms for a group form.\n */\n@Component({\n    selector: 'form-lister',\n    styles: [\n        `\n            :host {\n                display: block;\n            }\n        `\n    ],\n    templateUrl: './form-lister.component.html'\n})\nexport class FormListerComponent {\n    @DynamicForm()\n    form!: FormGrouping;\n\n    get forms(): AbstractForm[] {\n        return values(this.form.forms);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { ComponentRef } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { AbstractForm, DynamicInputChange } from '../../models';\nimport {\n    ControlPropDecorator,\n    FormPropDecorator,\n    FORM_PROP,\n    InputPropDecorator,\n    PropDecorator\n} from '../../decorators';\n\n/**\n * @internal\n * Trigger property changes for the component and mark for check\n * for those components that have onPush change detection strategy.\n *\n * @param {ComponentRef<any>} componentRef\n */\nconst onChange = ({ changeDetectorRef, instance }: ComponentRef<DynamicInputChange>): void => {\n    instance.onDynamicInputChange && instance.onDynamicInputChange();\n    changeDetectorRef.markForCheck();\n};\n\n/**\n * @internal\n * Decorates the components with the decorators that were put into places.\n * The idea is made similar to how Angular decorates their properties with inputs.\n */\nexport const decorate = (componentRef: ComponentRef<any>, form: AbstractForm): Subscription => {\n    const instance = componentRef.instance;\n    const decorators = instance.constructor[FORM_PROP] as PropDecorator[];\n\n    if (!Array.isArray(decorators)) {\n        return new Subscription();\n    }\n\n    const props = new Map<string, InputPropDecorator>();\n\n    decorators.forEach((decorator) => {\n        const property = decorator.property;\n        if (decorator instanceof InputPropDecorator) {\n            const alias = decorator.alias;\n            if (form.getInput(alias) === undefined && instance[property] !== undefined) {\n                form.setInput(alias, instance[property]);\n            }\n            instance[property] = form.getInput(alias);\n            props.set(alias, decorator);\n        } else if (decorator instanceof FormPropDecorator) {\n            instance[property] = form;\n        } else if (decorator instanceof ControlPropDecorator) {\n            instance[property] = form.control;\n        }\n    });\n\n    onChange(componentRef);\n    return form.inputChanges.subscribe(({ key, value }) => {\n        const decorator = props.get(key);\n\n        if (!decorator) {\n            return;\n        }\n\n        instance[decorator.property] = value;\n        onChange(componentRef);\n    });\n};\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport {\n    ComponentFactoryResolver,\n    Directive,\n    Input,\n    OnDestroy,\n    ViewContainerRef\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { AbstractForm } from '../../models';\nimport { decorate } from './decorate';\n\n@Directive({\n    selector: '[formRenderer]'\n})\nexport class FormRendererDirective implements OnDestroy {\n    /**\n     * @internal\n     */\n    private _subscription!: Subscription;\n\n    @Input('formRenderer')\n    set form(form: AbstractForm) {\n        this._dispose();\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(\n            form.component\n        );\n\n        // Create and decorate the component's inputs.\n        const componentRef = this.viewContainerRef.createComponent(componentFactory);\n        this._subscription = decorate(componentRef, form);\n    }\n\n    constructor(\n        private componentFactoryResolver: ComponentFactoryResolver,\n        private viewContainerRef: ViewContainerRef\n    ) {}\n\n    ngOnDestroy() {\n        this._dispose();\n    }\n\n    /**\n     * @internal\n     * Clear all views and unsubscribe to streams.\n     */\n    private _dispose() {\n        this._subscription && this._subscription.unsubscribe();\n        this.viewContainerRef.clear();\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { InjectionToken } from '@angular/core';\n\nexport const COMPONENT_MAP = new InjectionToken<string>('COMPONENT_MAP');\n\nexport const ASYNC_VALIDATOR_MAP = new InjectionToken<string>('ASYNC_VALIDATOR_MAP');\n\nexport const VALIDATOR_MAP = new InjectionToken<string>('VALIDATOR_MAP');\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n// File named form-builder.module for now cuz of build blocking me to use Module suffix.\n\nimport { ANALYZE_FOR_ENTRY_COMPONENTS, ModuleWithProviders, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { FormBuilderConfig } from './models';\n\n// Components\nimport { FormListerComponent } from './components/form-lister/form-lister.component';\nimport { FormRendererDirective } from './directives/form-renderer/form-renderer.directive';\n\n// Services\nimport { ASYNC_VALIDATOR_MAP, COMPONENT_MAP, VALIDATOR_MAP } from './services/injection-tokens';\n\n@NgModule({\n    imports: [CommonModule, ReactiveFormsModule],\n    declarations: [FormRendererDirective, FormListerComponent],\n    entryComponents: [FormListerComponent],\n    exports: [FormRendererDirective]\n})\nexport class FormBuilderModule {\n    static forRoot(option: FormBuilderConfig): ModuleWithProviders {\n        return {\n            ngModule: FormBuilderModule,\n            providers: [\n                {\n                    provide: ANALYZE_FOR_ENTRY_COMPONENTS,\n                    useValue: [option.types],\n                    multi: true\n                },\n                {\n                    provide: COMPONENT_MAP,\n                    useValue: option.types\n                },\n                {\n                    provide: VALIDATOR_MAP,\n                    useValue: option.validators\n                },\n                {\n                    provide: ASYNC_VALIDATOR_MAP,\n                    useValue: option.asyncValidators\n                }\n            ]\n        };\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { toPairs } from 'lodash';\n/**\n * @internal\n *\n * Generic registry for mapping keys to items.\n */\nexport abstract class Registry<T> {\n    private _map: Map<string, T>;\n\n    constructor(items: { [name: string]: T } = {}) {\n        this._map = new Map(toPairs(items));\n    }\n\n    /**\n     * Adds a item to the registry.\n     *\n     * @param {string} name\n     * @param {T} item\n     */\n    add(name: string, item: T): void {\n        if (this._map.has(name)) {\n            throw new Error(\n                `${this._service}: is overriding an element named '${name}' in its registry.`\n            );\n        }\n        this._map.set(name, item);\n    }\n\n    /**\n     * Gets an a item in the registry.\n     *\n     * @param {string} name\n     * @returns {T}\n     */\n    get(name: string): T | undefined {\n        if (!this._map.has(name)) {\n            throw new Error(`${this._service}: does not have '${name}' in its registry.`);\n        }\n        return this._map.get(name);\n    }\n\n    /**\n     * @internal\n     */\n    private get _service() {\n        return this.constructor.name;\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Inject, Injectable, Optional } from '@angular/core';\n\nimport { Registry } from './registry';\nimport { ComponentType } from '../models';\nimport { COMPONENT_MAP } from './injection-tokens';\n\nexport interface ComponentTypeMap {\n    [name: string]: ComponentType;\n}\n/**\n * A registry for form components.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class ComponentRegistryService extends Registry<ComponentType> {\n    constructor(\n        @Optional()\n        @Inject(COMPONENT_MAP)\n        types: ComponentTypeMap\n    ) {\n        super(types);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Inject, Injectable, Optional } from '@angular/core';\nimport { AsyncValidatorFn } from '@angular/forms';\n\nimport { Registry } from './registry';\nimport { ASYNC_VALIDATOR_MAP } from './injection-tokens';\n\nexport interface AsyncValidatorMap {\n    [name: string]: (...args: any[]) => AsyncValidatorFn;\n}\n\n/**\n * A registry for asynchronous validators.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class AsyncValidatorRegistryService extends Registry<(...args: any[]) => AsyncValidatorFn> {\n    constructor(\n        @Optional()\n        @Inject(ASYNC_VALIDATOR_MAP)\n        asyncValidators: AsyncValidatorMap\n    ) {\n        super(asyncValidators);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Inject, Injectable, Optional } from '@angular/core';\nimport { ValidatorFn } from '@angular/forms';\n\nimport { Registry } from './registry';\nimport { VALIDATOR_MAP } from './injection-tokens';\n\nexport interface ValidatorMap {\n    [name: string]: (...args: any[]) => ValidatorFn;\n}\n\n/**\n * A registry for synchronous validators.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class ValidatorRegistryService extends Registry<(...args: any[]) => ValidatorFn> {\n    constructor(\n        @Optional()\n        @Inject(VALIDATOR_MAP)\n        validators: ValidatorMap\n    ) {\n        super(validators);\n    }\n}\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\nimport { Injectable } from '@angular/core';\nimport { AsyncValidatorFn, FormArray, FormControl, FormGroup, ValidatorFn } from '@angular/forms';\n\nimport { FormBuilderModule } from '../form-builder.module';\nimport {\n    AbstractForm,\n    AbstractForms,\n    AbstractFormSchema,\n    ComponentType,\n    FormField,\n    FormFieldSchema,\n    FormGrouping,\n    FormGroupSchema,\n    FormList,\n    FormListSchema,\n    InputProperties,\n    ValidatorParameters\n} from '../models';\nimport { FormListerComponent } from '../components/form-lister/form-lister.component';\n\nimport { ComponentRegistryService, ComponentTypeMap } from './component-registry.service';\nimport { ValidatorMap, ValidatorRegistryService } from './validator-registry.service';\nimport {\n    AsyncValidatorMap,\n    AsyncValidatorRegistryService\n} from './async-validator-registry.service';\nimport { Registry } from './registry';\n\n/**\n * Options to be passed inline into the compiler.\n */\nexport interface SchemaCompilerOptions {\n    /**\n     * A map of Angular components to be passed inline. Component found\n     * in this map will take precedence of those from the registry.\n     */\n    components?: ComponentTypeMap;\n    /**\n     * A map of validator functions to be passed inline.\n     * Validators found in this map will take precedence of those\n     * taken from the registry.\n     */\n    validators?: ValidatorMap;\n    /**\n     * A map of async validators to be passed inline.\n     * Validators found in this map will take precedence of those\n     * taken from the registry.\n     */\n    asyncValidators?: AsyncValidatorMap;\n}\n\n/**\n * Schema compilers service is used for compiling a schema to concrete classes for use\n * by the FormRendererDirective.\n */\n@Injectable({\n    providedIn: FormBuilderModule\n})\nexport class SchemaCompilerService {\n    constructor(\n        private types: ComponentRegistryService,\n        private validators: ValidatorRegistryService,\n        private asyncValidators: AsyncValidatorRegistryService\n    ) {}\n\n    /**\n     * Compile a schema group.\n     *\n     * @param value\n     * @param groupSchema\n     * @returns\n     */\n    compileGroup(\n        value: any | null,\n        groupSchema: FormGroupSchema,\n        options: SchemaCompilerOptions = {}\n    ): FormGrouping {\n        const abstractForms = Object.keys(groupSchema.schemas).reduce(\n            (acc, key: string) => {\n                acc[key] = this._toAbstractForm(\n                    value ? value[key] : null,\n                    groupSchema.schemas[key],\n                    options\n                );\n                return acc;\n            },\n            {} as AbstractForms\n        );\n\n        const formGroup = new FormGroup(\n            Object.keys(abstractForms).reduce(\n                (acc, key) => {\n                    acc[key] = abstractForms[key].control;\n                    return acc;\n                },\n                {} as any\n            )\n        );\n\n        return new FormGrouping(\n            groupSchema.component\n                ? this._getComponent(groupSchema.component, options.components)\n                : FormListerComponent,\n            formGroup,\n            new InputProperties(groupSchema.inputs),\n            this._toPersist(groupSchema.persist),\n            null,\n            abstractForms\n        );\n    }\n\n    /**\n     * Compiles a list of values with a schema.\n     *\n     * @param values An array of values.\n     * @param listSchema\n     */\n    compileList(\n        values: any[],\n        schema: FormListSchema,\n        options: SchemaCompilerOptions = {}\n    ): FormList {\n        /**\n         * The schema list for each value since each value can have different\n         * schemas. Or they can have the same schema for all values in the list.\n         */\n        const schemaList = Array.isArray(schema.schema) ? schema.schema : [schema.schema];\n\n        if (!schemaList.length) {\n            throw Error(\n                'SchemaCompilerService - One or more schemas must be provided to compile a form list.'\n            );\n        }\n\n        const list = (Array.isArray(values) ? values : []).map((value: any, index: number) => {\n            const childSchema = schemaList[index]\n                ? /**\n                   * Get the schema one to one for the value, or get the last schema\n                   * which may be repeated for all values.\n                   */\n                  schemaList[index]\n                : schemaList[schemaList.length - 1];\n\n            return this._toAbstractForm(value, childSchema, options);\n        });\n\n        const control = new FormArray(list.map((form) => form.control));\n\n        return new FormList(\n            this._getComponent(schema.component, options.components),\n            control,\n            new InputProperties(schema.inputs),\n            null,\n            this._toPersist(schema.persist),\n            list\n        );\n    }\n\n    /**\n     * Compiles a schema field.\n     *\n     * @param value\n     * @param {FormFieldSchema} schema\n     * @returns {FormField}\n     */\n    compileField(\n        value: any,\n        schema: FormFieldSchema,\n        options: SchemaCompilerOptions = {}\n    ): FormField {\n        let validators: ValidatorFn[] = [];\n        let asyncValidators: AsyncValidatorFn[] = [];\n\n        if (schema.validators) {\n            validators = this._mapValidator<ValidatorRegistryService, ValidatorFn>(\n                schema.validators,\n                this.validators,\n                options.validators\n            );\n        }\n\n        if (schema.asyncValidators) {\n            asyncValidators = this._mapValidator<AsyncValidatorRegistryService, AsyncValidatorFn>(\n                schema.asyncValidators,\n                this.asyncValidators,\n                options.asyncValidators\n            );\n        }\n\n        const formControl = new FormControl(\n            { value, disabled: schema.disabled },\n            validators,\n            asyncValidators\n        );\n\n        return new FormField(\n            this._getComponent(schema.component, options.components),\n            formControl,\n            new InputProperties(schema.inputs),\n            this._toPersist(schema.persist),\n            new ValidatorParameters(schema.validators, schema.asyncValidators)\n        );\n    }\n\n    /**\n     * @internal\n     * @param value\n     * @param schema\n     */\n    private _toAbstractForm(\n        value: any | null,\n        schema: AbstractFormSchema,\n        options: SchemaCompilerOptions\n    ): AbstractForm {\n        if (schema.type === 'field') {\n            return this.compileField(value, schema as FormFieldSchema, options);\n        }\n        if (schema.type === 'group') {\n            return this.compileGroup(value, schema as FormGroupSchema, options);\n        }\n        return this.compileList(value, schema as FormListSchema, options);\n    }\n\n    /**\n     * @internal\n     *\n     * Maps schema validators to actual validators in the registry and passes custom params to a validator.\n     * If params are undefined then the validator isn't added to the array of validators. Validators\n     * that are found the inline registry will take precedence of those in registries.\n     */\n    private _mapValidator<T extends Registry<any>, M>(\n        validators: { [index: string]: any },\n        registry: T,\n        inline: { [key: string]: (...args: any[]) => M } = {}\n    ) {\n        return Object.keys(validators).reduce(\n            (acc, name) => {\n                const params = validators[name];\n                if (params !== undefined) {\n                    const fn = inline[name] ? inline[name] : registry.get(name);\n\n                    if (!fn) {\n                        throw new Error(\n                            `SchemaCompilerService - Validator not found in ${\n                                this.validators.constructor.name\n                            } for: ${name}.`\n                        );\n                    }\n\n                    acc.push(fn(params));\n                }\n                return acc;\n            },\n            [] as any[]\n        );\n    }\n\n    /**\n     * @internal\n     * Sets default to true if parameter persist is undefined.\n     */\n    private _toPersist(persist: boolean | undefined = true): boolean {\n        return persist;\n    }\n\n    /**\n     * @internal\n     * Decides if should get the type from the inline map or registry.\n     * If no component is found, it would throw an error.\n     *\n     * @param name The name of the component in the registry.\n     * @param components An component type name, used for inline components.\n     */\n    private _getComponent(name: string, components: ComponentTypeMap = {}): ComponentType {\n        const comp = components[name] ? components[name] : this.types.get(name);\n\n        if (!comp) {\n            throw new Error(`SchemaCompilerService - Did not find component for: ${name}.`);\n        }\n\n        return comp;\n    }\n}\n","import { AbstractForm, FormField, FormGrouping, FormList } from '../models';\n\n/**\n * Get an address book of persisting fields to the actual form path.\n * Example:\n * {\n *   'property': ['tab', 'property']\n *   ...\n * }\n * Where tab is not a persisting property of the model.\n */\nexport const getPersistenceMap = (\n    form: AbstractForm,\n    map: { [s: string]: string[] } = {},\n    from: string[] = [],\n    to: string[] = []\n): { [path: string]: string[] } => {\n    if (form instanceof FormField) {\n        if (form.persist) {\n            map[from.join('.')] = to;\n        }\n\n        return map;\n    }\n\n    if (form instanceof FormList || form instanceof FormGrouping) {\n        if (form.persist && from.length) {\n            map[from.join('.')] = to;\n        }\n\n        Object.keys(form.forms).forEach((current: string) => {\n            const child = (form.forms as any)[current];\n            const toActual = [...to, current];\n\n            if (child.persist) {\n                return getPersistenceMap(child, map, [...from, current], toActual);\n            }\n\n            return getPersistenceMap(child, map, from, toActual);\n        });\n    }\n\n    return map;\n};\n","/**\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n * @module smartutils\n */\n\nimport { LIBRARY_NAME } from '../constants';\n\nexport const TESTMODESERVICE = `${LIBRARY_NAME}_TESTMODESERVICE`;\n\n/**\n * @ngdoc service\n * @name @smartutils.services:TestModeService\n *\n * @description\n * Used to determine whether smartedit is running in a e2e (test) mode\n */\n/** @internal */\nexport interface ITestModeService {\n    /**\n     * @ngdoc method\n     * @name @smartutils.services:TestModeService#isE2EMode\n     * @methodOf @smartutils.services:TestModeService\n     *\n     * @description\n     * returns true if smartedit is running in e2e (test) mode\n     *\n     * @returns {Boolean} true/false\n     */\n    isE2EMode(): boolean;\n}\n"]}