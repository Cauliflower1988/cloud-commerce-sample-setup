/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Default date model used by the fundamental components.
 */
import { CalendarService } from '../calendar.service';
export class FdDate {
    /**
     * Static function to get the current date in FdDate form.
     * @return {?}
     */
    static getToday() {
        /** @type {?} */
        const tempDate = new Date();
        return new FdDate(tempDate.getFullYear(), tempDate.getMonth() + 1, tempDate.getDate());
    }
    /**
     *  Static function allowing convert js date object to FdDate model
     * @param {?} date
     * @return {?}
     */
    static getModelFromDate(date) {
        if (date) {
            return new FdDate(date.getFullYear(), date.getMonth() + 1, date.getDate());
        }
    }
    /**
     * Constructor to build a FdDate object from a year, month and day.
     * @param {?} year The year of the date.
     * @param {?} month The month of the date (1-12).
     * @param {?} day The day of the date (1-31, generally).
     */
    constructor(year, month, day) {
        this.year = year;
        this.month = month;
        this.day = day;
    }
    /**
     * Get Luxon date object converted to string from FdDate.
     * @return {?}
     */
    toDateString() {
        if (this.year && this.month && this.day && this.isDateValid()) {
            return this.toDate().toDateString();
        }
        else {
            return '';
        }
    }
    /**
     * Get amount of milliseconds from 01.01.1970
     * -1 is thrown when some some of properties (day,month,year) are not defined
     * @return {?}
     */
    getTimeStamp() {
        if (this.year && this.month && this.day) {
            return this.toDate().getTime();
        }
        else {
            return -1;
        }
    }
    /**
     * Get number of weekday ex. Sunday = 1, Monday = 2, Tuesday = 3 etc.
     * -1 is thrown when some some of properties (day,month,year) are not defined
     * Native javascript date getDay() function returns Sunday as 0, Monday as 1, etc, to it's needed to increment value
     *
     * @return {?}
     */
    getDay() {
        if (this.year && this.month && this.day) {
            return this.toDate().getDay() + 1;
        }
        else {
            return -1;
        }
    }
    /**
     * Get next day
     * @return {?}
     */
    nextDay() {
        /** @type {?} */
        const maxDays = CalendarService.getDaysInMonth(this.month, this.year);
        /** @type {?} */
        const day = this.day >= maxDays ? 1 : this.day + 1;
        /** @type {?} */
        const month = day !== 1 ? this.month : (this.month > 11 ? 1 : this.month + 1);
        /** @type {?} */
        const year = month !== 1 ? this.year : this.year + 1;
        return new FdDate(year, month, day);
    }
    /**
     * Get previous day
     * @return {?}
     */
    previousDay() {
        /**
         * Check if should switch month to previous one
         * @type {?}
         */
        const prevMonth = this.day === 1;
        /**
         * Check if should switch year to previous one
         * @type {?}
         */
        const prevYear = (this.month === 1) && prevMonth;
        /** @type {?} */
        const year = prevYear ? this.year - 1 : this.year;
        /** @type {?} */
        const month = prevYear ? 12 : (prevMonth ? this.month - 1 : this.month);
        /**
         * Amount of days in month
         * @type {?}
         */
        const maxDays = CalendarService.getDaysInMonth(month, year);
        /** @type {?} */
        const day = this.day === 1 ? maxDays : this.day - 1;
        return new FdDate(year, month, day);
    }
    /**
     * Get native date object from FdDate.
     * @return {?}
     */
    toDate() {
        return new Date(this.year, this.month - 1, this.day);
    }
    /**
     * Method that checks validity of current FdDate object.
     * @return {?}
     */
    isDateValid() {
        if (!this) {
            return false;
        }
        if (!this.year || !this.month || !this.day) {
            return false;
        }
        if (this.year <= 0 || this.month < 1 || this.month > 12) {
            return false;
        }
        if (this.day < 1 || this.day > CalendarService.getDaysInMonth(this.month, this.year)) {
            return false;
        }
        return true;
    }
}
if (false) {
    /**
     * The year of the date.
     * @type {?}
     */
    FdDate.prototype.year;
    /**
     * The month of the date. 1 = January, 12 = December.
     * @type {?}
     */
    FdDate.prototype.month;
    /**
     * Day of the date. Starts at 1.
     * @type {?}
     */
    FdDate.prototype.day;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmQtZGF0ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmdW5kYW1lbnRhbC1uZ3gvY29yZS8iLCJzb3VyY2VzIjpbImxpYi9jYWxlbmRhci9tb2RlbHMvZmQtZGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR0EsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRXRELE1BQU0sT0FBTyxNQUFNOzs7OztJQW9CZixNQUFNLENBQUMsUUFBUTs7Y0FDTCxRQUFRLEdBQVMsSUFBSSxJQUFJLEVBQUU7UUFDakMsT0FBTyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLEVBQUUsUUFBUSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsRUFBRSxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUMzRixDQUFDOzs7Ozs7SUFLRCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsSUFBVTtRQUM5QixJQUFJLElBQUksRUFBRTtZQUNOLE9BQU8sSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7U0FDOUU7SUFDTCxDQUFDOzs7Ozs7O0lBUUQsWUFBWSxJQUFZLEVBQUUsS0FBYSxFQUFFLEdBQVc7UUFDaEQsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7SUFDbkIsQ0FBQzs7Ozs7SUFLTSxZQUFZO1FBQ2YsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFLEVBQUU7WUFDM0QsT0FBTyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsWUFBWSxFQUFF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SSxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDeEMsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFFRCxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxFQUFFO1lBQ3JELE9BQU8sS0FBSyxDQUFDO1NBQ2hCO1FBRUQsSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLGVBQWUsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDbEYsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFFRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0NBRUo7Ozs7OztJQXpJRyxzQkFBb0I7Ozs7O0lBS3BCLHVCQUFxQjs7Ozs7SUFLckIscUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEZWZhdWx0IGRhdGUgbW9kZWwgdXNlZCBieSB0aGUgZnVuZGFtZW50YWwgY29tcG9uZW50cy5cbiAqL1xuaW1wb3J0IHsgQ2FsZW5kYXJTZXJ2aWNlIH0gZnJvbSAnLi4vY2FsZW5kYXIuc2VydmljZSc7XG5cbmV4cG9ydCBjbGFzcyBGZERhdGUge1xuXG4gICAgLyoqXG4gICAgICogVGhlIHllYXIgb2YgdGhlIGRhdGUuXG4gICAgICovXG4gICAgcHVibGljIHllYXI6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtb250aCBvZiB0aGUgZGF0ZS4gMSA9IEphbnVhcnksIDEyID0gRGVjZW1iZXIuXG4gICAgICovXG4gICAgcHVibGljIG1vbnRoOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBEYXkgb2YgdGhlIGRhdGUuIFN0YXJ0cyBhdCAxLlxuICAgICAqL1xuICAgIHB1YmxpYyBkYXk6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBmdW5jdGlvbiB0byBnZXQgdGhlIGN1cnJlbnQgZGF0ZSBpbiBGZERhdGUgZm9ybS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0VG9kYXkoKTogRmREYXRlIHtcbiAgICAgICAgY29uc3QgdGVtcERhdGU6IERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZXR1cm4gbmV3IEZkRGF0ZSh0ZW1wRGF0ZS5nZXRGdWxsWWVhcigpLCB0ZW1wRGF0ZS5nZXRNb250aCgpICsgMSwgdGVtcERhdGUuZ2V0RGF0ZSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAgU3RhdGljIGZ1bmN0aW9uIGFsbG93aW5nIGNvbnZlcnQganMgZGF0ZSBvYmplY3QgdG8gRmREYXRlIG1vZGVsXG4gICAgICovXG4gICAgc3RhdGljIGdldE1vZGVsRnJvbURhdGUoZGF0ZTogRGF0ZSk6IEZkRGF0ZSB7XG4gICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZkRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSArIDEsIGRhdGUuZ2V0RGF0ZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yIHRvIGJ1aWxkIGEgRmREYXRlIG9iamVjdCBmcm9tIGEgeWVhciwgbW9udGggYW5kIGRheS5cbiAgICAgKiBAcGFyYW0geWVhciBUaGUgeWVhciBvZiB0aGUgZGF0ZS5cbiAgICAgKiBAcGFyYW0gbW9udGggVGhlIG1vbnRoIG9mIHRoZSBkYXRlICgxLTEyKS5cbiAgICAgKiBAcGFyYW0gZGF5IFRoZSBkYXkgb2YgdGhlIGRhdGUgKDEtMzEsIGdlbmVyYWxseSkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyLCBkYXk6IG51bWJlcikge1xuICAgICAgICB0aGlzLnllYXIgPSB5ZWFyO1xuICAgICAgICB0aGlzLm1vbnRoID0gbW9udGg7XG4gICAgICAgIHRoaXMuZGF5ID0gZGF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBMdXhvbiBkYXRlIG9iamVjdCBjb252ZXJ0ZWQgdG8gc3RyaW5nIGZyb20gRmREYXRlLlxuICAgICAqL1xuICAgIHB1YmxpYyB0b0RhdGVTdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMueWVhciAmJiB0aGlzLm1vbnRoICYmIHRoaXMuZGF5ICYmIHRoaXMuaXNEYXRlVmFsaWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9EYXRlKCkudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyBmcm9tIDAxLjAxLjE5NzBcbiAgICAgKiAtMSBpcyB0aHJvd24gd2hlbiBzb21lIHNvbWUgb2YgcHJvcGVydGllcyAoZGF5LG1vbnRoLHllYXIpIGFyZSBub3QgZGVmaW5lZFxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRUaW1lU3RhbXAoKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMueWVhciAmJiB0aGlzLm1vbnRoICYmIHRoaXMuZGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0RhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbnVtYmVyIG9mIHdlZWtkYXkgZXguIFN1bmRheSA9IDEsIE1vbmRheSA9IDIsIFR1ZXNkYXkgPSAzIGV0Yy5cbiAgICAgKiAtMSBpcyB0aHJvd24gd2hlbiBzb21lIHNvbWUgb2YgcHJvcGVydGllcyAoZGF5LG1vbnRoLHllYXIpIGFyZSBub3QgZGVmaW5lZFxuICAgICAqIE5hdGl2ZSBqYXZhc2NyaXB0IGRhdGUgZ2V0RGF5KCkgZnVuY3Rpb24gcmV0dXJucyBTdW5kYXkgYXMgMCwgTW9uZGF5IGFzIDEsIGV0YywgdG8gaXQncyBuZWVkZWQgdG8gaW5jcmVtZW50IHZhbHVlXG4gICAgICpcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0RGF5KCk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLnllYXIgJiYgdGhpcy5tb250aCAmJiB0aGlzLmRheSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9EYXRlKCkuZ2V0RGF5KCkgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIEdldCBuZXh0IGRheSAqL1xuICAgIHB1YmxpYyBuZXh0RGF5KCk6IEZkRGF0ZSB7XG4gICAgICAgIGNvbnN0IG1heERheXMgPSBDYWxlbmRhclNlcnZpY2UuZ2V0RGF5c0luTW9udGgodGhpcy5tb250aCwgdGhpcy55ZWFyKTtcbiAgICAgICAgY29uc3QgZGF5ID0gdGhpcy5kYXkgPj0gbWF4RGF5cyA/IDEgOiB0aGlzLmRheSArIDE7XG4gICAgICAgIGNvbnN0IG1vbnRoID0gZGF5ICE9PSAxID8gdGhpcy5tb250aCA6ICh0aGlzLm1vbnRoID4gMTEgPyAxIDogdGhpcy5tb250aCArIDEpO1xuICAgICAgICBjb25zdCB5ZWFyID0gbW9udGggIT09IDEgPyB0aGlzLnllYXIgOiB0aGlzLnllYXIgKyAxO1xuICAgICAgICByZXR1cm4gbmV3IEZkRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcbiAgICB9XG5cbiAgICAvKiogR2V0IHByZXZpb3VzIGRheSAgKi9cbiAgICBwdWJsaWMgcHJldmlvdXNEYXkoKTogRmREYXRlIHtcblxuICAgICAgICAvKiogQ2hlY2sgaWYgc2hvdWxkIHN3aXRjaCBtb250aCB0byBwcmV2aW91cyBvbmUgKi9cbiAgICAgICAgY29uc3QgcHJldk1vbnRoOiBib29sZWFuID0gdGhpcy5kYXkgPT09IDE7XG5cbiAgICAgICAgLyoqIENoZWNrIGlmIHNob3VsZCBzd2l0Y2ggeWVhciB0byBwcmV2aW91cyBvbmUgKi9cbiAgICAgICAgY29uc3QgcHJldlllYXI6IGJvb2xlYW4gPSAoIHRoaXMubW9udGggPT09IDEgKSAmJiBwcmV2TW9udGg7XG5cbiAgICAgICAgY29uc3QgeWVhciA9IHByZXZZZWFyID8gdGhpcy55ZWFyIC0gMSA6IHRoaXMueWVhcjtcbiAgICAgICAgY29uc3QgbW9udGggPSBwcmV2WWVhciA/IDEyIDogKCBwcmV2TW9udGggPyB0aGlzLm1vbnRoIC0gMSA6IHRoaXMubW9udGggKTtcblxuICAgICAgICAvKiogQW1vdW50IG9mIGRheXMgaW4gbW9udGggKi9cbiAgICAgICAgY29uc3QgbWF4RGF5czogbnVtYmVyID0gQ2FsZW5kYXJTZXJ2aWNlLmdldERheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKTtcblxuICAgICAgICBjb25zdCBkYXkgPSB0aGlzLmRheSA9PT0gMSA/IG1heERheXMgOiB0aGlzLmRheSAtIDE7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBGZERhdGUoeWVhciwgbW9udGgsIGRheSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IG5hdGl2ZSBkYXRlIG9iamVjdCBmcm9tIEZkRGF0ZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgdG9EYXRlKCk6IERhdGUge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy55ZWFyLCB0aGlzLm1vbnRoIC0gMSwgdGhpcy5kYXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0aGF0IGNoZWNrcyB2YWxpZGl0eSBvZiBjdXJyZW50IEZkRGF0ZSBvYmplY3QuXG4gICAgICovXG4gICAgcHVibGljIGlzRGF0ZVZhbGlkKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXRoaXMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy55ZWFyIHx8ICF0aGlzLm1vbnRoIHx8ICF0aGlzLmRheSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMueWVhciA8PSAwIHx8IHRoaXMubW9udGggPCAxIHx8IHRoaXMubW9udGggPiAxMikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGF5IDwgMSB8fCB0aGlzLmRheSA+IENhbGVuZGFyU2VydmljZS5nZXREYXlzSW5Nb250aCh0aGlzLm1vbnRoLCB0aGlzLnllYXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbn1cbiJdfQ==